define("metaserver/static/js/abuse/fingerprintjs_component",["require","exports","tslib","react","metaserver/static/js/modules/constants/fingerprintjs_constants","metaserver/static/js/logging/telemetry","metaserver/static/js/logging/hive/schemas/abuse-fingerprintjs_logs","metaserver/static/js/components/ui/css","metaserver/static/js/core/exception","metaserver/static/js/metrics/index","metaserver/static/js/modules/constants/page_load","metaserver/static/js/abuse/fpjs_static_script"],(function(e,t,r,n,a,o,i,s,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FingerprintJs=t.FingerprintJsComponent=t.isTest=t.get_visitor_id=void 0,n=r.__importDefault(n),o=r.__importStar(o),l=r.__importStar(l),d=r.__importStar(d);t.get_visitor_id=function(e){return{"visitor-id":e.getWrappedComponent().visitorId}};t.isTest=()=>u.IS_SELENIUM_TEST;class p extends n.default.Component{constructor(e){super(e),this.invokeFPJSIframeAndLog=(e,t)=>r.__awaiter(this,void 0,void 0,(function*(){if(a.SHOULD_INVOKE_FINGERPRINTJS)if(null===this.state.fpResponse){this.recordFingerprintJsInvocationStats(this.props.source),this.fpPromise.then(e=>e.get({extendedResult:!0})).then(e=>{this.setState({fpResponse:e})}).catch(e=>{this.setState({err:e.message})});const r=(new Date).getTime();for(;null===this.state.fpResponse&&(new Date).getTime()-r<(t||2e3);)yield new Promise(e=>setTimeout(e,50));const n=(new Date).getTime();null===this.state.fpResponse?(this.logEmptyResponse(e),this.recordFingerprintJsLoadingStats(this.props.source,!1,this.state.err,n-r)):(this.logFPResponse(e),this.recordFingerprintJsLoadingStats(this.props.source,!0,this.state.err,n-r))}else this.logFPResponse(e)})),this.recordFingerprintJsLoadingStats=(e,t,r,n)=>{const o=(0,c.getMetricsReporter)(),i=o.createCounter({ns:"abuse",name:"fingerprintjs/loading_result"},{is_success:String(t),event:e,err:r,region:a.REGION});i.increment(),i.record(),o.createStats({ns:"abuse",name:"fingerprintjs/loading_latency"},{is_success:String(t),event:e,err:r,region:a.REGION}).record(n)},this.recordFingerprintJsInvocationStats=e=>{const t=(0,c.getMetricsReporter)().createCounter({ns:"abuse",name:"fingerprintjs/invocation"},{event:e,region:a.REGION});t.increment(),t.record()},this.logEmptyResponse=e=>{try{this.visitorId="",this.fingerprintJsInfoLogger.log(new i.FingerprintJsLogsRow({email:e,event:this.props.source,request_id:"",visitor_id:"",visitor_found:!1,confidence_score:void 0,confidence_comment:"",browser_name:"",browser_version:void 0,device:"",incognito:void 0,ip:"",latitude:"",longitude:"",timezone:"",city:"",country:"",os:"",os_version:"",confidence_score_double:void 0}))}catch(e){l.reportException({err:e,severity:l.SEVERITY.CRITICAL,tags:["fingerprintjs"]})}},this.logFPResponse=e=>{const t=this.state.fpResponse;try{this.visitorId=t.visitorId,this.fingerprintJsInfoLogger.log(new i.FingerprintJsLogsRow({email:e,event:this.props.source,request_id:t.requestId,visitor_id:t.visitorId,visitor_found:t.visitorFound,confidence_score:void 0,confidence_comment:t.confidence?t.confidence.comment:"",browser_name:t.browserName,browser_version:t.browserVersion,device:t.device,incognito:t.incognito,ip:t.ip,latitude:t.ipLocation?String(t.ipLocation.latitude):"",longitude:t.ipLocation?String(t.ipLocation.longitude):"",timezone:t.ipLocation?String(t.ipLocation.timezone):"",city:t.ipLocation&&t.ipLocation.city?t.ipLocation.city.name:void 0,country:t.ipLocation&&t.ipLocation.country?t.ipLocation.country.name:void 0,os:t.os,os_version:String(t.osVersion),confidence_score_double:t.confidence.score}))}catch(e){l.reportException({err:e,severity:l.SEVERITY.CRITICAL,tags:["fingerprintjs"]})}},this.fingerprintJsInfoLogger=new o.HiveLogger,this.state={fpResponse:null,err:"None"},this.fpPromise=d.load({token:a.FINGERPRINTJS_TOKEN,endpoint:"https://fp.dropbox.com"})}componentDidMount(){}render(){return n.default.createElement("div",{className:"fingerprintjsDiv"})}}t.FingerprintJsComponent=p,p.displayName="FingerprintJsComponent",t.FingerprintJs=(0,s.requireCssWithComponent)(p,["/static/metaserver/static/css/abuse/fingerprintjs_component-vfleQmAgD.css"])})),define("metaserver/static/js/abuse/fpjs_static_script",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=t.defaultTlsEndpoint=t.defaultEndpoint=t.ERROR_WRONG_REGION=t.ERROR_UNSUPPORTED_VERSION=t.ERROR_TOKEN_MISSING=t.ERROR_TOKEN_INVALID=t.ERROR_TOKEN_EXPIRED=t.ERROR_SUBSCRIPTION_NOT_ACTIVE=t.ERROR_SERVER_TIMEOUT=t.ERROR_RATE_LIMIT=t.ERROR_NETWORK_CONNECTION=t.ERROR_NETWORK_ABORT=t.ERROR_INTEGRATION_FAILURE=t.ERROR_INSTALLATION_METHOD_RESTRICTED=t.ERROR_GENERAL_SERVER_FAILURE=t.ERROR_FORBIDDEN_ORIGIN=t.ERROR_FORBIDDEN_HEADER=t.ERROR_FORBIDDEN_ENDPOINT=t.ERROR_CSP_BLOCK=t.ERROR_CLIENT_TIMEOUT=t.ERROR_BAD_RESPONSE_FORMAT=t.ERROR_BAD_REQUEST_FORMAT=t.ERROR_API_KEY_MISSING=t.ERROR_API_KEY_INVALID=t.ERROR_API_KEY_EXPIRED=void 0;var r=function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function n(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((n=n.apply(e,t||[])).next())}))}function a(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return(function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}})([s,l])}}}function o(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)n[a]=o[i];return n}function i(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}function s(e,t){return new Promise((function(r){return l(r,e,t)}))}function l(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=Date.now()+t,o=0,i=function(){o=setTimeout((function(){Date.now()<a?i():e.apply(void 0,r)}),a-Date.now())};return i(),function(){return clearTimeout(o)}}function c(e,t,r){for(var n=[],a=3;a<arguments.length;a++)n[a-3]=arguments[a];var o,i=!1,s=e,c=0,u=function(){i||o||(c=Date.now(),o=l((function(){i=!0,r.apply(void 0,n)}),s))},d=function(){!i&&o&&(o(),o=void 0,s-=Date.now()-c)};return t&&u(),{start:u,stop:d}}function u(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=document,o="visibilitychange",i=function(){return a.hidden?u():l()},s=c(t,!a.hidden,(function(){a.removeEventListener(o,i),e.apply(void 0,r)})),l=s.start,u=s.stop;return a.addEventListener(o,i),function(){a.removeEventListener(o,i),u()}}function d(e,t){return new Promise((function(r){return u(r,e,t)}))}function p(e,t){return n(this,void 0,void 0,(function(){var r;return a(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return[2,n.sent()];case 2:return r=n.sent(),console.error(r),[2,t];case 3:return[2]}}))}))}function m(e,t){return new Promise((function(r,n){var a=!1;null==t||t.then((function(){return a=!0}),(function(){return a=!0})),("function"==typeof e?m(Promise.resolve(),t).then(e):e).then((function(e){a||r(e)}),(function(e){a||n(e)}))}))}function g(e){e.then(void 0,(function(){}))}function h(e,t){return n(this,void 0,void 0,(function(){var r,n,o,i;return a(this,(function(a){switch(a.label){case 0:try{r=t().then((function(e){return n=[!0,e]}),(function(e){return n=[!1,e]}))}catch(e){n=[!1,e]}return i=e.then((function(e){return o=[!0,e]}),(function(e){return o=[!1,e]})),[4,Promise.race([r,i])];case 1:return a.sent(),[2,function(){if(n){if(n[0])return n[1];throw n[1]}if(o){if(o[0])return o[1];throw o[1]}throw new Error("96375")}]}}))}))}function f(e){return e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",E="".concat(v,"+/");function S(e,t){if(0==t.length||t.length>e.length)return-1;for(var r=0;r<e.length;r++){for(var n=0,a=0;a<t.length;a++){if(e[r+a]!==t[a]){n=0;break}n++}if(n==t.length)return r}return-1}function b(e){if("function"==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=unescape(encodeURI(e)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}function I(e){if("function"==typeof TextDecoder){var t=(new TextDecoder).decode(e);if(t)return t}var r=f(e);return decodeURIComponent(escape(String.fromCharCode.apply(null,r)))}function T(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function y(e,t,r){return void 0===r&&(r="..."),e.length<=t?e:"".concat(e.slice(0,Math.max(0,t-r.length))).concat(r)}function O(e,t){return(e-t+256)%256}function w(e){for(var t=f(e),r=t.length,n="",a=0;a<r;a+=3)n+=E[t[a]>>2]+E[(3&t[a])<<4|t[a+1]>>4]+E[(15&t[a+1])<<2|t[a+2]>>6]+E[63&t[a+2]];return r%3==2?"".concat(n.slice(0,-1),"="):r%3==1?"".concat(n.slice(0,-2),"=="):n}function R(e){for(var t="",r=0;r<e.length;++r)if(r>0){var n=e[r].toLowerCase();n!==e[r]?t+=" ".concat(n):t+=e[r]}else t+=e[r].toUpperCase();return t}function L(e){for(var t=0,r=0;r<e.length;++r)t=(t<<5)-t+e.charCodeAt(r)|0;return t}function N(e){return void 0===e?void 0:"".concat(e)}function A(e,t){if(void 0!==e){if(!Array.isArray(e))throw new TypeError("Expected ".concat(t," to be an array, a ").concat((function(e){return"object"==typeof e?e?Object.prototype.toString.call(e):"null":typeof e})(e)," is given"));return e.map(String)}}function C(e){return(function(e,t){for(var r="",n=0;n<e;n++)r+=t.charAt(Math.random()*t.length);return r})(e,v)}function P(){return 256*Math.random()|0}var G={default:"endpoint"},M={default:"tlsEndpoint"};function D(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];e&&p((function(){var n=t.apply(void 0,r);void 0!==n&&e(n)}))}function F(e,t,r,o,i){return n(this,void 0,void 0,(function(){var n,s;return a(this,(function(a){switch(a.label){case 0:D(e,t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i()];case 2:return n=a.sent(),[3,4];case 3:throw s=a.sent(),D(e,o,s),s;case 4:return D(e,r,n),[2,n]}}))}))}function x(e){void 0===e&&(e="[FingerprintJS Pro] ");var t={};return function(r){switch(r.e){case 15:t[r.getCallId]=r.body;break;case 18:console.log("".concat(e,"Visitor id request"),t[r.getCallId]);break;case 19:console.log("".concat(e,"Visitor id response"),r.body);break;case 16:case 17:delete t[r.getCallId]}}}function k(e){return(function(e,t,r,n){var a,o=document,i="securitypolicyviolation",s=function(t){var r=new URL(e,location.href),n=t.blockedURI;n!==r.href&&n!==r.protocol.slice(0,-1)&&n!==r.origin||(a=t,l())};o.addEventListener(i,s);var l=function(){return o.removeEventListener(i,s)};return null==n||n.then(l,l),Promise.resolve().then(t).then((function(e){return l(),e}),(function(e){return new Promise((function(e){return setTimeout(e)})).then((function(){if(l(),a)return(function(){throw j()})();throw e}))}))})(e.url,(function(){return(function(e){var t=e.url,r=e.method,n=void 0===r?"get":r,a=e.body,o=e.headers,i=e.withCredentials,s=void 0!==i&&i,l=e.timeout,c=e.responseFormat,u=e.abort;return new Promise((function(e,r){var i=new XMLHttpRequest;try{i.open(n,t,!0)}catch(e){if(e instanceof Error&&/violate.+content security policy/i.test(e.message))throw j();throw e}for(var d in i.withCredentials=s,i.timeout=void 0===l?0:Math.max(l,1),"binary"===c&&(i.responseType="arraybuffer"),o)_(o,d)&&i.setRequestHeader(d,o[d]);i.onload=function(){return e((function(e){return{body:e.response,status:e.status,statusText:e.statusText,getHeader:function(t){return(function(e,t){var r,n=new RegExp("^".concat((r=t,r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),": (.*)$"),"im").exec(e);return n?n[1]:void 0})(e.getAllResponseHeaders(),t)}}})(i))},i.ontimeout=function(){return r(U("TimeoutError","The request timed out"))},i.onabort=function(){return r(U("AbortError","The request is aborted"))},i.onerror=function(){return r(U("TypeError",navigator.onLine?"Connection error":"Network offline"))},i.send((function(e){var t=function(){try{return new Blob([]),!1}catch(e){return!0}};if(e instanceof ArrayBuffer){if(!t())return new Uint8Array(e)}else if((null==e?void 0:e.buffer)instanceof ArrayBuffer&&t())return e.buffer;return e})(a)),null==u||u.catch((function(){})).then((function(){i.onabort=null,i.abort()}))}))})(e)}),0,e.abort)}function U(e,t){var r=new Error(t);return r.name=e,r}function j(){return U("CSPError","The request is blocked by the CSP")}function V(e,t){return new Promise((function(r){return setTimeout(r,e,t)}))}function B(e){return e&&"function"==typeof e.then}function W(e,t){try{var r=e();B(r)?r.then((function(e){return t(!0,e)}),(function(e){return t(!1,e)})):t(!0,r)}catch(e){t(!1,e)}}function H(e,t,r){return void 0===r&&(r=16),n(this,void 0,void 0,(function(){var n,o,i;return a(this,(function(a){switch(a.label){case 0:n=Date.now(),o=0,a.label=1;case 1:return o<e.length?(t(e[o],o),(i=Date.now())>=n+r?(n=i,[4,V(0)]):[3,3]):[3,4];case 2:a.sent(),a.label=3;case 3:return++o,[3,1];case 4:return[2]}}))}))}function X(e){e.then(void 0,(function(){}))}function q(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function Y(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function z(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function K(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function J(e,t){return[e[0]^t[0],e[1]^t[1]]}function Z(e){return e=J(e,[0,e[0]>>>1]),e=J(e=Y(e,[4283543511,3981806797]),[0,e[0]>>>1]),J(e=Y(e,[3301882366,444984403]),[0,e[0]>>>1])}function Q(e){return parseInt(e)}function $(e){return parseFloat(e)}function ee(e,t){return"number"==typeof e&&isNaN(e)?t:e}function te(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function re(e){return e&&"object"==typeof e&&"message"in e?e:{message:e}}function ne(e){return"function"!=typeof e}function ae(e,t,r){var o=Object.keys(e).filter((function(e){return!(function(e,t){for(var r=0,n=e.length;r<n;++r)if(e[r]===t)return!0;return!1})(r,e)})),i=Array(o.length);return H(o,(function(r,n){i[n]=(function(e,t){var r=new Promise((function(r){var n=Date.now();W(e.bind(null,t),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=Date.now()-n;if(!e[0])return r((function(){return{error:re(e[1]),duration:a}}));var o=e[1];if(ne(o))return r((function(){return{value:o,duration:a}}));r((function(){return new Promise((function(e){var t=Date.now();W(o,(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=a+Date.now()-t;if(!r[0])return e({error:re(r[1]),duration:o});e({value:r[1],duration:o})}))}))}))}))}));return X(r),function(){return r.then((function(e){return e()}))}})(e[r],t)})),function(){return n(this,void 0,void 0,(function(){var e,t,r,n,s,l;return a(this,(function(c){switch(c.label){case 0:for(e={},t=0,r=o;t<r.length;t++)n=r[t],e[n]=void 0;s=Array(o.length),l=function(){var t;return a(this,(function(r){switch(r.label){case 0:return t=!0,[4,H(o,(function(r,n){if(!s[n])if(i[n]){var a=i[n]().then((function(t){return e[r]=t}));X(a),s[n]=a}else t=!1}))];case 1:return r.sent(),t?[2,"break"]:[4,V(1)];case 2:return r.sent(),[2]}}))},c.label=1;case 1:return[5,l()];case 2:if("break"===c.sent())return[3,4];c.label=3;case 3:return[3,1];case 4:return[4,Promise.all(s)];case 5:return c.sent(),[2,e]}}))}))}}function oe(e,t){var r=function(e){return ne(e)?t(e):function(){var r=e();return B(r)?r.then(t):t(r)}};return function(t){var n=e(t);return B(n)?n.then(r):r(n)}}function ie(){var e=window,t=navigator;return te(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function se(){var e=window,t=navigator;return te(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!ie()}function le(){var e=window,t=navigator;return te(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function ce(){var e=window,t=navigator;return te(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4}function ue(){var e=window;return te(["safari"in e,!("DeviceMotionEvent"in e),!("ongestureend"in e),!("standalone"in navigator)])>=3}function de(){var e,t,r=window;return te(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in r,"mozInnerScreenX"in r,"CSSMozDocumentRule"in r,"CanvasCaptureMediaStream"in r])>=4}function pe(){var e=le(),t=de();if(!e&&!t)return!1;var r=window;return te(["onorientationchange"in r,"orientation"in r,e&&!("SharedWorker"in r),t&&/android/i.test(navigator.appVersion)])>=2}function me(e){var t=new Error(e);return t.name=e,t}function ge(e,t,r){var o,i,s;return void 0===r&&(r=50),n(this,void 0,void 0,(function(){var n,l;return a(this,(function(a){switch(a.label){case 0:n=document,a.label=1;case 1:return n.body?[3,3]:[4,V(r)];case 2:return a.sent(),[3,1];case 3:l=n.createElement("iframe"),a.label=4;case 4:return a.trys.push([4,,10,11]),[4,new Promise((function(e,r){var a=!1,o=function(){a=!0,e()};l.onload=o,l.onerror=function(e){a=!0,r(e)};var i=l.style;i.setProperty("display","block","important"),i.position="absolute",i.top="0",i.left="0",i.visibility="hidden",t&&"srcdoc"in l?l.srcdoc=t:l.src="about:blank",n.body.appendChild(l);var s=function(){var e,t;a||("complete"===(null===(t=null===(e=l.contentWindow)||void 0===e?void 0:e.document)||void 0===t?void 0:t.readyState)?o():setTimeout(s,10))};s()}))];case 5:a.sent(),a.label=6;case 6:return(null===(i=null===(o=l.contentWindow)||void 0===o?void 0:o.document)||void 0===i?void 0:i.body)?[3,8]:[4,V(r)];case 7:return a.sent(),[3,6];case 8:return[4,e(l,l.contentWindow)];case 9:return[2,a.sent()];case 10:return null===(s=l.parentNode)||void 0===s||s.removeChild(l),[7];case 11:return[2]}}))}))}function he(e){for(var t=(function(e){for(var t,r,n="Unexpected syntax '"+e+"'",a=/^\s*([a-z-]*)(.*)$/i.exec(e),o=a[1]||void 0,i={},s=/([.:#][\w-]+|\[.+?\])/gi,l=function(e,t){i[e]=i[e]||[],i[e].push(t)};;){var c=s.exec(a[2]);if(!c)break;var u=c[0];switch(u[0]){case".":l("class",u.slice(1));break;case"#":l("id",u.slice(1));break;case"[":var d=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(u);if(!d)throw new Error(n);l(d[1],null!==(r=null!==(t=d[4])&&void 0!==t?t:d[5])&&void 0!==r?r:"");break;default:throw new Error(n)}}return[o,i]})(e),r=t[0],n=t[1],a=document.createElement(null!=r?r:"div"),o=0,i=Object.keys(n);o<i.length;o++){var s=i[o],l=n[s].join(" ");"style"===s?fe(a.style,l):a.setAttribute(s,l)}return a}function fe(e,t){for(var r=0,n=t.split(";");r<n.length;r++){var a=n[r],o=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(a);if(o){var i=o[1],s=o[2],l=o[4];e.setProperty(i,s,l||"")}}}t.defaultEndpoint=G,t.defaultTlsEndpoint=M;var _e,ve,Ee=["monospace","sans-serif","serif"],Se=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function be(e){return e.toDataURL()}function Ie(){var e=screen;return[ee($(e.availTop),null),ee($(e.width)-$(e.availWidth)-ee($(e.availLeft),0),null),ee($(e.height)-$(e.availHeight)-ee($(e.availTop),0),null),ee($(e.availLeft),null)]}function Te(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function ye(e){var t;return n(this,void 0,void 0,(function(){var r,n,o,i,s,l,c;return a(this,(function(a){switch(a.label){case 0:for(r=document,n=r.createElement("div"),o=new Array(e.length),i={},Oe(n),c=0;c<e.length;++c)s=he(e[c]),Oe(l=r.createElement("div")),l.appendChild(s),n.appendChild(l),o[c]=s;a.label=1;case 1:return r.body?[3,3]:[4,V(50)];case 2:return a.sent(),[3,1];case 3:r.body.appendChild(n);try{for(c=0;c<e.length;++c)o[c].offsetParent||(i[e[c]]=!0)}finally{null===(t=n.parentNode)||void 0===t||t.removeChild(n)}return[2,i]}}))}))}function Oe(e){e.style.setProperty("display","block","important")}function we(e){return matchMedia("(inverted-colors: "+e+")").matches}function Re(e){return matchMedia("(forced-colors: "+e+")").matches}function Le(e){return matchMedia("(prefers-contrast: "+e+")").matches}function Ne(e){return matchMedia("(prefers-reduced-motion: "+e+")").matches}function Ae(e){return matchMedia("(dynamic-range: "+e+")").matches}var Ce=Math,Pe=function(){return 0},Ge={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};var Me=function(e,t){t=t||0;var r,n=(e=e||"").length%16,a=e.length-n,o=[0,t],i=[0,t],s=[0,0],l=[0,0],c=[2277735313,289559509],u=[1291169091,658871167];for(r=0;r<a;r+=16)s=[255&e.charCodeAt(r+4)|(255&e.charCodeAt(r+5))<<8|(255&e.charCodeAt(r+6))<<16|(255&e.charCodeAt(r+7))<<24,255&e.charCodeAt(r)|(255&e.charCodeAt(r+1))<<8|(255&e.charCodeAt(r+2))<<16|(255&e.charCodeAt(r+3))<<24],l=[255&e.charCodeAt(r+12)|(255&e.charCodeAt(r+13))<<8|(255&e.charCodeAt(r+14))<<16|(255&e.charCodeAt(r+15))<<24,255&e.charCodeAt(r+8)|(255&e.charCodeAt(r+9))<<8|(255&e.charCodeAt(r+10))<<16|(255&e.charCodeAt(r+11))<<24],s=z(s=Y(s,c),31),o=q(o=z(o=J(o,s=Y(s,u)),27),i),o=q(Y(o,[0,5]),[0,1390208809]),l=z(l=Y(l,u),33),i=q(i=z(i=J(i,l=Y(l,c)),31),o),i=q(Y(i,[0,5]),[0,944331445]);switch(s=[0,0],l=[0,0],n){case 15:l=J(l,K([0,e.charCodeAt(r+14)],48));case 14:l=J(l,K([0,e.charCodeAt(r+13)],40));case 13:l=J(l,K([0,e.charCodeAt(r+12)],32));case 12:l=J(l,K([0,e.charCodeAt(r+11)],24));case 11:l=J(l,K([0,e.charCodeAt(r+10)],16));case 10:l=J(l,K([0,e.charCodeAt(r+9)],8));case 9:l=Y(l=J(l,[0,e.charCodeAt(r+8)]),u),i=J(i,l=Y(l=z(l,33),c));case 8:s=J(s,K([0,e.charCodeAt(r+7)],56));case 7:s=J(s,K([0,e.charCodeAt(r+6)],48));case 6:s=J(s,K([0,e.charCodeAt(r+5)],40));case 5:s=J(s,K([0,e.charCodeAt(r+4)],32));case 4:s=J(s,K([0,e.charCodeAt(r+3)],24));case 3:s=J(s,K([0,e.charCodeAt(r+2)],16));case 2:s=J(s,K([0,e.charCodeAt(r+1)],8));case 1:s=Y(s=J(s,[0,e.charCodeAt(r)]),c),o=J(o,s=Y(s=z(s,31),u))}return o=q(o=J(o,[0,e.length]),i=J(i,[0,e.length])),i=q(i,o),o=q(o=Z(o),i=Z(i)),i=q(i,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)};function De(){var e=window,t=navigator;return T(["maxTouchPoints"in t,"mediaCapabilities"in t,"PointerEvent"in e,"visualViewport"in e,"onafterprint"in e])>=4}function Fe(){var e=window;return T([!("PushManager"in e),!("AudioBuffer"in e),!("RTCPeerConnection"in e),!("geolocation"in navigator),!("ServiceWorker"in e)])>=3}function xe(e,t,r,o,l){void 0===o&&(o=1/0);var c,u={failedAttempts:[]},d=(function(e){var t=(function(e){var t=i([],e,!0);return{current:function(){return t[0]},postpone:function(){var e=t.shift();void 0!==e&&t.push(e)},exclude:function(){t.shift()}}})(e),r=(function(e,t){var r=0;return function(){return Math.random()*Math.min(t,e*Math.pow(2,r++))}})(300,1e4);return[t.current(),function(e,n,a){var o;if(n){var i=(function(e){var t=e.getHeader("retry-after");if(t){if(/^\s*\d+(\.\d+)?\s*$/.test(t))return new Date(Date.now()+1e3*parseFloat(t));var r=new Date(t);return isNaN(r)?void 0:r}})(n);i?(t.postpone(),o=i):t.exclude()}else a instanceof Error&&"CSPError"===a.name?(t.exclude(),o=new Date):t.postpone();var s=t.current();return void 0===s?void 0:[s,null!=o?o:new Date(e.getTime()+r())]}]})(e),p=d[0],g=d[1],h=(c=[null==l?void 0:l.then((function(e){return u.aborted={resolve:!0,value:e}}),(function(e){return u.aborted={resolve:!1,error:e}})),n(this,void 0,void 0,(function(){var e,n,i;return a(this,(function(c){switch(c.label){case 0:if(void 0===p)return[2];e=p,n=function(n){var o,i,c,d,p,h;return a(this,(function(a){switch(a.label){case 0:o=new Date,i=void 0,c=void 0,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,m((function(){return t(e,n,l)}),l)];case 2:return i=a.sent(),[3,4];case 3:return d=a.sent(),c=d,u.failedAttempts.push({level:0,endpoint:e,error:d}),[3,4];case 4:if(i){if((p=r(i)).finish)return u.result=p.result,[2,"break"];u.failedAttempts.push({level:1,endpoint:e,error:p.error})}return(h=g(o,i,c))?[4,m(s(h[1].getTime()-Date.now()),l)]:[3,6];case 5:return a.sent(),e=h[0],[3,7];case 6:return[2,"break"];case 7:return[2]}}))},i=0,c.label=1;case 1:return i<o?[5,n(i)]:[3,4];case 2:if("break"===c.sent())return[3,4];c.label=3;case 3:return++i,[3,1];case 4:return[2]}}))}))],Promise.race(c.filter((function(e){return!!e})))).then((function(){return u}));return{then:h.then.bind(h),current:u}}t.ERROR_CLIENT_TIMEOUT="Client timeout",t.ERROR_NETWORK_CONNECTION="Network connection error",t.ERROR_NETWORK_ABORT="Network request aborted",t.ERROR_BAD_RESPONSE_FORMAT="Response cannot be parsed",t.ERROR_CSP_BLOCK="Blocked by CSP";var ke=/\(([^(^\s^}]+):(\d)+:(\d)+\)/i,Ue=/@([^(^\s^}]+):(\d)+:(\d)+/i;function je(e){for(var t,r=e.modules,n=e.components,a=e.customComponent,o=e.apiKey,i=e.tls,s=e.tag,l=e.extendedResult,c=e.exposeComponents,u=e.linkedId,d=e.algorithm,p=e.imi,m=e.storageKey,g=e.products,h=((t={}).c=o,t.t=(function(e){return e&&"object"==typeof e?e:null!=e?{tag:e}:void 0})(s),t.cbd=l?1:void 0,t.lid=u,t.a=d,t.m=p.m,t.l=p.l,t.ec=c?1:void 0,t.mo=r.map((function(e){return e.key})),t.pr=g,t.s56=i,t.s67=a?{s:0,v:a}:{s:-1,v:null},t.sc=(function(){var e,t=(function(){var e,t=new Error,r=(e=t).fileName?e.fileName.split(" ")[0]:e.sourceURL?e.sourceURL:null;if(r)return r;if(t.stack){var n=(function(e){var t=e.split("\n"),r=t[0],n=t[1],a=ke.exec(n)||Ue.exec(r);return a?a[1]:void 0})(t.stack);if(n)return n}return null})();return(e={}).u=t?y(t,1e3):null,e})(),t),f=0,_=r;f<_.length;f++)for(var v=Ve(_[f],n,m),E=0,S=Object.keys(v);E<S.length;E++){var b=S[E];h[b]=v[b]}return h}function Ve(e,t,r){var n=e.sources,a=e.toRequest,o={};for(var i in n)if(_(n,i)){var s=n[i];if(s)for(var l in s)_(s,l)&&s[l]&&(o[l]=t[l])}return a(o,r)}var Be=R("WrongRegion"),We=R("SubscriptionNotActive"),He=R("UnsupportedVersion"),Xe=R("InstallationMethodRestricted"),qe=R("HostnameRestricted"),Ye=R("IntegrationFailed");function ze(e){var t;try{t=JSON.parse(I(e.body))}catch(e){}return r(r({},e),{bodyData:t})}function Ke(e,t,n,a){var o=a.bodyData;return void 0===o?nt(a):(function(e){return e instanceof Object&&"2"===e.v&&e.products instanceof Object})(o)?(function(e,t,n,a){var o,i=e.notifications,s=e.requestId,l=e.error,c=e.products,u=(function(e){var t=[];for(var r in e)if(_(e,r)){var n=e[r];n&&t.push(n)}return t})(c);tt(i);for(var d=0,p=u;d<p.length;d++)tt(p[d].notifications);if(l)return Je(l,s,n);for(var m=0,g=u;m<g.length;m++){var h=g[m].error;if(h)return Je(h,s,n)}!(function(e,t,r){for(var n,a=0,o=t;a<o.length;a++){var i=o[a];null===(n=i.onResponse)||void 0===n||n.call(i,e,r)}})(e,t,a);var f=null===(o=c.identification)||void 0===o?void 0:o.data;return{finish:!0,result:f?r({requestId:s},f.result):Qe(s,n)}})(o,e,t,n):nt(a)}function Je(e,t,r){switch(e.code){case"NotAvailableForCrawlBots":return $e(t,!0,r);case"NotAvailableWithoutUA":return $e(t,void 0,r);default:return{finish:!1,error:et(Ze(e),t,e)}}}function Ze(e){var t,r=e.code,n=e.message;return void 0===r?n:null!==(t=(function(e){switch(e){case"TokenRequired":return"API key required";case"TokenNotFound":return"API key not found";case"TokenExpired":return"API key expired";case"RequestCannotBeParsed":return"Request cannot be parsed";case"Failed":return"Request failed";case"RequestTimeout":return"Request failed to process";case"TooManyRequests":return"Too many requests, rate limit exceeded";case"OriginNotAvailable":return"Not available for this origin";case"HeaderRestricted":return"Not available with restricted header";case"NotAvailableForCrawlBots":return"Not available for crawl bots";case"NotAvailableWithoutUA":return"Not available when User-Agent is unspecified"}})(r))&&void 0!==t?t:R(r)}function Qe(e,t){var n={requestId:e,visitorFound:!1,visitorId:"",confidence:{score:.5,comment:"The real score is unknown"}};if(!t)return n;var a="n/a";return r(r({},n),{incognito:!1,browserName:a,browserVersion:a,device:a,ip:a,os:a,osVersion:a,firstSeenAt:{subscription:null,global:null},lastSeenAt:{subscription:null,global:null}})}function $e(e,t,n){return{finish:!0,result:r(r({},Qe(e,n)),{bot:r({probability:1},void 0===t?void 0:{safe:t})})}}function et(e,t,r){var n=new Error(e);return void 0!==t&&(n.requestId=t),void 0!==r&&(n.raw=r),n}function tt(e){null==e||e.forEach(rt)}function rt(e){var t=e.level,r=e.message;"error"===t?console.error(r):"warning"===t?console.warn(r):console.log(r)}function nt(e){return{finish:!1,error:et("Response cannot be parsed",void 0,{httpStatusCode:e.status,bodyBase64:w(e.body)})}}function at(e,t,r){var n=function(){throw new Error("Invalid data")},a=f(e);a.length<t.length+2&&n();for(var o=0;o<t.length;++o)O(a[1+o],a[0])!==t[o]&&n();var i=1+t.length,s=O(a[i],a[0]);a.length<i+1+s+r&&n();var l=i+1+s,c=l+r,u=new ArrayBuffer(a.length-c),d=new Uint8Array(u);for(o=0;o<d.length;++o)d[o]=a[c+o]^a[l+o%r];return u}function ot(e,t){return JSON.parse(I(at(new Uint32Array(e),[],t)))}function it(e,t){for(var r in e)if(L(r)==t)return r;return""}t.ERROR_WRONG_REGION=Be,t.ERROR_SUBSCRIPTION_NOT_ACTIVE=We,t.ERROR_UNSUPPORTED_VERSION=He,t.ERROR_INSTALLATION_METHOD_RESTRICTED=Xe,t.ERROR_FORBIDDEN_ENDPOINT=qe,t.ERROR_INTEGRATION_FAILURE=Ye;var st=[3,7],lt=[3,10];function ct(e,t){return(function(e,t,r,n,a){void 0===a&&(a=P);var o=a()%4,i=f(e),s=1+t.length+1+o+7+i.length,l=new ArrayBuffer(s),c=new Uint8Array(l),u=0,d=a();c[u++]=d;for(var p=0,m=t;p<m.length;p++){var g=m[p];c[u++]=d+g}c[u++]=d+o;for(var h=0;h<o;++h)c[u++]=a();var _=new Uint8Array(7);for(h=0;h<7;++h)_[h]=a(),c[u++]=_[h];for(h=0;h<i.length;++h)c[u++]=i[h]^_[h%7];return l})(e,t?lt:st)}function ut(e,t){return n(this,void 0,void 0,(function(){var r;return a(this,(function(n){switch(n.label){case 0:return t?(r=ct,[4,t(e)]):[3,2];case 1:return[2,r.apply(void 0,[n.sent(),!0])];case 2:return[2,ct(e,!1)]}}))}))}function dt(e){var t=e.body,o=e.compress,i=(function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r})(e,["body","compress"]);return n(this,void 0,void 0,(function(){var e,n,s,l,c,u;return a(this,(function(a){switch(a.label){case 0:return n=k,s=[r({},i)],u={},[4,ut(t,o)];case 1:return[4,n.apply(void 0,[r.apply(void 0,s.concat([(u.body=a.sent(),u.responseFormat="binary",u)]))])];case 2:e=a.sent(),l=e.body,c=!1;try{l=at(l,st,7),c=!0}catch(e){}return[2,r(r({},e),{body:l,wasSecret:c})]}}))}))}function pt(e,t,r,o,i){return n(this,void 0,void 0,(function(){var s,l,c,u,d=this;return a(this,(function(p){switch(p.label){case 0:if(0===(s=(function(e,t,r){return(Array.isArray(e)?e:[e]).map((function(e){return(function(e,t){var r=encodeURIComponent,n=t.map((function(e){return"&ii=".concat(e.split("/").map(r).join("/"))})).join("");return"".concat(e).concat(-1===e.indexOf("?")?"?":"&","ci=js/").concat(r("3.8.7")).concat(n)})((function(e){return!!e&&e.default===G.default})(e)?(function(e){var t="api.fpjs.io";return"us"!==e&&(t="".concat(e,".").concat(t)),"https://".concat(t)})(t):String(e),r)}))})(e,t,r.integrations)).length)throw new TypeError("The list of endpoints is empty");return l=je(r),c=b(JSON.stringify(l)),u=(function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(n.compress)return n.compress}})(r.modules),[4,F(i,(function(){return{e:15,body:l,isCompressed:!!u}}),(function(e){return{e:16,result:e}}),(function(e){return{e:17,error:e}}),(function(){return n(d,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,xe(s,mt.bind(null,c,u,i),Ke.bind(null,r.modules,!!r.extendedResult,r.storageKey),1/0,o)];case 1:return[2,gt(e.sent())]}}))}))}))];case 1:return[2,p.sent()]}}))}))}function mt(e,t,r,o,i,s){var l=this;return F(r,(function(){return{e:18,tryNumber:i,url:o}}),(function(e){var t=e.status,r=e.getHeader,n=e.body,a=e.bodyData,o=e.wasSecret;return{e:19,tryNumber:i,status:t,retryAfter:r("retry-after"),body:null!=a?a:n,wasSecret:o}}),(function(e){return{e:20,tryNumber:i,error:e}}),(function(){return n(l,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return[4,dt({url:o,method:"post",headers:{"Content-Type":"text/plain"},body:e,compress:t,withCredentials:!0,abort:s})];case 1:return[2,ze(r.sent())]}}))}))}))}function gt(e){var t=e.result,r=e.failedAttempts,n=e.aborted;if(t)return t;var a=r[r.length-1];if(!a)throw n&&!n.resolve?n.error:new Error("aborted");var o=a.level,i=a.error;if(0===o&&i instanceof Error){switch(i.name){case"CSPError":throw new Error("Blocked by CSP");case"AbortError":throw new Error("Network request aborted")}throw new Error("Network connection error")}throw i}function ht(e,t){if(t)for(var r in t)_(t,r)&&(e[r]=t[r])}function ft(e,t,o){var i=this,s=r(r({},o),{cache:{}}),l=(function(e){for(var t={},r={},n={},a=0,o=e;a<o.length;a++){var i=o[a].sources;ht(t,i.stage1),ht(r,i.stage2),ht(n,i.stage3)}var s=r;return ht(s,n),[t,s]})(e),c=l[0],u=l[1],d=ae(c,s,[]),p=(function(e){return void 0===e&&(e=50),(function(e,t){void 0===t&&(t=1/0);var r=window.requestIdleCallback;return r?new Promise((function(e){return r.call(window,(function(){return e()}),{timeout:t})})):V(Math.min(e,t))})(e,2*e)})(t).then((function(){return ae(u,s,[])}));return g(p),function(){return n(i,void 0,void 0,(function(){var e,t,r,n,o;return a(this,(function(a){switch(a.label){case 0:return[4,Promise.all([d(),p.then((function(e){return e()}))])];case 1:for(o in e=a.sent(),t=e[0],r=e[1],n=r,t)_(t,o)&&(n[o]=t[o]);return[2,n]}}))}))}}function _t(e,t,o,i,s,l,c,u,p,m,g){var h=this,f=function(t,r){var o=t.timeout,g=void 0===o?1e4:o,f=t.tag,E=t.linkedId,S=t.disableTls,b=t.extendedResult,I=t.exposeComponents,T=t.environment,y=t.products;return n(h,void 0,void 0,(function(){var t,n,o,h;return a(this,(function(a){switch(a.label){case 0:return t=d(g).then((function(){return Promise.reject(new Error("Client timeout"))})),[4,Promise.race([t,Promise.all([v(r),_(g,S,r)])])];case 1:return n=a.sent(),o=n[0],h=n[1],[4,pt(l,s,{modules:e,apiKey:i,components:o,customComponent:T,tag:f,tls:h,linkedId:N(E),extendedResult:b,exposeComponents:I,algorithm:c,integrations:p,imi:m,storageKey:u,products:A(y,"products")},t,r)];case 2:return[2,a.sent()]}}))}))},_=function(e,t,r){return null==o?void 0:o(.1*e,.4*e,t,r)},v=function(e){return n(h,void 0,void 0,(function(){var r,n;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,t()];case 1:return r=a.sent(),D(e,(function(){return{e:13,result:r}})),[2,r];case 2:throw n=a.sent(),D(e,(function(){return{e:14,error:n}})),n;case 3:return[2]}}))}))};return{get:function(e){void 0===e&&(e={});var t=g&&(function(e,t){return function(n){return e(r(r({},n),{getCallId:t}))}})(g,C(8));return F(t,(function(){return{e:3,options:e}}),(function(e){return{e:4,result:e}}),(function(e){return{e:5,error:e}}),(function(){return f(e,t)}))}}}var vt=function(e){var t,n=(function(e){var t=e.filter((function(e){return!!e}));return t.length?function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=function(t){p((function(){return t.apply(void 0,e)}))},a=0,o=t;a<o.length;a++){var i=o[a];n(i)}}:void 0})([null==e?void 0:e.debug,(t=/{(.*?)}/.exec(location.hash),!!t&&1915004642===L(t[1])&&x())]),a=n&&(function(e,t){return function(n){return e(r(r({},n),{agentId:t}))}})(n,C(8));return F(a,(function(){return{e:0,version:"3.8.7",options:e}}),(function(){return{e:1}}),(function(e){return{e:2,error:e}}),(function(){var t,r,n=e.token,o=e.apiKey,i=void 0===o?n:o,s=e.region,l=void 0===s?"us":s,c=e.tlsEndpoint,u=void 0===c?M:c,d=e.disableTls,p=e.storageKey,m=void 0===p?"_vid":p,g=e.endpoint,h=void 0===g?G:g,f=e.delayFallback,_=e.integrationInfo,v=void 0===_?[]:_,E=e.algorithm,S=e.imi,b=void 0===S?((t={}).m="s",t):S,I=e.modules;if(!i||"string"!=typeof i)throw new Error("API key required");var T=null===(r=(function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(n.tls)return n.tls}})(I))||void 0===r?void 0:r(u,l,d,void 0,a);return D(a,(function(){return{e:12}})),_t(I,ft(I,f,{storageKeyPrefix:m}),T,i,l,h,N(E),m,v,b,a)}))};function Et(e){return{e:St(e)}}function St(e){var t;try{t="".concat(e.message),"name"in e&&(t="".concat(e.name,": ").concat(t))}catch(e){t="Code 3017: ".concat(e)}return y(t,500)}function bt(e){return oe(e,(function(e){return{s:0,v:e}}))}function It(e,t){return oe(e,(function(e){return{s:null==e?t:0,v:null!=e?e:null}}))}var Tt=bt((function(){return ge((function(e,t){var r=t.document,n=r.body;n.style.fontSize="48px";var a=r.createElement("div"),o={},i={},s=function(e){var t=r.createElement("span"),n=t.style;return n.position="absolute",n.top="0",n.left="0",n.fontFamily=e,t.textContent="mmMwWLliI0O&1",a.appendChild(t),t},l=Ee.map(s),c=(function(){for(var e={},t=function(t){e[t]=Ee.map((function(e){return(function(e,t){return s("'"+e+"',"+t)})(t,e)}))},r=0,n=Se;r<n.length;r++)t(n[r]);return e})();n.appendChild(a);for(var u=0;u<Ee.length;u++)o[Ee[u]]=l[u].offsetWidth,i[Ee[u]]=l[u].offsetHeight;return Se.filter((function(e){return t=c[e],Ee.some((function(e,r){return t[r].offsetWidth!==o[e]||t[r].offsetHeight!==i[e]}));var t}))}))})),yt=It((function(e){var t=(void 0===e?{}:e).debug;return n(this,void 0,void 0,(function(){var e,r,n,o,i;return a(this,(function(a){switch(a.label){case 0:return ce()||pe()?(s=atob,e={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",s("YVt0aXRsZT0iN25hZ2EgcG9rZXIiIGld"),'[title="ALIENBOLA" i]'],abpvn:["#quangcaomb",s("Lmlvc0Fkc2lvc0Fkcy1sYXlvdXQ="),".quangcao",s("W2hyZWZePSJodHRwczovL3I4OC52bi8iXQ=="),s("W2hyZWZePSJodHRwczovL3piZXQudm4vIl0=")],adBlockFinland:[".mainostila",s("LnNwb25zb3JpdA=="),".ylamainos",s("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",s("I2FkMl9pbmxpbmU=")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",s("LmhlYWRlci1ibG9ja2VkLWFk"),s("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:['amp-embed[type="zen"]',".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil"],adGuardBase:[".BetterJsPopOverlay",s("I2FkXzMwMFgyNTA="),s("I2Jhbm5lcmZsb2F0MjI="),s("I2FkLWJhbm5lcg=="),s("I2NhbXBhaWduLWJhbm5lcg==")],adGuardChinese:[s("LlppX2FkX2FfSA=="),s("YVtocmVmKj0iL29kMDA1LmNvbSJd"),s("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),".qq_nr_lad","#widget-quan"],adGuardFrench:[s("I2Jsb2NrLXZpZXdzLWFkcy1zaWRlYmFyLWJsb2NrLWJsb2Nr"),"#pavePub",s("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv"],adGuardGerman:[s("LmJhbm5lcml0ZW13ZXJidW5nX2hlYWRfMQ=="),s("LmJveHN0YXJ0d2VyYnVuZw=="),s("LndlcmJ1bmcz"),s("YVtocmVmXj0iaHR0cDovL3d3dy5laXMuZGUvaW5kZXgucGh0bWw/cmVmaWQ9Il0="),s("YVtocmVmXj0iaHR0cHM6Ly93d3cudGlwaWNvLmNvbS8/YWZmaWxpYXRlSWQ9Il0=")],adGuardJapanese:["#kauli_yad_1",s("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),s("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),s("LmFkZ29vZ2xl"),s("LmFkX3JlZ3VsYXIz")],adGuardMobile:[s("YW1wLWF1dG8tYWRz"),s("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",s("I2FkX2ludmlld19hcmVh")],adGuardRussian:[s("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),s("LnJlY2xhbWE="),'div[id^="smi2adblock"]',s("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),s("I2FkX3NxdWFyZQ==")],adGuardSocial:[s("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),s("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",s("W2hyZWZePSJodHRwOi8vYWRzLmdsaXNwYS5jb20vIl0=")],adGuardTrackingProtection:["#qoo-counter",s("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),s("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),s("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",s("I3Jla2xhbWk="),s("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),s("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),s("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[s("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers",s("I25ld0Fk")],easyList:[s("I0FEX0NPTlRST0xfMjg="),s("LnNlY29uZC1wb3N0LWFkcy13cmFwcGVy"),".universalboxADVBOX03",s("LmFkdmVydGlzZW1lbnQtNzI4eDkw"),s("LnNxdWFyZV9hZHM=")],easyListChina:[s("YVtocmVmKj0iLndlbnNpeHVldGFuZy5jb20vIl0="),s("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),s("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box"],easyListCookie:["#AdaCompliance.app-notice",".text-center.rgpd",".panel--cookie",".js-cookies-andromeda",".elxtr-consent"],easyListCzechSlovak:["#onlajny-stickers",s("I3Jla2xhbW5pLWJveA=="),s("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",s("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[s("I2FkdmVydGVudGll"),s("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",s("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:[s("I0FkX1dpbjJkYXk="),s("I3dlcmJ1bmdzYm94MzAw"),s("YVtocmVmXj0iaHR0cDovL3d3dy5yb3RsaWNodGthcnRlaS5jb20vP3NjPSJd"),s("I3dlcmJ1bmdfd2lkZXNreXNjcmFwZXJfc2NyZWVu"),s("YVtocmVmXj0iaHR0cDovL2xhbmRpbmcucGFya3BsYXR6a2FydGVpLmNvbS8/YWc9Il0=")],easyListItaly:[s("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",s("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[s("LnJla2xhbW9zX3RhcnBhcw=="),s("LnJla2xhbW9zX251b3JvZG9z"),s("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),s("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),s("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[s("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#feedback-tab","#taboola-below-article",".feedburnerFeedBlock",".widget-feedburner-counter",'[title="Subscribe to our blog"]'],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:[".td-tags-and-social-wrapper-box",".twitterContainer",".youtube-social",'a[title^="Like us on Facebook"]','img[alt^="Share on Digg"]'],frellwitSwedish:[s("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),s("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",s("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[s("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),s("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),s("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",s("LmFkX19tYWlu"),s("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container",".cookie-msg-info-container","#cookies-policy-sticky"],icelandicAbp:[s("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[s("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),s("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[s("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),s("I2xpdmVyZUFkV3JhcHBlcg=="),s("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),s("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[s("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",s("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),s("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),s("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[s("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),s("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),s("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",s("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),s("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),s("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),s("ZGl2I3NrYXBpZWNfYWQ=")],ro:[s("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),'a[href^="/magazin/"]',s("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),s("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd")],ruAd:[s("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),s("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),s("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",s("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),s("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",s("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},r=Object.keys(e),[4,ye((i=[]).concat.apply(i,r.map((function(t){return e[t]}))))]):[2,void 0];case 1:return n=a.sent(),t&&(function(e,t){for(var r="DOM blockers debug:\n```",n=0,a=Object.keys(e);n<a.length;n++){var o=a[n];r+="\n"+o+":";for(var i=0,s=e[o];i<s.length;i++){var l=s[i];r+="\n  "+(t[l]?"🚫":"➡️")+" "+l}}console.log(r+"\n```")})(e,n),(o=r.filter((function(t){var r=e[t];return te(r.map((function(e){return n[e]})))>.6*r.length}))).sort(),[2,o]}var s}))}))}),-1),Ot=bt((function(){return(function(e,t){return void 0===t&&(t=4e3),ge((function(e,r){var n=r.document,a=n.body,i=a.style;i.width=t+"px",i.webkitTextSizeAdjust=i.textSizeAdjust="none",le()?a.style.zoom=""+1/r.devicePixelRatio:ce()&&(a.style.zoom="reset");var s=n.createElement("div");return s.textContent=o(Array(t/20<<0)).map((function(){return"word"})).join(" "),a.appendChild(s),(function(e,t){for(var r={},n={},a=0,o=Object.keys(Ge);a<o.length;a++){var i=o[a],s=Ge[i],l=s[0],c=void 0===l?{}:l,u=s[1],d=void 0===u?"mmMwWLliI0fiflO&1":u,p=e.createElement("span");p.textContent=d,p.style.whiteSpace="nowrap";for(var m=0,g=Object.keys(c);m<g.length;m++){var h=g[m],f=c[h];void 0!==f&&(p.style[h]=f)}r[i]=p,t.appendChild(e.createElement("br")),t.appendChild(p)}for(var _=0,v=Object.keys(Ge);_<v.length;_++)n[i=v[_]]=r[i].getBoundingClientRect().width;return n})(n,a)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')})()})),wt=oe((function(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(ce()&&!ue()&&!(function(){var e=window;return te(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3})())return-1;var r=new t(1,5e3,44100),n=r.createOscillator();n.type="triangle",n.frequency.value=1e4;var a=r.createDynamicsCompressor();a.threshold.value=-50,a.knee.value=40,a.ratio.value=12,a.attack.value=0,a.release.value=.25,n.connect(a),a.connect(r.destination),n.start(0);var o=(function(e){var t=function(){};return[new Promise((function(r,n){var a=!1,o=0,i=0;e.oncomplete=function(e){return r(e.renderedBuffer)};var s=function(){setTimeout((function(){return n(me("timeout"))}),Math.min(500,i+5e3-Date.now()))},l=function(){try{switch(e.startRendering(),e.state){case"running":i=Date.now(),a&&s();break;case"suspended":document.hidden||o++,a&&o>=3?n(me("suspended")):setTimeout(l,500)}}catch(e){n(e)}};l(),t=function(){a||(a=!0,i>0&&s())}})),t]})(r),i=o[0],s=o[1],l=i.then((function(e){return(function(e){for(var t=0,r=0;r<e.length;++r)t+=Math.abs(e[r]);return t})(e.getChannelData(0).subarray(4500))}),(function(e){if("timeout"===e.name||"suspended"===e.name)return-3;throw e}));return X(l),function(){return s(),l}}),(function(e){return-1===e||-2===e||-3===e?{s:e,v:null}:{s:0,v:e}})),Rt=oe((function(){var e=this;return(function(){if(void 0===ve){var e=function(){var t=Ie();Te(t)?ve=setTimeout(e,2500):(_e=t,ve=void 0)};e()}})(),function(){return n(e,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return Te(e=Ie())?_e?[2,o(_e)]:(function(){var e=document;return e.fullscreenElement||e.msFullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||null})()?[4,(r=document,(r.exitFullscreen||r.msExitFullscreen||r.mozCancelFullScreen||r.webkitExitFullscreen).call(r))]:[3,2]:[3,2];case 1:t.sent(),e=Ie(),t.label=2;case 2:return Te(e)||(_e=e),[2,e]}var r}))}))}}),(function(e){return{s:0,v:e.map((function(e){return null===e?-1:e}))}})),Lt=It((function(){return navigator.oscpu}),-1),Nt=bt((function(){var e,t=navigator,r=[],n=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(void 0!==n&&r.push([n]),Array.isArray(t.languages))le()&&te([!("MediaSettingsRange"in(e=window)),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3||r.push(t.languages);else if("string"==typeof t.languages){var a=t.languages;a&&r.push(a.split(","))}return r})),At=bt((function(){return window.screen.colorDepth})),Ct=It((function(){return ee($(navigator.deviceMemory),void 0)}),-1),Pt=oe((function(){var e=screen,t=function(e){return ee(Q(e),null)},r=[t(e.width),t(e.height)];return r.sort().reverse(),r}),(function(e){return{s:0,v:e.map((function(e){return null===e?-1:e}))}})),Gt=It((function(){return ee(Q(navigator.hardwareConcurrency),void 0)}),-1),Mt=bt((function(){var e,t=null===(e=window.Intl)||void 0===e?void 0:e.DateTimeFormat;if(t){var r=(new t).resolvedOptions().timeZone;if(r)return r}var n,a=(n=(new Date).getFullYear(),-Math.max($(new Date(n,0,1).getTimezoneOffset()),$(new Date(n,6,1).getTimezoneOffset())));return"UTC"+(a>=0?"+":"")+Math.abs(a)})),Dt=bt((function(){try{return!!window.sessionStorage}catch(e){return!0}})),Ft=bt((function(){try{return!!window.localStorage}catch(e){return!0}})),xt=It((function(){if(!ie()&&!se())try{return!!window.indexedDB}catch(e){return!0}}),-1),kt=bt((function(){return!!window.openDatabase})),Ut=It((function(){return navigator.cpuClass}),-1),jt=bt((function(){var e=navigator.platform;return"MacIntel"===e&&ce()&&!ue()?(function(){if("iPad"===navigator.platform)return!0;var e=screen,t=e.width/e.height;return te(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2})()?"iPad":"iPhone":e})),Vt=It((function(){var e=navigator.plugins;if(e){for(var t=[],r=0;r<e.length;++r){var n=e[r];if(n){for(var a=[],o=0;o<n.length;++o){var i=n[o];a.push({type:i.type,suffixes:i.suffixes})}t.push({name:n.name,description:n.description,mimeTypes:a})}}return t}}),-1),Bt=oe((function(){var e,t,r=!1,n=(function(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]})(),a=n[0],o=n[1];if((function(e,t){return!(!t||!e.toDataURL)})(a,o)){r=(function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")})(o),(function(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var r="Cwm fjordbank gly "+String.fromCharCode(55357,56835);t.fillText(r,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(r,4,45)})(a,o);var i=be(a);i!==be(a)?e=t="unstable":(t=i,(function(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var r=0,n=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];r<n.length;r++){var a=n[r],o=a[0],i=a[1],s=a[2];t.fillStyle=o,t.beginPath(),t.arc(i,s,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")})(a,o),e=be(a))}else e=t="";return{winding:r,geometry:e,text:t}}),(function(e){var t=e.geometry,n=e.text,a=""===t?-1:"unstable"===t?-2:0;return{s:a,v:r(r({},e),{geometry:0===a?Me(t):"",text:0===a?Me(n):""})}})),Wt=bt((function(){var e,t=navigator,r=0;void 0!==t.maxTouchPoints?r=Q(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(r=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return{maxTouchPoints:r,touchEvent:e,touchStart:"ontouchstart"in window}})),Ht=bt((function(){return navigator.vendor||""})),Xt=bt((function(){for(var e=[],t=0,r=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<r.length;t++){var n=r[t],a=window[n];a&&"object"==typeof a&&e.push(n)}return e.sort()})),qt=bt((function(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var t=-1!==e.cookie.indexOf("cookietest=");return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(e){return!1}})),Yt=It((function(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var r=t[e];if(matchMedia("(color-gamut: "+r+")").matches)return r}}),-1),zt=It((function(){return!!we("inverted")||!we("none")&&void 0}),-1),Kt=It((function(){return!!Re("active")||!Re("none")&&void 0}),-1),Jt=It((function(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=100;++e)if(matchMedia("(max-monochrome: "+e+")").matches)return e;throw new Error("Too high value")}}),-1),Zt=It((function(){return Le("no-preference")?0:Le("high")||Le("more")?1:Le("low")||Le("less")?-1:Le("forced")?10:void 0}),-1),Qt=It((function(){return!!Ne("reduce")||!Ne("no-preference")&&void 0}),-1),$t=It((function(){return!!Ae("high")||!Ae("standard")&&void 0}),-1),er=oe((function(){var e,t=Ce.acos||Pe,r=Ce.acosh||Pe,n=Ce.asin||Pe,a=Ce.asinh||Pe,o=Ce.atanh||Pe,i=Ce.atan||Pe,s=Ce.sin||Pe,l=Ce.sinh||Pe,c=Ce.cos||Pe,u=Ce.cosh||Pe,d=Ce.tan||Pe,p=Ce.tanh||Pe,m=Ce.exp||Pe,g=Ce.expm1||Pe,h=Ce.log1p||Pe;return{acos:t(.12312423423423424),acosh:r(1e308),acoshPf:(e=1e154,Ce.log(e+Ce.sqrt(1e308))),asin:n(.12312423423423424),asinh:a(1),asinhPf:Ce.log(1+Ce.sqrt(2)),atanh:o(.5),atanhPf:Ce.log(3)/2,atan:i(.5),sin:s(-1e300),sinh:l(1),sinhPf:Ce.exp(1)-1/Ce.exp(1)/2,cos:c(10.000000000123),cosh:u(1),coshPf:(Ce.exp(1)+1/Ce.exp(1))/2,tan:d(-1e300),tanh:p(1),tanhPf:(Ce.exp(2)-1)/(Ce.exp(2)+1),exp:m(1),expm1:g(1),expm1Pf:Ce.exp(1)-1,log1p:h(10),log1pPf:Ce.log(11),powPI:Ce.pow(Ce.PI,-100)}}),(function(e){return{s:0,v:Me(Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join(","))}})),tr=bt(ie),rr=bt(se),nr=bt(le),ar=bt(ce),or=bt(ue),ir=bt(de),sr=bt(pe),lr=bt(Fe);function cr(){var e,t,r=ur();return(null===(t=null===(e=window[r[0]])||void 0===e?void 0:e[r[1]])||void 0===t?void 0:t[r[2]])||1073741824}function ur(){return ot([1238629110,448276002,3812774028,808844344,1040086494,3917076003,2006609522,3391962601,1618783843,902064594,3846817827,1945380650,2587245025,908308022,938305751,2922813991,1910122279,3709215973,809499767,66414809,3983071030,916072247,3711377838,822474088,300514777,4182498348,953759295,3408360096,591258990,229539788],5)}function dr(){var e=window.openDatabase,t=window.localStorage;try{e(null,null,null,null)}catch(e){return!0}try{return t.setItem("test","1"),t.removeItem("test"),!1}catch(e){return!0}}var pr=[[function(){return le()},function(){return T(["ClipboardItem"in(e=window),"PerformanceEventTiming"in e,"RTCSctpTransport"in e])>=2?(function(){return n(this,void 0,void 0,(function(){var e,t,r,n,o;return a(this,(function(a){switch(a.label){case 0:return e=ur(),t=navigator,r=t[e[3]],(n=t[e[4]])?[4,Promise.race([s(250,void 0),new Promise((function(t){n[e[5]]((function(e,r){return t(r)}))}))])]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return(null==r?void 0:r[e[6]])?[4,r[e[6]]().then((function(e){return e.quota}))]:[3,4];case 3:o=a.sent(),a.label=4;case 4:return o?[2,o<cr()]:[2,!1]}}))}))})():(function(){return n(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return(e=window.webkitRequestFileSystem)?[4,new Promise((function(t){e(0,1,(function(){return t(!1)}),(function(){return t(!0)}))}))]:[2,!1];case 1:return[2,t.sent()]}}))}))})();var e}],[function(){return ce()},function(){return n(this,void 0,void 0,(function(){return a(this,(function(e){return De()?[2,Promise.race([s(250,!1),new Promise((function(e,t){var r=ot([3809292848,960907618,755773291,573315619,1315179302,739387755,1684357160,305342221,755184686,590089251,1075981318,989946981,591201059,120335149,1026634282,1680609321,56898126,864828,591069480,371731471,991329387,1781794611,372455744,188770923,321588522,1110770992,1762079784,1715277096,1110584347,957494074,591204393,1080716038,973941290,1684357155,120204294,673588029,657130290,1063529489],3),n=window[r[0]];n||e(!1);var a="".concat(C(16));try{n[r[1]](a,1)[r[2]]=function(o){var i=o.target.result;try{i[r[3]]("-",r[4])[r[5]](new Blob),e(!1)}catch(n){n instanceof Error&&new RegExp(r[6]).test(n.message)&&e(!0),t(n)}finally{i[r[7]](),n[r[8]](a)}}}catch(r){r instanceof Error&&"SecurityError"===r.name&&e(!1),t(r)}}))])]:[2,dr()]}))}))}],[function(){return de()},function(){return new Promise((function(e){try{var t=indexedDB.open("test");t.onerror=function(){return e(!0)},t.onsuccess=function(){return e(!1)}}catch(t){return e(!0)}}))}],[function(){return ie()||se()},function(){try{if(!window.indexedDB)return!0}catch(e){return!0}return!1}]];function mr(){return n(this,void 0,void 0,(function(){var e,t,r,n,o;return a(this,(function(a){switch(a.label){case 0:e=0,t=pr,a.label=1;case 1:return e<t.length?(r=t[e],n=r[0],o=r[1],n()?[4,o()]:[3,3]):[3,4];case 2:return[2,a.sent()];case 3:return e++,[3,1];case 4:return[2,!1]}}))}))}function gr(e){var t=e.storageKeyPrefix;return n(this,void 0,void 0,(function(){var e,r,n;return a(this,(function(a){switch(a.label){case 0:return e="".concat(t,"_i"),void 0!==(r=(function(e){try{var t=localStorage.getItem(e);if(!t)return;return"1"===t}catch(e){return}})(e))?[2,{s:0,v:r}]:[4,mr()];case 1:return n=a.sent(),(function(e,t){try{localStorage.setItem(e,t?"1":"0")}catch(e){}})(e,n),[2,{s:0,v:n}]}}))}))}function hr(){var e=window;if(!le())return fr(!1);try{if([66,114,97,118,101].map((function(e){return String.fromCharCode(e)})).join("")in e)return fr(!0);var t=document.createElement("canvas");t.width=4,t.height=4,t.style.display="inline";var r=t.toDataURL();if(""===r)return fr(!0);for(var n=window.atob(r.split(",")[1]),a=n.length,o=new Uint8Array(a),i=0;i<a;i++)o[i]=n.charCodeAt(i);var s=S(o,[73,68,65,84,24]);if(-1===s)return fr(!1);var l=S(o,[73,69,78,68]);return fr(-1!==l&&1321!==o.slice(s+5,l).reduce((function(e,t){return e+t}),0))}catch(e){return fr(!1)}}function fr(e){return{s:0,v:e}}function _r(){return n(this,void 0,void 0,(function(){var e,t;return a(this,(function(r){switch(r.label){case 0:return e=[],[4,h(d(2e3,-4),vr.bind(null,(function(t){return e.push(t)})))];case 1:return t=r.sent(),[2,function(){var r=t();return 0===r||-4===r?{s:r,v:i([],e,!0)}:{s:r,v:null}}]}}))}))}function vr(e){return n(this,void 0,void 0,(function(){var t,r,n;return a(this,(function(a){switch(a.label){case 0:if(t=window,!(r=t.RTCPeerConnection||t.webkitRTCPeerConnection))return[2,-3];try{n=new r({iceServers:ot([1116284708,2807606666,1856165634,1993636598,3410021538,3195192872,1656883084,2598385300,3564798284,1087152758,1841329857,3355624888,3127755894,1804885912,4294258839],7).map((function(e){return{urls:"stun:".concat(e)}}))})}catch(e){if(e instanceof Error&&"NotSupportedError"===e.name)return[2,-6];throw e}a.label=1;case 1:return a.trys.push([1,,3,4]),[4,new Promise((function(t,r){var a,o=!1;n.onicecandidate=function(r){var n=r.candidate;if(!n)return t(0);var a=n.candidate;a&&(e(a),!o&&/ typ [sp]rflx /.test(a)&&(o=!0,u(t,10,0)))},n.onicegatheringstatechange=function(){"complete"===n.iceGatheringState&&t(0)};try{null===(a=n.createDataChannel)||void 0===a||a.call(n,"test")}catch(e){return void(e instanceof Error&&"NotSupportedError"===e.name?t(-7):r(e))}var i=(function(e,t){try{return e.createOffer(t)}catch(r){if(r instanceof Error&&/\bcreateOffer\b.*(\bcallback\b.*\bnot a function\b|\barguments required\b.*\bpresent\b)/i.test(r.message))return new Promise((function(r,n){e.createOffer(r,n,t)}));throw r}})(n,se()?{offerToReceiveAudio:!0}:void 0);void 0===i?t(-8):i.then((function(e){return n.setLocalDescription(e)}),r)}))];case 2:return[2,a.sent()];case 3:try{n.close()}catch(e){}return[7];case 4:return[2]}}))}))}function Er(){return n(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:if("function"!=typeof(e=window.ApplePaySession))return[2,{s:-1,v:null}];t.label=1;case 1:return t.trys.push([1,4,,5]),e.canMakePayments()?ce()&&!De()?[2,{s:0,v:1}]:[4,new Promise((function(e){return setTimeout(e,0)}))]:[2,{s:0,v:0}];case 2:return t.sent(),[4,Promise.race([e.canMakePaymentsWithActiveCard(""),d(100,!1)])];case 3:return[2,{s:0,v:t.sent()?3:2}];case 4:return[2,Sr(t.sent())];case 5:return[2]}}))}))}function Sr(e){if(e instanceof Error){if("InvalidAccessError"===e.name){if(/\bfrom\b.*\binsecure\b/i.test(e.message))return{s:-2,v:null};if(/\bdifferent\b.*\borigin\b.*top.level\b.*\bframe\b/i.test(e.message))return{s:-3,v:null}}if("SecurityError"===e.name&&/\bthird.party iframes?.*\bnot.allowed\b/i.test(e.message))return{s:-3,v:null}}throw e}function br(){return Ir("dark")?{s:0,v:!0}:Ir("light")?{s:0,v:!1}:{s:-1,v:null}}function Ir(e){return matchMedia("(prefers-color-scheme: ".concat(e,")")).matches}function Tr(){var e=Date.now();return{s:0,v:[yr(e),yr(e-6e4*(new Date).getTimezoneOffset())]}}function yr(e){var t=Number(e);return isNaN(t)?-1:t}function Or(){var e=window.performance;if(!(null==e?void 0:e.now))return{s:-1,v:null};for(var t=1,r=1,n=e.now(),a=n,o=0;o<5e4;o++)if((n=a)<(a=e.now())){var i=a-n;i>t?i<r&&(r=i):i<t&&(r=t,t=i)}return{s:0,v:[t,r]}}function wr(){var e,t,r=null===(t=null===(e=window.performance)||void 0===e?void 0:e.memory)||void 0===t?void 0:t.jsHeapSizeLimit;return null==r?{s:-1,v:null}:{s:0,v:r}}var Rr=["MAX_TEXTURE_MAX_ANISOTROPY_EXT","FRAGMENT_SHADER_DERIVATIVE_HINT_OES","MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL","DRAW_BUFFER0_WEBGL","DRAW_BUFFER1_WEBGL","VERTEX_ARRAY_BINDING_OES","TIMESTAMP_EXT","GPU_DISJOINT_EXT","MAX_VIEWS_OVR"],Lr=[10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32926,32928,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938],Nr=[32926,32928],Ar=["FRAGMENT_SHADER","VERTEX_SHADER"],Cr=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"];function Pr(e,t,r){var n=e.getShaderPrecisionFormat(e[t],e[r]);return n?[n.rangeMin,n.rangeMax,n.precision]:[]}function Gr(e){return"string"==typeof e&&!e.match(/[^A-Z0-9_x]/)}function Mr(e){return Object.keys(e.__proto__).filter(Gr)}function Dr(e){if(e.webgl)return e.webgl.context;for(var t,r=document.createElement("canvas"),n=0,a=["webgl","experimental-webgl"];n<a.length;n++){var o=a[n];try{t=r.getContext(o)}catch(e){}if(t)break}return e.webgl={context:t},t}var Fr={s:-1,v:null};function xr(e){var t,r,n,a,o,i,s=Dr(e.cache);if(!s)return Fr;var l=jr()?null:s.getExtension("WEBGL_debug_renderer_info");return{s:0,v:{version:(null===(t=s.getParameter(s.VERSION))||void 0===t?void 0:t.toString())||"",vendor:(null===(r=s.getParameter(s.VENDOR))||void 0===r?void 0:r.toString())||"",vendorUnmasked:l?null===(n=s.getParameter(l.UNMASKED_VENDOR_WEBGL))||void 0===n?void 0:n.toString():"",renderer:(null===(a=s.getParameter(s.RENDERER))||void 0===a?void 0:a.toString())||"",rendererUnmasked:l?null===(o=s.getParameter(l.UNMASKED_RENDERER_WEBGL))||void 0===o?void 0:o.toString():"",shadingLanguageVersion:(null===(i=s.getParameter(s.SHADING_LANGUAGE_VERSION))||void 0===i?void 0:i.toString())||""}}}function kr(e){var t=Dr(e.cache);if(!t)return Fr;var r=t.getSupportedExtensions(),n=t.getContextAttributes(),a=[],o=[],i=[],s=[];for(var l in n)_(n,l)&&a.push("".concat(l,"=").concat(n[l]));for(var c=Mr(t),u=ie(),d=0,p=c;d<p.length;d++){var m=t[I=p[d]];if(Lr.indexOf(m)>-1){var g=u&&-1===Nr.indexOf(m)?t.getParameter(m):null;o.push("".concat(I,"(").concat(m,")=").concat(g))}else o.push("".concat(I,"=").concat(m))}if(r)for(var h=0,f=r;h<f.length;h++){var v=f[h],E="WEBGL_debug_renderer_info"===v&&jr()?null:t.getExtension(v);if(E)for(var S=0,b=Mr(E);S<b.length;S++){var I;m=E[I=b[S]],Rr.indexOf(I)>0?i.push("".concat(I,"(").concat(m,")=").concat(t.getParameter(m))):i.push("".concat(I,"=").concat(m))}}for(var T=0,y=Ar;T<y.length;T++)for(var O=y[T],w=0,R=Cr;w<R.length;w++){var L=R[w],N=Pr(t,O,L);s.push("".concat(O,".").concat(L,"=").concat(N.join(",")))}return i.sort(),o.sort(),{s:0,v:{contextAttributes:Me(a.join("&")),parameters:Me(o.join("&")),shaderPrecisions:Me(s.join("&")),extensions:Me(r?r.join(","):""),extensionParameters:Me(i.join(","))}}}function Ur(e){var t=Dr(e.cache);return t?((function(e){e.clearColor(0,0,1,1);var t=e.createProgram();if(t){a(0,"attribute vec2 p;uniform float t;void main(){float s=sin(t);float c=cos(t);gl_Position=vec4(p*mat2(c,s,-s,c),1,1);}"),a(1,"void main(){gl_FragColor=vec4(1,0,0,1);}"),e.linkProgram(t),e.useProgram(t),e.enableVertexAttribArray(0);var r=e.getUniformLocation(t,"t"),n=e.createBuffer();e.bindBuffer(34962,n),e.bufferData(34962,new Float32Array([0,1,-1,-1,1,-1]),35044),e.vertexAttribPointer(0,2,5126,!1,0,0),e.clear(16384),e.uniform1f(r,3.65),e.drawArrays(4,0,3)}function a(r,n){var a=e.createShader(35633-r);t&&a&&(e.shaderSource(a,n),e.compileShader(a),e.attachShader(t,a))}})(t),{s:0,v:Me(t.canvas.toDataURL())}):Fr}function jr(){return de()}function Vr(){var e=window.speechSynthesis;if("function"!=typeof(null==e?void 0:e.getVoices))return{s:-1,v:null};var t=function(){return e.getVoices()};return!e.addEventListener||de()&&Fe()?Br(t()):(function(e){return n(this,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,,2,3]),[4,new Promise((function(r,n){var a,o=function(){e.getVoices().length?(null==a||a(),a=l(r,50)):a||(a=u(r,600))};t=function(){try{o()}catch(e){n(e)}},o(),e.addEventListener("voiceschanged",t)}))];case 1:return[2,r.sent()];case 2:return t&&e.removeEventListener("voiceschanged",t),[7];case 3:return[2]}}))}))})(e).then((function(){return function(){var e=t();return e.length?Br(e):{s:-2,v:null}}}))}function Br(e){var t=function(e){return e.replace(/([,\\])/g,"\\$1")},r=e.map((function(e){return[t(e.voiceURI),t(e.name),t(e.lang),e.localService?"1":"0",e.default?"1":"0"].join(",")})).sort();return{s:e.length?0:1,v:Me(JSON.stringify(r))}}function Wr(){return{s:ce()&&!ue()?De()?0:1:2,v:[(typeof SourceBuffer).slice(0,3),(typeof SourceBufferList).slice(0,3)]}}var Hr={m:["$$s-macbook-pro","$$s-macbook-air","$$s-mac-mini"],i:["$$s-iphone"]},Xr={m:["macbook-pro-$$","macbook-air-$$","mac-mini-$$"],i:["iphone-$$"]},qr={us:["james","mary","john","patricia","robert","jennifer","michael","linda","william","elizabeth","david","barbara","richard","susan","joseph","jessica","thomas","sarah","charles","karen","christopher","nancy","daniel","lisa","matthew","margaret","anthony","betty","donald","sandra"],gb:["oliver","george","noah","arthur","harry","leo","muhammad","jack","charlie","oscar","jacob","henry","thomas","joshua","william","olivia","amelia","isla","ava","mia","isabella","sophia","grace","lily","freya","emily","ivy","ella","rosie","charlotte"],ru:["aleksandr","sergej","vladimir","elena","tatana","andrej","aleksej","olga","nikolaj","natala","anna","ivan","dmitrij","irina","maria","mihail","svetlana","ekaterina","evgenij","viktor","anastasia","urij","ulia","valentin","roman","igor","anatolij","oleg","pavel","maksim"]},Yr={m:["macbook-pro","macbook-air","mac-mini","mac-pro"],i:["iphone","iphone-2"]};function zr(e){return n(this,void 0,void 0,(function(){var t,r,o,i,s,l,c,d,p=this;return a(this,(function(m){switch(m.label){case 0:if(!(t=window.RTCPeerConnection))return[2,-5];r=Math.random().toString(),o=new Map,s="candidate:0 1 udp 2113937151 $ad $pt typ host generation 0 ufrag ".concat(i="ABCD"," network-cost 999"),l=new t({iceTransportPolicy:"all"}),c=l.createDataChannel(r),d=0,m.label=1;case 1:return m.trys.push([1,,3,4]),[4,new Promise((function(t,r){u((function(){return t(-4)}),1e3),l.oniceconnectionstatechange=function(){"checking"===l.iceConnectionState&&(d=setInterval((function(){return n(p,void 0,void 0,(function(){var e,r;return a(this,(function(n){switch(n.label){case 0:return"checking"!==l.iceConnectionState?[2,t([])]:[4,l.getStats()];case 1:return e=n.sent(),r=[],e.forEach((function(e){if("remote-candidate"===e.type){var t=o.get(e.port);r.push(t)}})),r.length>0&&t(r),[2]}}))}))}),30))},l.createOffer().then((function(r){var n=r.sdp;if(!n)return t(-5);for(var a=[],c=0;c<e.length;c++){var u=e[c],d=50003+c,p=s.replace("$ad",u).replace("$pt",d.toString());o.set(d,u),a.push("a=".concat(p))}var m={type:"answer",sdp:n.replace(/a=ice-ufrag:(.*?)\s{1,2}/,"a=ice-ufrag:".concat(i,"\r\n")).replace(/a=setup:(.*?)\s{1,2}/,"a=setup:active\r\n").replace(/c=IN IP4 ([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)/,(function(e,t){return"c=IN IP4 ".concat(t,"\r\nb=AS:30\r\n").concat(a.join("\r\n"))}))};return l.setLocalDescription(r),l.setRemoteDescription(m)}),r)}))];case 2:return[2,m.sent()];case 3:return c.close(),l.close(),clearInterval(d),[7];case 4:return[2]}}))}))}function Kr(e){return n(this,void 0,void 0,(function(){var t,r=this;return a(this,(function(o){switch(o.label){case 0:t=new AbortController,o.label=1;case 1:return o.trys.push([1,,3,4]),[4,Promise.race(i(i([],e.map((function(e){return n(r,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fetch("http".concat("http:"===location.protocol?"":"s","://").concat(e),{signal:t.signal})];case 1:case 2:return r.sent(),[3,3];case 3:return[2,{s:0,v:e}]}}))}))})),!0),[d(500,{s:-4,v:null})],!1))];case 2:return[2,o.sent()];case 3:return t.abort(),[7];case 4:return[2]}}))}))}function Jr(){for(var e=!ue(),t=navigator.language.toLowerCase(),n=(function(){var e={"en-us":r(r({},Hr),{n:qr.us}),"en-gb":r(r({},Hr),{n:qr.gb}),"ru-ru":r(r({},Xr),{n:qr.ru})};return e.default=e["en-us"],e.en=e["en-us"],e.ru=e["ru-ru"],e})(),a=n[t]||n[t.slice(0,2)]||n.default,o=e?a.i.slice():a.m.slice(),i=e?Yr.i.slice():Yr.m.slice(),s=0,l=e?a.n:a.n.slice(0,15);s<l.length;s++)for(var c=l[s],u=0,d=o;u<d.length;u++){var p=d[u];i.push(p.replace("$$",c))}return i.map((function(e){return e+".local"}))}function Zr(e){return n(this,void 0,void 0,(function(){var t,r;return a(this,(function(n){switch(n.label){case 0:return!ce()||(a=window,T(["mediaSession"in navigator,"BigInt64Array"in a,"FormDataEvent"in a,"ImageBitmap"in a,"WebGL2RenderingContext"in a,"onclose"in a])>=4)?[2,{s:-2,v:null}]:[4,zr(t=Jr())];case 1:return r=n.sent(),null==e||e(),"number"==typeof r?[2,{s:r,v:null}]:r.length===t.length?[2,{s:-3,v:null}]:r.length>1?[2,Kr(r)]:1===r.length?[2,{s:0,v:r[0]}]:[2,{s:-1,v:null}]}var a}))}))}function Qr(){var e,t,r,n=((r=new Promise((function(r,n){e=r,t=n}))).resolve=e,r.reject=t,r),a=d(ue()?310:410);return h(Promise.race([n,a]).then((function(e){if(void 0!==e)return d(e+100-Date.now())})).then((function(){return{s:-4,v:null}})),(function(){return Zr((function(){return n.resolve(Date.now())}))}))}var $r=["brands","mobile","platform","platformVersion","architecture","bitness","model","uaFullVersion","fullVersionList"];function en(){var e;return n(this,void 0,void 0,(function(){var t,r,o,i=this;return a(this,(function(s){switch(s.label){case 0:return(t=navigator.userAgentData)&&"object"==typeof t?(r={},o=[],"function"!=typeof t.getHighEntropyValues?[3,2]:[4,Promise.all($r.map((function(e){return n(i,void 0,void 0,(function(){var n,i;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,t.getHighEntropyValues([e])];case 1:return void 0!==(n=a.sent()[e])&&(r[e]="string"==typeof n?n:JSON.stringify(n)),[3,3];case 2:if(!((i=a.sent())instanceof Error&&"NotAllowedError"===i.name))throw i;return o.push(e),[3,3];case 3:return[2]}}))}))})))]):[2,{s:-1,v:null}];case 1:s.sent(),s.label=2;case 2:return[2,{s:0,v:{b:t.brands.map((function(e){return{b:e.brand,v:e.version}})),m:t.mobile,p:null!==(e=t.platform)&&void 0!==e?e:null,h:r,nah:o}}]}}))}))}function tn(){var e=document.createElement("a").attributionsourceid;return void 0===e?{s:-1,v:null}:{s:0,v:String(e)}}function rn(){return(function(e){for(var t,r,n=[],a=window;;)try{var o=null===(t=a.location)||void 0===t?void 0:t.href,i=null===(r=a.document)||void 0===r?void 0:r.referrer;if(void 0===o||void 0===i)return{s:1,v:n};n.push({l:o,f:i});var s=a.parent;if(!s||s===a)return{s:0,v:n};a=s}catch(e){if(nn(e))return{s:1,v:n};throw e}})()}function nn(e){if(!e||"object"!=typeof e)return!1;var t=e;return!(!ie()&&!se()||"Error"!==t.name&&"TypeError"!==t.name||"Permission denied"!==t.message)||"SecurityError"===t.name}function an(){return(function(e){var t=e.location,r=e.origin,n=t.origin,a=t.ancestorOrigins,o=null;if(a){o=new Array(a.length);for(var i=0;i<a.length;++i)o[i]=a[i]}return{s:0,v:{w:null==r?null:r,l:null==n?null:n,a:o}}})(window)}function on(){return{s:0,v:eval.toString().length}}function sn(){var e=this;return h(d(250,{s:-2,v:null}),(function(){return n(e,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return(null==(e=navigator.mediaDevices)?void 0:e.enumerateDevices)?[4,e.enumerateDevices()]:[2,{s:-1,v:null}];case 1:return[2,{s:0,v:t.sent().map((function(e){return{d:e.deviceId,g:e.groupId,k:e.kind,l:e.label}}))}]}}))}))}))}function ln(){var e=navigator.webdriver;return null==e?{s:-1,v:null}:{s:0,v:e}}function cn(){var e=this;return h(d(450,{s:-2,v:null}),(function(){return n(e,void 0,void 0,(function(){var e;return a(this,(function(t){return ce()&&ue()&&(null===(e=navigator.storage)||void 0===e?void 0:e.getDirectory)?[2,un()]:[2,{s:-1,v:null}]}))}))}))}function un(){return n(this,void 0,void 0,(function(){var e,t,r,n,o,i,s,l,c,u,d,p;return a(this,(function(a){switch(a.label){case 0:return e="fpjs-root-directory",[4,navigator.storage.getDirectory().catch((function(e){if(!dn(e))throw e}))];case 1:return(t=a.sent())?[4,t.removeEntry(e,{recursive:!0}).catch((function(){}))]:[2,{s:-1,v:null}];case 2:return a.sent(),[4,t.getDirectoryHandle(e,{create:!0})];case 3:r=a.sent(),n=r,o=!1,i=0,s=0,a.label=4;case 4:return s<12?[4,r.getDirectoryHandle(C(255),{create:!0}).catch((function(e){if(!dn(e))throw e}))]:[3,8];case 5:return(l=a.sent())?[4,(r=l).move(n,C(255)).catch((function(e){if(!dn(e))throw e;o=!0}))]:[3,8];case 6:if(a.sent(),o)return[3,8];i++,n=r,a.label=7;case 7:return s++,[3,4];case 8:return o=!1,c=255,u=0,[4,n.getDirectoryHandle("d",{create:!0}).catch((function(e){if(!dn(e))throw e}))];case 9:if(!(d=a.sent()))return[3,12];a.label=10;case 10:return c-u>1?(p=Math.floor((u+c)/2),[4,d.move(n,C(p)).catch((function(e){if(!dn(e))throw e;o=!0}))]):[3,12];case 11:return a.sent(),o?c=p:u=p,o=!1,[3,10];case 12:return t.removeEntry(e,{recursive:!0}).catch((function(){})),[2,{s:0,v:{d:i,f:u}}]}}))}))}function dn(e){return"UnknownError"===e.name&&/out of memory/.test(e.message)}function pn(e){return n(this,void 0,void 0,(function(){var t,r,o,i,l=this;return a(this,(function(c){switch(c.label){case 0:if(t=ot([2708138471,327104212,219451320,1119606134,3051044378,3698989912,823804597,594212500,1438372925,2308603678],5),r=window,!(o=r.RTCPeerConnection))return[2,-3];try{i=new o}catch(e){if(e instanceof Error&&"NotSupportedError"===e.name)return[2,-6];throw e}c.label=1;case 1:return c.trys.push([1,,3,4]),[4,new Promise((function(r,o){var c;i.onicecandidate=function(c){return n(l,void 0,void 0,(function(){var n,l,u,d;return a(this,(function(a){switch(a.label){case 0:return c.candidate?[3,7]:(n=0,i.localDescription?0===(n=(i.localDescription.sdp.match(/udp .* typ host/gi)||[]).length)?(r(0),[2]):(p=i.localDescription,m=new RegExp("(".concat(t[1],")"),"g"),l=new RTCSessionDescription({sdp:p.sdp.replace(/a=setup:(.*?)\s{1,2}/,"a=setup:active\r\n").replace(m,"$1."),type:"answer"}),[4,i.setRemoteDescription(l)]):(o(new Error("remotePeerConnection.localDescription is undefined")),[2]));case 1:a.sent(),u=!1,d=0,a.label=2;case 2:return d<8?[4,i.getStats()]:[3,6];case 3:return a.sent().forEach((function(r){r.type===t[0]&&(u=e(r,n))})),u?[3,6]:[4,s(10)];case 4:a.sent(),a.label=5;case 5:return++d,[3,2];case 6:r(0),a.label=7;case 7:return[2]}var p,m}))}))};try{null===(c=i.createDataChannel)||void 0===c||c.call(i,Math.random().toString())}catch(e){return void(e instanceof Error&&"NotSupportedError"===e.name?r(-7):o(e))}i.createOffer().then((function(e){return i.setLocalDescription(e)}))}))];case 2:return[2,c.sent()];case 3:return i.close(),[7];case 4:return[2]}}))}))}function mn(){return n(this,void 0,void 0,(function(){var e,t;return a(this,(function(r){switch(r.label){case 0:return ce()||de()?[2,function(){return{s:-3,v:null}}]:(e=[],[4,h(d(400,-4),pn.bind(null,(function(t,r){var n=it(t,-1147692044);return e.some((function(e){return e[n]===t[n]}))||e.push(t),e.length>0&&r<=e.length})))]);case 1:return t=r.sent(),[2,function(){var r=t();return 0===r||e.length>0?{s:0,v:i([],e,!0)}:{s:r,v:null}}]}}))}))}var gn=function(){var e=(new Image).style;return(function(e,t){for(var r=e.join(""),n=r.split(""),a=Array(r.length),o=0;o<a.length;++o)a[o]=n.splice(t[o%t.length],1);return a.join("")})([it(e,-1048201552),it(e,-1684432877)],[18,23,22,11,23,17,3,20,4,22,19,11,25,13,23,22,7,7,17,18,4,18,11,8,11,8,3,5,2,4,3,3,5,6,5,3,1,2,2,0,0])};function hn(e,t){return n(this,void 0,void 0,(function(){var r,n,o,i,s,l;return a(this,(function(a){switch(a.label){case 0:return r=e.split("/").slice(-1)[0],n=new window[t[1]],o=it(new window[t[7]]("")[t[8]](""),100358090),(i=document.createElement(o)).type=t[2].slice(0,-1),s=new window[t[3]]([],e,t[4]),n[t[5]][t[6]](s),i[t[2]]=n[t[2]],l=it(i,-390991058),0===i[l].length?[2,{n:r,l:-2}]:[4,new Promise((function(e){i[l][0][t[2].slice(0,-1)]((function(t){e({n:r,l:t[it(t,1959003007)]})}),(function(){e({n:r,l:-1})}))}))];case 1:return[2,a.sent()]}}))}))}function fn(){return n(this,void 0,void 0,(function(){var e,t=this;return a(this,(function(r){switch(r.label){case 0:if(null===(e=(function(e,t,r){var n=b(t());try{return JSON.parse(I((function(e,t,r){for(var n=f(e),a=new ArrayBuffer(n.length-r),o=new Uint8Array(a),i=0;i<n.length;++i)o[i]=n[i]^t[i%t.length];return a})(new Uint32Array(e),n,r)))}catch(e){if(e instanceof Error&&"SyntaxError"===e.name)return null;throw e}})([100747032,151994395,186333275,671684613,923601964,588644669,1191713795,520227124,1543897094,69023765,1430872341,169543715,437519935,504433178,88826947,470825002,793398853,1376325121,474813504,1446057227,3621709,524686095,454887943,1447040086,70063365,1467506960,1241907982,154159685,521611543,826760778,1627525644,56],gn,3)))return[2,function(){return{s:-3,v:null}}];if(!(e[1]in window))return[2,function(){return{s:-1,v:null}}];try{new window[e[1]]}catch(e){if(e instanceof Error&&"TypeError"===e.name)return[2,function(){return{s:-1,v:null}}];throw e}return[4,h(d(350,{s:-2,v:null}),(function(){return n(t,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return t={s:0},[4,Promise.all([hn(e[0],e)])];case 1:return[2,(t.v=r.sent(),t)]}}))}))}))];case 1:return[2,r.sent()]}}))}))}function _n(){var e=navigator.doNotTrack;return null==e?{s:-1,v:null}:{s:0,v:e}}function vn(){var e=window.devicePixelRatio;return null==e?{s:-1,v:null}:{s:0,v:e}}function En(){var e=this;return h(s(75,{s:-3,v:null}),(function(){return n(e,void 0,void 0,(function(){var e,t,r,n;return a(this,(function(a){switch(a.label){case 0:if(!(e=navigator).requestMediaKeySystemAccess)return[2,{s:-1,v:null}];a.label=1;case 1:return a.trys.push([1,6,,7]),[4,e.requestMediaKeySystemAccess("org.w3.clearkey",[{initDataTypes:["keyids","webm"],audioCapabilities:["opus","vorbis"].map((function(e){return{contentType:'audio/webm; codecs="'.concat(e,'"')}})),videoCapabilities:["vp9","vp8"].map((function(e){return{contentType:'video/webm; codecs="'.concat(e,'"')}}))}])];case 2:return[4,a.sent().createMediaKeys()];case 3:return t=a.sent(),(r=t.createSession()).sessionId?[3,5]:[4,new Promise((function(e){r.onmessage=e,r.generateRequest("webm",new Uint8Array([1,1,1,1]))}))];case 4:a.sent(),a.label=5;case 5:return[2,{s:0,v:r.sessionId}];case 6:if((n=a.sent())instanceof Error&&"NotSupportedError"===n.name)return[2,{s:-2,v:null}];throw n;case 7:return[2]}}))}))}))}function Sn(){var e=window.WebAssembly;if(!(null==e?void 0:e.validate))return{s:-1,v:null};for(var t=[0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10],r=0,n=0,a=[[9,1,7,0,65,0,253,15,26,11,0,10,4,110,97,109,101,2,3,1,0,0],[240,67,0,0,0,12,1,10,0,252,2,3,1,1,0,0,110,26,11,161,10],[6,1,4,0,18,0,11,0,10,4,110,97,109,101,2,3,1,0,0],[8,1,6,0,65,0,192,26,11,0,10,4,110,97,109,101,2,3,1,0,0],[7,1,5,0,208,112,26,11,0,10,4,110,97,109,101,2,3,1,0,0]];n<a.length;n++){var o=a[n];r<<=1,r|=e.validate(Uint8Array.of.apply(Uint8Array,i(i([],t,!1),o,!1)))?1:0}return{s:0,v:r}}function bn(){for(var e=[],t=Math.random(),r=24575;r>=0;--r)if(r%4096==0){var n=Math.random();e.push((t-n)*Math.pow(2,31)|0),t=n}return{s:0,v:e}}function In(){var e;return n(this,void 0,void 0,(function(){var t,r,o,i,s,l,c=this;return a(this,(function(u){switch(u.label){case 0:if(!(t=null===(e=window.crypto)||void 0===e?void 0:e.subtle)||!t.generateKey||!t.exportKey)return[2,{s:-1,v:null}];r=function(){return n(c,void 0,void 0,(function(){var e,r;return a(this,(function(n){switch(n.label){case 0:return[4,t.generateKey({name:"AES-GCM",length:128},!0,["encrypt"])];case 1:return e=n.sent(),[4,t.exportKey("raw",e)];case 2:return r=n.sent(),[2,new Uint8Array(r)]}}))}))},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all([r(),r()])];case 2:for(o=u.sent(),i=new Uint8Array(o[0].length),s=0;s<o[0].length;++s)i[s]=165^o[0][s]^o[1][s];return[2,{s:0,v:w(i)}];case 3:if((l=u.sent())instanceof Error&&"NotSupportedError"===l.name)return[2,{s:-2,v:null}];throw l;case 4:return[2]}}))}))}function Tn(e,t,r,o,i){var s=(function(e,t){for(var r=[],n=0,a=Array.isArray(e)?e:[e];n<a.length;n++){var o=a[n];yn(o)?r.push.apply(r,On(t)):r.push(String(o))}return r})(e,t);if(r||0===s.length)return function(){return Promise.resolve({s:-1,v:null})};D(i,(function(){return{e:6}}));var l=Date.now(),c=xe(s,wn.bind(null,5e3,i),Rn,Math.max(10,s.length),o);return g(c),function(e,t,r,o){return n(this,void 0,void 0,(function(){var n,i;return a(this,(function(a){switch(a.label){case 0:if(r)return[2,{s:-1,v:null}];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.race([c,Ln(l,e,t)])];case 2:return a.sent(),n=(function(e){var t=e.result,r=e.failedAttempts;if(void 0!==t)return t;var n=r[r.length-1];if(!n)return{s:-3,v:null};if(1===n.level)return n.error;var a=n.error;if(a instanceof Error){var o=a.name,i=a.message;switch(o){case"AbortError":return{s:-2,v:i};case"TimeoutError":return{s:-3,v:i};case"CSPError":return{s:-6,v:i};case"TypeError":return{s:-4,v:i}}return Et(a)}return Et({message:a})})(c.current),D(o,(function(){return{e:7,result:n}})),[2,n];case 3:throw i=a.sent(),D(o,(function(){return{e:8,error:i}})),i;case 4:return[2]}}))}))}}function yn(e){return!!e&&e.default===M.default}function On(e){var t=ot([2140778928,389751833,208210797,1563840547,171639861,1562598762,1316752492,440095547,1562598764,1316424316,507204411,1562598761,1315573624,607453755,260002107,1365906285,1567887482,423058741,208997225,276451627,574905716],2),r=t[0],n=t[1],a=t[2];return _(n,e)||(e="us"),a.map((function(t){return"".concat(r).concat(n[e]).concat(t)}))}function wn(e,t,r,n,a){return F(t,(function(){return{e:9,tryNumber:n,url:r,timeout:e}}),(function(e){var t=e.status,r=e.getHeader,a=e.body;return{e:10,tryNumber:n,status:t,retryAfter:r("retry-after"),body:a}}),(function(e){return{e:11,tryNumber:n,error:e}}),(function(){return k({url:r,timeout:e,abort:a})}))}function Rn(e){var t=e.status,r=e.body;return 200===t&&/^[a-zA-Z0-9+/]{1,1022}={0,2}$/.test(r)?{finish:!0,result:{s:0,v:r}}:{finish:!1,error:{s:-5,v:y("".concat(t,": ").concat(r),255)}}}function Ln(e,t,r){return d(Math.min(Math.max(t,e+1e4-Date.now()),r))}function Nn(e){for(var t="".concat(e,"="),r=0,n=document.cookie.split(";");r<n.length;r++){for(var a=n[r],o=0;" "===a[o]&&o<a.length;)++o;if(a.indexOf(t)===o)return a.slice(o+t.length)}}function An(e,t,r,n){var a="".concat(e,"=").concat(t),o=new Date(Date.now()+24*r*60*60*1e3),i="expires=".concat(o.toUTCString()),s=n?"domain=".concat(n):"";document.cookie=[a,"path=/",i,s,"SameSite=Lax"].join("; ")}function Cn(e){var t=location.hostname,r=de();(function(e,t){var r=e.length-("."===e.slice(-1)?1:0);do{if(r=r>0?e.lastIndexOf(".",r-1):-1,!0===t(e.slice(r+1)))return!0}while(r>=0);return!1})(t,(function(n){if(!r||!/^([^.]{1,3}\.)*[^.]+\.?$/.test(n)||n===t)return e(n)}))||e()}function Pn(e,t){(function(e,t,r){Cn((function(t){!(function(e,t){An(e,"",-1,t)})(e,t)})),r<0||Cn((function(n){return An(e,t,r,n),Nn(e)===t}))})(t,e,365),(function(e,t){var r;try{null===(r=null===localStorage||void 0===localStorage?void 0:localStorage.setItem)||void 0===r||r.call(localStorage,e,t)}catch(e){}})(t,e)}function Gn(e){var t,r;try{return null!==(r=null===(t=null===localStorage||void 0===localStorage?void 0:localStorage.getItem)||void 0===t?void 0:t.call(localStorage,e))&&void 0!==r?r:void 0}catch(e){}}function Mn(){var e,t,r;return{stage1:(e={},e.s34=_r,e.s54=Qr,e.s78=mn,e),stage2:(t={},t.s52=Vr,t.s35=Er,t.s31=gr,t.s6=Rt,t.s26=sn,t.s18=In,t.s8=En,t.s58=en,t.s20=Tt,t.s36=yt,t.s51=Ot,t.s21=wt,t.s79=fn,t),stage3:(r={},r.s22=Sn,r.s30=_n,r.s33=hr,r.s44=br,r.s45=Tr,r.s48=bn,r.s49=Or,r.s50=wr,r.s53=Wr,r.s57=vn,r.s59=tr,r.s60=rr,r.s61=nr,r.s62=ar,r.s63=or,r.s64=ir,r.s65=sr,r.s66=tn,r.s68=lr,r.s69=rn,r.s71=an,r.s24=on,r.s72=ln,r.s1=Lt,r.s2=Nt,r.s3=At,r.s4=Ct,r.s5=Pt,r.s7=Gt,r.s9=Mt,r.s10=Dt,r.s11=Ft,r.s12=xt,r.s13=kt,r.s14=Ut,r.s15=jt,r.s16=Vt,r.s17=Bt,r.s19=Wt,r.s27=Ht,r.s28=Xt,r.s32=qt,r.s37=Yt,r.s41=zt,r.s39=Kt,r.s42=Jt,r.s38=Zt,r.s43=Qt,r.s40=$t,r.s46=er,r.s73=cn,r.s74=xr,r.s75=kr,r.s76=Ur,r)}}function Dn(e){return"".concat(e,"_t")}var Fn=function(){return{key:"id",sources:Mn(),tls:Tn,toRequest:function(e,t){var n;return r(((n={}).url=location.href,n.cr=document.referrer||void 0,n.s55=(function(e){var t=(function(e){return[Nn(e),Gn(e)]})(Dn(e)),r=t[0],n=t[1];return void 0!==r&&void 0!==n?{s:0,v:r||n}:void 0!==r?{s:1,v:r}:void 0!==n?{s:2,v:n}:{s:-1,v:null}})(t),n),(function(e){for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var a=n[r],o=e[a];if(o){var i=o.error?Et(o.error):o.value;t[a]=i}}return t})(e))},onResponse:function(e,t){var r,n,a;!(function(e,t){var r=Dn(e);t&&Pn(t,r)})(t,null===(a=null===(n=null===(r=e.products)||void 0===r?void 0:r.identification)||void 0===n?void 0:n.data)||void 0===a?void 0:a.visitorToken)}}};t.ERROR_API_KEY_MISSING="API key required",t.ERROR_API_KEY_INVALID="API key not found",t.ERROR_API_KEY_EXPIRED="API key expired",t.ERROR_BAD_REQUEST_FORMAT="Request cannot be parsed",t.ERROR_GENERAL_SERVER_FAILURE="Request failed",t.ERROR_SERVER_TIMEOUT="Request failed to process",t.ERROR_RATE_LIMIT="Too many requests, rate limit exceeded",t.ERROR_FORBIDDEN_ORIGIN="Not available for this origin",t.ERROR_FORBIDDEN_HEADER="Not available with restricted header",t.ERROR_TOKEN_MISSING="API key required",t.ERROR_TOKEN_INVALID="API key not found",t.ERROR_TOKEN_EXPIRED="API key expired",t.load=function(e){return Promise.resolve().then((function(){var t={region:"us"};if(e)for(var r in e)e.hasOwnProperty(r)&&void 0!==e[r]&&(t[r]=e[r]);return t.apiKey="hSrgVEjs3amxLolocQ18",t.imi={m:"e"},t.modules=[Fn()],t})).then(vt)}})),define("metaserver/static/js/auth/login/sso_utils",["require","exports","tslib","metaserver/static/js/auth/login/api","metaserver/static/js/auth/login/types"],(function(e,t,r,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SsoStateChecker=void 0,n=r.__importStar(n);const o=/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/;t.SsoStateChecker=class{constructor(){this.shouldCheckSsoState=e=>e.match(o),this.checkSsoState=(e,t,r=!1)=>{this.shouldCheckSsoState(e)?this.CACHE[e]?t(e,this.CACHE[e]):!r&&this.INFLIGHT[e]||(this.INFLIGHT[e]=!0,n.checkSsoState(e).then(r=>{this.CACHE[e]=r,t(e,this.CACHE[e])}).finally(()=>{delete this.INFLIGHT[e]})):t(e,{user_sso_state:a.SsoState.OFF})},this.CACHE={},this.INFLIGHT={}}}})),define("metaserver/static/js/auth/login/2fa/authenticator_form",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/text","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils","metaserver/static/js/auth/login/2fa/trust_checkbox"],(function(e,t,r,n,a,o,i,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Authenticator2FAForm=void 0,n=r.__importDefault(n),a=r.__importDefault(a);t.Authenticator2FAForm=e=>{const t=a.default.createElement("button",{className:(0,n.default)("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},o.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return a.default.createElement("form",{className:"two-factor-form clearfix 2fa-phone-form",onSubmit:e.onSubmit},e.displayHeader&&a.default.createElement("div",{className:"login-header"},o.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),a.default.createElement("div",{className:"login-info two-factor-uses-authenticator"},o.intl.formatMessage({id:"sufs69",defaultMessage:"Enter the code generated by your authenticator app."})),a.default.createElement("div",{className:(0,n.default)({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},a.default.createElement(i.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:o.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:s.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1,persistLabel:!0}),e.inlineSubmit&&t),!e.hideTrustCheckbox&&a.default.createElement(c.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),!e.inlineSubmit&&t,!e.hideHelp&&a.default.createElement("div",{className:"two-factor-need-help"},a.default.createElement("a",{href:(0,l.twoFactorRecoveryUrl)(e.rememberMe,e.continuationUrl),className:"twofactor_recovery_url"},o.intl.formatMessage({id:"gR0Vz1",defaultMessage:"Having trouble getting a code?"}))))}})),define("metaserver/static/js/auth/login/2fa/email_form",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/text","metaserver/static/js/auth/common/types"],(function(e,t,r,n,a,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Email2FAForm=void 0,n=r.__importDefault(n),a=r.__importDefault(a);t.Email2FAForm=e=>{const t=a.default.createElement("button",{className:(0,n.default)("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},o.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return a.default.createElement("form",{className:"two-factor-form clearfix 2fa-email-form",onSubmit:e.onSubmit},e.displayHeader&&a.default.createElement("div",{className:"login-header"},o.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),a.default.createElement("div",{className:"login-info two-factor-uses-email"},o.intl.formatMessage({id:"FuPzY9",defaultMessage:"We sent a code to {email} and any devices you’ve linked to this account. Enter the code to continue."},{span:e=>a.default.createElement("span",{className:"tfa-email"},e),email:e.email})),a.default.createElement("div",{className:(0,n.default)({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},a.default.createElement(i.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:o.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:s.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1,persistLabel:!0}),e.inlineSubmit&&t),!e.inlineSubmit&&t,a.default.createElement("div",{className:"two-factor-need-help"},a.default.createElement("a",{onClick:e.onResendCodeClick,"data-uxa-log":"email_2fa_resend_button",className:"resend-two-factor-code two-factor-uses-sms"},o.intl.formatMessage({id:"HTy4qW",defaultMessage:"Resend code"}))))}})),define("metaserver/static/js/auth/login/2fa/phone_form",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/text","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils","metaserver/static/js/auth/login/2fa/trust_checkbox"],(function(e,t,r,n,a,o,i,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Phone2FAForm=void 0,n=r.__importDefault(n),a=r.__importDefault(a);t.Phone2FAForm=e=>{const t=a.default.createElement("button",{className:(0,n.default)("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},o.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return a.default.createElement("form",{className:"two-factor-form clearfix 2fa-phone-form",onSubmit:e.onSubmit},e.displayHeader&&a.default.createElement("div",{className:"login-header"},o.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),a.default.createElement("div",{className:"login-info two-factor-uses-sms"},o.intl.formatMessage({id:"lWPbUP",defaultMessage:"We sent a code to your phone number ending in <span>{last_two_digits}</span>."},{span:e=>a.default.createElement("span",{className:"last-two-digits"},e),last_two_digits:e.lastTwoDigits})),a.default.createElement("div",{className:(0,n.default)({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},a.default.createElement(i.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:o.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:s.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1,persistLabel:!0}),e.inlineSubmit&&t),!e.hideTrustCheckbox&&a.default.createElement(c.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),!e.inlineSubmit&&t,!e.hideHelp&&a.default.createElement("div",{className:"two-factor-need-help"},a.default.createElement("a",{onClick:e.onResendCodeClick,className:"resend-two-factor-code two-factor-uses-sms"},o.intl.formatMessage({id:"HTy4qW",defaultMessage:"Resend code"})),a.default.createElement("a",{href:(0,l.twoFactorRecoveryUrl)(e.rememberMe,e.continuationUrl),className:"twofactor_recovery_url"},o.intl.formatMessage({id:"gR0Vz1",defaultMessage:"Having trouble getting a code?"}))))}})),define("metaserver/static/js/auth/login/2fa/seckey_form",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/login/2fa/trust_checkbox","metaserver/static/js/auth/login/types","metaserver/static/js/clean/ui/image","metaserver/static/js/clean/ui/sprite","metaserver/static/js/clean/static_urls"],(function(e,t,r,n,a,o,i,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecKey2FAForm=void 0,n=r.__importDefault(n);const u=()=>n.default.createElement(s.Image,{src:(0,c.static_url)("/static/metaserver/static/images/security_keys/insert-vflkCfC4_.png"),srcHiRes:(0,c.static_url)("/static/metaserver/static/images/security_keys/insert@2x-vflTxG2RJ.png"),className:"seckey-insert"}),d=()=>n.default.createElement(s.Image,{src:(0,c.static_url)("/static/metaserver/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:(0,c.static_url)("/static/metaserver/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif"),className:"seckey-loading-status"}),p=e=>n.default.createElement("div",{className:"two-factor-seckey-instructions"},n.default.createElement("p",null,n.default.createElement("span",{style:{fontWeight:"bold"}},a.intl.formatMessage({id:"DljPpW",defaultMessage:"Insert your security key to use it"}))," ",e.securityKeyState===i.SecurityKeyState.LOADING&&n.default.createElement(d,null),e.securityKeyState===i.SecurityKeyState.FOUND&&n.default.createElement(m,null)),a.intl.formatMessage({id:"eonxEJ",defaultMessage:"After inserting, tap your key if it has a button or gold disk."})),m=()=>n.default.createElement(l.Sprite,{group:"web",name:"bulletpoint-check",alt:"",className:"seckey-loading-status"});t.SecKey2FAForm=e=>n.default.createElement("form",{className:"two-factor-form clearfix 2fa-seckey-form"},e.displayHeader&&n.default.createElement("div",{className:"login-header"},a.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),n.default.createElement("div",{className:"login-info two-factor-uses-u2f"},n.default.createElement(u,null),e.securityKeyState!==i.SecurityKeyState.NOT_FOUND&&n.default.createElement(p,{securityKeyState:e.securityKeyState}),n.default.createElement("div",{className:"text-input"},n.default.createElement("div",{className:"text-input-error-wrapper"})),e.securityKeyState===i.SecurityKeyState.NOT_FOUND&&n.default.createElement("div",{className:"two-factor-seckey-instructions"},n.default.createElement("div",{style:{color:"red"}},n.default.createElement("span",{className:"error-msg"},e.error||a.intl.formatMessage({id:"uqQwD8",defaultMessage:"Key not found."}))),n.default.createElement("button",{className:"button-tertiary two-factor-seckey-retry",onClick:e.onRetry},a.intl.formatMessage({id:"n1zYou",defaultMessage:"Retry"}))),!e.hideTrustCheckbox&&n.default.createElement(o.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),n.default.createElement("div",{className:"two-factor-use-phone-instead"},n.default.createElement("a",{onClick:e.onChange2FA},e.secondaryTwoFactorType===i.TwoFactorType.SMS?a.intl.formatMessage({id:"cDmyI0",defaultMessage:"Send SMS instead"}):a.intl.formatMessage({id:"yzAIpy",defaultMessage:"Use mobile authenticator instead"})))))})),define("metaserver/static/js/auth/login/api",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax_as_promised_jquery","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/auth/login/types","metaserver/static/js/clean/viewer","metaserver/static/js/clean/viewer_refresh","metaserver/static/js/core/assert","metaserver/static/js/core/exception","metaserver/static/js/core/i18n"],(function(e,t,r,n,a,o,i,s,l,c,u){"use strict";function d(){const e=i.Viewer.get_viewer().get_users()[0];return(0,l.assert)(null!=e,"Expect user is logged in when pairing"),new a.DefaultUserApiV2Client(e)}function p(e){var t;return(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t[".tag"])?{status:o.LoginResponseStatus.ERROR,html_response:!1,message:e.message}:{status:o.LoginResponseStatus.ERROR,html_response:!1,message:u.intl.formatMessage({id:"vuVMnM",defaultMessage:"Something went wrong."})}}function m(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.login_email,r=e.encrypted_password;(0,l.assert)(null!=t&&null!=r,"Expect login email and password not null");const n=d(),a={login_email:t,encrypted_password:r,remember_me:e.remember_me};try{const e=yield n.ns("team").rpc("account_pair_login",a,{});return e.two_factor_request?e.two_factor_request:e}catch(e){return p(e)}}))}function g(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.login_email,r=e.encrypted_password;(0,l.assert)(null!=t&&null!=r,"Expected login email and password not null");const n=d(),a={login_email:t,encrypted_password:r,remember_me:e.remember_me};try{const e=yield n.ns("team").rpc("link_user_login",a,{});return e.two_factor_request?e.two_factor_request:e}catch(e){return p(e)}}))}function h(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.checkpoint_token,r=e.code;(0,l.assert)(null!=r,"Code is required");const n=d(),a={checkpoint_token:t,code:r,remember_me:e.remember_me};try{return yield n.ns("team").rpc("account_pair_two_factor_login",a,{})}catch(e){return p(e)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.updateDropboxPasswordsEligibility=t.submitTwoFactorForm=t.retryU2fAuthentication=t.resendTwoFactorCode=t.submitCredentialsForm=t.accountPairTwoFactorLogin=t.linkUserLogin=t.accountPairLogin=t.checkSsoState=void 0,n=r.__importStar(n),t.checkSsoState=function(e){return new Promise(t=>n.WebRequest({url:"/sso_state",data:{email:e},success:e=>t(JSON.parse(e))}))},t.accountPairLogin=m,t.linkUserLogin=g,t.accountPairTwoFactorLogin=h,t.submitCredentialsForm=function(e,t){let r;switch(e){case"multi":r="/ajax_multi_login";break;case"pairing":r="/team/join/new_pair_login_ajax";break;case"cli_link_nonce":r="/cli_link_nonce";break;case"bidirectional_pair":return m(t);case"link_user":return g(t);default:r="/ajax_login"}return new Promise((e,a)=>n.WebRequest({url:r,type:"POST",data:t,skipNotifyError:!0,success:t=>{e(JSON.parse(t))},error:(t,r,n)=>{"{"!==n[0]&&-1===n.indexOf(":")?e({status:o.LoginResponseStatus.ERROR,html_response:!1,message:n}):a(JSON.parse(n))}}))},t.resendTwoFactorCode=function(e,t){return new Promise((r,a)=>n.WebRequest({url:"/twofactor_resend",data:{backup:e,mobile_push:t},success:r,error:a}))},t.retryU2fAuthentication=function(){return new Promise((e,t)=>n.WebRequest({url:"/account/twofactor/u2f_start_authentication",success:e,error:t}))},t.submitTwoFactorForm=function(e,t){let r;switch(e){case"multi":r="/ajax_multi_verify_code";break;case"pairing":r="/team/join/new_pair_login_ajax";break;case"cli_link_nonce":r="/cli_link_twofactor";break;case"admin":r="/admin/login/twofactor";break;case"bidirectional_pair":case"link_user":return h(t);default:r="/ajax_verify_code"}return new Promise((e,a)=>n.WebRequest({url:r,type:"POST",data:t,success:t=>e(JSON.parse(t)),error:(e,t,r)=>a(JSON.parse(r))}))},t.updateDropboxPasswordsEligibility=function(e){return r.__awaiter(this,void 0,void 0,(function*(){i.Viewer.get_viewer().is_signed_in||(yield(0,s.refreshViewerAfterLogin)());try{const t=d();yield t.ns("passwords").rpc("update_freemium_eligibility",{entry_point:{".tag":e}},{})}catch(e){(0,c.reportException)({err:e,severity:"non-critical"})}}))}})),define("metaserver/static/js/auth/common/captcha",["require","exports","tslib","classnames","react","metaserver/static/js/components/ui/css","metaserver/static/js/abuse/captcha_helper","metaserver/static/js/auth/common/utils"],(function(e,t,r,n,a,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Captcha=t.CaptchaComponent=t.clear_captcha_response=t.handle_captcha_errors=t.get_captcha_responses=void 0,n=r.__importDefault(n),a=r.__importDefault(a),t.get_captcha_responses=function(e){const t=e.getWrappedComponent();return{"g-recaptcha-response":t.recaptcha_response,"funcaptcha-response":t.funcaptcha_response}},t.handle_captcha_errors=function(e,t,r){return e.getWrappedComponent().handle_captcha_errors(t,r)},t.clear_captcha_response=function(e){return e.getWrappedComponent().clear_captcha_response()};class l extends a.default.Component{constructor(e){super(e)}handle_captcha_errors(t,n){return t&&t.funcaptcha_verification_error&&(0,s.notifyCaptchaConnectionError)(),!(!t||!t.funcaptcha_response)&&(new Promise((t,r)=>{e(["metaserver/static/js/abuse/funcaptcha_modal"],t,r)}).then(r.__importStar).then(({openFuncaptchaModal:e})=>{e(this.props.email||"",n||this.props.source,e=>{this.funcaptcha_response=e,this.props.onSubmit()},this.props.onReady)}),!0)}clear_captcha_response(){this.funcaptcha_response=void 0}componentDidMount(){(0,i.LoadRecaptcha)(void 0,!0)}render(){return a.default.createElement("div",{ref:"container_div",className:(0,n.default)({"recaptcha-v2-challenge-container":!0,"recaptcha-v2-challenge-container--invisible":!0})},a.default.createElement("div",{ref:"captcha_div",className:"recaptcha_v2_challenge"}))}submit(){this.clear_captcha_response(),this.props.onSubmit()}}t.CaptchaComponent=l,l.displayName="CaptchaComponent",t.Captcha=(0,o.requireCssWithComponent)(l,["/static/metaserver/static/css/recaptcha-vflIN6j39.css"])})),define("metaserver/static/js/auth/common/error",["require","exports","tslib","dompurify","react"],(function(e,t,r,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthError=void 0,n=r.__importDefault(n),a=r.__importDefault(a);class o extends a.default.Component{shouldComponentUpdate(e){return this.hasNewError(e.error)}hasNewError(e){var t;return!this.hasMatchingErrorMessage(e)||(null==e?void 0:e.clientTimestamp)!==(null===(t=this.props.error)||void 0===t?void 0:t.clientTimestamp)}hasMatchingErrorMessage(e){var t,r;return(null==e?void 0:e.message_html)===(null===(t=this.props.error)||void 0===t?void 0:t.message_html)&&(null==e?void 0:e.message_text)===(null===(r=this.props.error)||void 0===r?void 0:r.message_text)}render(){const{error:e,errorId:t}=this.props;return e&&e.message_html?a.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper",dangerouslySetInnerHTML:{__html:n.default.sanitize(e.message_html)}}):e&&e.message_text?a.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper"},a.default.createElement("span",{className:"error-message"},e.message_text,a.default.createElement("span",{className:"text-input-error-hidden ax-visually-hidden","aria-hidden":"true",style:{visibility:"hidden"}},e.clientTimestamp))):a.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper"})}}t.AuthError=o,o.displayName="AuthError"})),define("metaserver/static/js/auth/common/inputs/text",["require","exports","tslib","classnames","react","dompurify","metaserver/static/js/core/i18n","classnames","metaserver/static/js/auth/common/error","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils","metaserver/static/js/components/password_strength_meter","@dropbox/dig-components/text_fields","@dropbox/dig-components/form_row","@dropbox/dig-icons","@dropbox/dig-components/buttons","@dropbox/dig-icons/assets","metaserver/static/js/clean/ui/input_dig","metaserver/static/js/core/browser_detection","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index"],(function(e,t,r,n,a,o,i,s,l,c,u,d,p,m,g,h,f,_,v,E){"use strict";function S(e){return"boolean"==typeof e?e?c.AuthTextInputAutoComplete.ON:c.AuthTextInputAutoComplete.OFF:null!=e?e:c.AuthTextInputAutoComplete.OFF}Object.defineProperty(t,"__esModule",{value:!0}),t.AuthTextField=void 0,n=r.__importDefault(n),a=r.__importStar(a),o=r.__importDefault(o),s=r.__importDefault(s);const b=e=>{const t=S(e.autoComplete),r=e.passwordStrengthProps||{},o=i.intl.formatMessage({id:"/uvN/C",defaultMessage:"Good passwords are hard to guess. Use uncommon words or inside jokes, non-standard uPPercasing, creative spelllling, and non-obvious numbers and symbols"}),s=[e.errorId],l=e.dwgRefreshEnabled&&e.type===c.AuthTextInputType.PASSWORD,u=l&&!v.safari,p="V1"===e.showPasswordVariant,[m,_]=(0,a.useState)(!1),[b,I]=(0,a.useState)(!(p&&!m)||!e.showPasswordByDefault),y=a.default.useCallback(e=>{e.preventDefault(),I(e=>!e),m||_(!0)},[I,m]),O=!e.autofillOrUserInputHandled&&!m;a.default.useEffect(()=>{p&&I(!e.showPasswordByDefault)},[p,e.showPasswordByDefault]);const w=a.default.createElement("button",{className:"show-pw-default-text-btn","data-uxa-log":"show-password-text-toggle",onClick:y,type:"button",tabIndex:0},a.default.createElement(E.DWGText,{fontSize:10,lineHeight:"120%",fontFamily:"atlas-grotesk",color:"attention"},b?i.intl.formatMessage({id:"2X0e4z",defaultMessage:"Show"}):i.intl.formatMessage({id:"5fnw5C",defaultMessage:"Hide"}))),R=b?f.ShowLine:f.HideLine,L=p&&O,N=a.default.createElement("div",{className:p?"show-pw-default-container":"show-password-container--dwg-refresh"},a.default.createElement(h.IconButton,{type:"button",variant:"transparent",onClick:y,role:"switch","aria-checked":b?"false":"true","aria-controls":e.id,"aria-label":i.intl.formatMessage({id:"Y5ZvTz",defaultMessage:"Show password"}),"data-uxa-log":b?"show_password_text":"hide_password_text"},a.default.createElement(g.UIIcon,{src:L?f.HideLine:R,size:p?"large":"standard","aria-hidden":"true"}))),[A,C]=(0,a.useState)(!1),P=i.intl.formatMessage({id:"DYmo9x",defaultMessage:"CapsLock is on"}),G="password-capslock-warning-dwg-refresh__icon",M=a.default.createElement("img",{id:G,className:G,alt:P,src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMCAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01IDBMMCA1LjgzMzMzTDIuOTE2NjcgNS44MzMzM0wyLjkxNjY3IDEwTDcuMDgzMzMgMTBMNy4wODMzMyA1LjgzMzMzTDEwIDUuODMzMzNMNSAwWk0yLjkxNjUgMTIuOTE2N0w3LjA4MzE3IDEyLjkxNjdWMTEuMjVMMi45MTY1IDExLjI1TDIuOTE2NSAxMi45MTY3WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg=="}),D=u?e=>{C(e.getModifierState("CapsLock"))}:void 0,F=u?e=>{C(e.getModifierState("CapsLock"))}:void 0,x=u?e=>{C(!1)}:void 0,k=a.default.createElement("div",{className:(0,n.default)("password-capslock-warning-dwg-refresh",{"password-capslock-warning-dwg-refresh--visible":A}),"aria-live":"polite"},A&&M);u&&A&&s.push(G);const U=(0,n.default)("text-input-input",e.className,{"input-error":e.hasError,"numeric-input":e.type===c.AuthTextInputType.NUMBER,"text-input-input--capslock-warning":l&&A}),j=b?e.type:c.AuthTextInputType.TEXT,V=L?T(!!e.showPasswordByDefault,!!e.autofillOrUserInputHandled):j;return a.default.createElement("div",{className:"text-input-wrapper"},(!e.value||e.persistLabel)&&a.default.createElement("label",{className:(0,n.default)({"persistent-label":e.persistLabel}),htmlFor:e.id},e.placeholder),e.passwordManagerHint&&"before"===e.passwordManagerHint.position&&e.passwordManagerHint.node,a.default.createElement("input",{id:e.id,type:l?V:e.type,className:U,name:e.name,value:e.value,onChange:e.onChange,disabled:e.disabled,autoFocus:e.autoFocus,autoComplete:t,"aria-describedby":s.join(" ")||void 0,"aria-invalid":e.hasError?"true":"false",inputMode:e.type===c.AuthTextInputType.NUMBER?"numeric":"text",onKeyDown:t=>{var r;p&&e.onUserInputKeyDown&&e.onUserInputKeyDown(t),e.type===c.AuthTextInputType.NUMBER?!0===(r=t).ctrlKey||!0===r.metaKey||8===r.keyCode||46===r.keyCode||9===r.keyCode||13===r.keyCode||r.keyCode>=48&&r.keyCode<=57||r.keyCode>=96&&r.keyCode<=105||144===r.keyCode||37===r.keyCode||39===r.keyCode||r.preventDefault():u&&C(t.getModifierState("CapsLock"))},onKeyUp:D,onClick:F,onBlur:x}),u&&k,l&&N,p&&w,e.type===c.AuthTextInputType.PASSWORD&&e.measureStrength&&a.default.createElement(d.PasswordStrengthMeter,{password:e.value||"",zxcvbnPostTti:!0,className:e.variant,bubblePosition:r.position,bubbleDescription:r.description||o,bubbleClassName:r.className,dwgRefreshEnabled:e.dwgRefreshEnabled}),e.passwordManagerHint&&"after"===e.passwordManagerHint.position&&e.passwordManagerHint.node)},I=e=>{const{disabled:t,name:r,placeholder:n,error:i,onChange:l,measureStrength:c,type:u,errorId:d}=e,h=!(!i||!i.message_text&&!i.message_html);return a.default.createElement("div",{className:"auth__input-wrapper"},c?a.default.createElement(_.password,{name:"password",className:(0,s.default)("auth__password-input",{"is-invalid":h}),measureStrength:!0,placeholder:n,onChange:l,"aria-describedby":d,"aria-invalid":h?"true":"false"}):a.default.createElement(p.TextInput,{disabled:t,isInvalid:h,name:r,onChange:l,placeholder:n,wrapperProps:{className:"auth__input-field"},type:u,"aria-describedby":d,"aria-invalid":h?"true":"false"}),a.default.createElement("div",{id:d,"aria-live":"polite","aria-atomic":"true"},h&&a.default.createElement(m.FormHelperText,{variant:"alert"},a.default.createElement(g.UIIcon,{src:f.FailLine,size:"small"}),(null==i?void 0:i.message_html)?a.default.createElement("span",{dangerouslySetInnerHTML:{__html:o.default.sanitize(i.message_html)}}):a.default.createElement("span",null,null==i?void 0:i.message_text))))};t.AuthTextField=e=>{const{name:t,variant:r,error:o,maestroStyle:i,onChange:s,value:d,disabled:p,inputClassName:m,type:g,placeholder:h,measureStrength:f,passwordStrengthProps:_,autoComplete:v,autoFocus:E,label:T,className:y,passwordManagerHint:O,showPasswordByDefault:w,autofillOrUserInputHandled:R,showPasswordVariant:L,onUserInputKeyDown:N}=e,A=S(v),C=(0,a.useMemo)(()=>(0,u.generateId)(t),[t]),P=(0,a.useMemo)(()=>(0,u.genErrorId)(C),[C]);if(r===c.AuthFormVariant.DIG20)return a.default.createElement(I,Object.assign({},e,{errorId:P}));const G=i?null:y,M=(0,n.default)("text-input",r,G),D=e.styledError,F=D?a.default.createElement(D,{id:P}):a.default.createElement(l.AuthError,{errorId:P,error:o}),x=!!(D||o&&(o.message_html||o.message_text)),k=a.default.createElement("div",{className:M},!i&&F,a.default.createElement(b,{id:C,errorId:P,name:t,onChange:s,value:d,disabled:p,className:m,hasError:x,variant:r,type:g,placeholder:h,measureStrength:f,passwordStrengthProps:_,autoComplete:A,autoFocus:E||!1,persistLabel:!!e.persistLabel,dwgRefreshEnabled:e.dwgRefreshEnabled,passwordManagerHint:O,showPasswordByDefault:w,autofillOrUserInputHandled:R,showPasswordVariant:L,onUserInputKeyDown:N}),i&&F);if(!i)return k;const U=(0,n.default)(y,{"register-form__name-field":"email"!==g&&"password"!==g,"register-form__field":"email"===g||"password"===g});return a.default.createElement("div",{className:U},T&&a.default.createElement("label",{className:"register-form__field-label",htmlFor:C},T),k)};const T=(e,t)=>t&&e?c.AuthTextInputType.TEXT:c.AuthTextInputType.PASSWORD;t.AuthTextField.displayName="AuthTextField"})),define("metaserver/static/js/auth/common/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthFormVariant=t.AuthButtonVariant=t.AuthTextInputAutoComplete=t.AuthTextInputType=void 0,(function(e){e.EMAIL="email",e.PASSWORD="password",e.TEXT="text",e.NUMBER="number"})(t.AuthTextInputType||(t.AuthTextInputType={})),(function(e){e.USERNAME="username",e.NEW_PASSWORD="new-password",e.CURRENT_PASSWORD="current-password",e.FULL_NAME="name",e.FIRST_NAME="given-name",e.LAST_NAME="family-name",e.ON="on",e.OFF="off"})(t.AuthTextInputAutoComplete||(t.AuthTextInputAutoComplete={})),(function(e){e.BIG="big",e.SMALL="small",e.STANDARD="standard"})(t.AuthButtonVariant||(t.AuthButtonVariant={})),(function(e){e.PAPER_COMPACT="paper-compact",e.SMALL="small",e.STANDARD="standard",e.DIG20="dig20"})(t.AuthFormVariant||(t.AuthFormVariant={}))})),define("metaserver/static/js/auth/common/inputs/checkbox",["require","exports","tslib","dompurify","react","classnames","metaserver/static/js/auth/common/error","metaserver/static/js/auth/common/utils","metaserver/static/js/auth/common/types","@dropbox/dig-components/form_row","@dropbox/dig-components/controls","@dropbox/dig-icons","@dropbox/dig-icons/assets"],(function(e,t,r,n,a,o,i,s,l,c,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthCheckbox=void 0,n=r.__importDefault(n),a=r.__importStar(a),o=r.__importDefault(o);const m=e=>{const{label:t,htmlFor:r,unsafeLabelHTML:o}=e;return t?a.default.createElement("label",{htmlFor:r,className:"checkbox_label"},a.default.createElement("span",null,t)):o?a.default.createElement("label",{htmlFor:r,className:"checkbox_label"},a.default.createElement("span",{dangerouslySetInnerHTML:{__html:n.default.sanitize(o)}})):null},g=e=>{const{name:t,error:r,label:o,onChange:i,className:s,checked:l,id:g,errorId:h,uxaEventName:f,disabled:_,autoFocus:v}=e,E=r&&(r.message_text||r.message_html);return a.default.createElement("div",{className:"auth__checkbox-row"},a.default.createElement(c.FormRow,{variant:"control"},a.default.createElement(u.Checkbox,{className:s,name:t,id:g,onChange:i,checked:l,"aria-checked":l,"aria-invalid":E?"true":"false","aria-describedby":h,"data-uxa-log":f,disabled:_,autoFocus:v}),a.default.createElement(m,{htmlFor:g,label:o})),a.default.createElement("div",{id:h,"aria-live":"polite","aria-atomic":"true"},E&&a.default.createElement(c.FormHelperText,{variant:"alert"},a.default.createElement(d.UIIcon,{src:p.FailLine,size:"small"}),(null==r?void 0:r.message_html)?a.default.createElement("span",{dangerouslySetInnerHTML:{__html:n.default.sanitize(r.message_html)}}):a.default.createElement("span",null,null==r?void 0:r.message_text))))};t.AuthCheckbox=e=>{const{checked:t,className:r,disabled:n,error:c,inline:u,label:d,maestroStyle:p,name:h,onChange:f,unsafeLabelHTML:_,variant:v,uxaEventName:E}=e,S=(0,a.useMemo)(()=>(0,s.generateId)(h),[h]),b=(0,a.useMemo)(()=>(0,s.genErrorId)(S),[S]),I=c&&(c.message_text||c.message_html);if(v===l.AuthFormVariant.DIG20)return a.default.createElement(g,Object.assign({},e,{id:S,errorId:b}));const T=(0,o.default)("checkbox",v,r,{"checkbox-inline":u});let y=a.default.createElement("input",{type:"checkbox",id:S,name:h,checked:t,onChange:f,disabled:n,"aria-invalid":I?"true":"false","aria-describedby":b,"data-uxa-log":E});p&&(y=a.default.createElement("label",{className:"maestro_checkbox",htmlFor:S},y,a.default.createElement("span",null)));const O=a.default.createElement(i.AuthError,{error:c,errorId:b});return a.default.createElement("div",{className:T},!p&&O,y,a.default.createElement(m,{htmlFor:S,label:d,unsafeLabelHTML:_}),p&&O)},t.AuthCheckbox.displayName="AuthCheckbox"})),define("metaserver/static/js/auth/common/stats",["require","exports","tslib","metaserver/static/js/clean/analytics","metaserver/static/js/core/browser","metaserver/static/js/core/browser_detection","metaserver/static/js/core/exception","metaserver/static/js/auth/login/types","metaserver/static/js/metrics/index","metaserver/static/js/ux_analytics/utils","typescript/component_libraries/dwg-components/src/types/index"],(function(e,t,r,n,a,o,i,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logExplicitExposure=t.displayEvent=t.clickEvent=t.logUXAnalytics=t.logToAMP=t.getPagePathTag=t.ImplicitTOSLogger=t.GoogleAmpLogger=t.GoogleOneTapAmpLogger=t.MagicLinkAmpLogger=t.AppleUXAnalyticsLogger=t.GoogleUXAnalyticsLogger=t.EmailAuthUXAnalyticsLogger=t.ProgressiveAmpLogger=t.ProgressiveUXAnalyticsLogger=t.AuthUXAnalyticsLogger=t.AuthAMPLogger=t.AuthType=void 0,a=r.__importStar(a),o=r.__importStar(o);var d,p,m,g;(function(e){e.CREDENTIALS="email",e.GOOGLE="google_auth",e.GOOGLE_ONE_TAP="google_one_tap",e.APPLE="apple_auth",e.MAGIC_LINK="magic_link"})(d=t.AuthType||(t.AuthType={})),(function(e){e.GOOGLE_LOGIN_START="google_login_start",e.GOOGLE_LOGIN_SUCCEEDED="google_login_succeeded",e.GOOGLE_LOGIN_REQUIRES_TWO_FACTOR="google_login_requires_two_factor",e.GOOGLE_LOGIN_FAILED="google_login_failed",e.GOOGLE_SIGNUP_START="google_signup_start",e.GOOGLE_SIGNUP_SUCCEEDED="google_signup_succeeded",e.GOOGLE_SIGNUP_FAILED="google_signup_failed"})(p||(p={})),(function(e){e.EMAIL_LOGIN_START="email_login_start",e.EMAIL_SPLIT_SIGNUP_CONTINUE="email_split_signup_continue",e.EMAIL_LOGIN_SUCCEEDED="email_login_succeeded",e.EMAIL_LOGIN_REQUIRES_TWO_FACTOR="email_login_requires_two_factor",e.EMAIL_LOGIN_REDIRECT="email_login_redirect",e.EMAIL_LOGIN_FAILED="email_login_failed",e.EMAIL_SIGNUP_START="email_signup_start",e.EMAIL_SIGNUP_SUCCEEDED="email_signup_succeeded",e.EMAIL_SIGNUP_FAILED="email_signup_failed",e.EMAIL_2FA_VWC_START="email_2fa_vwc_start",e.EMAIL_2FA_VWC_SUCCESS="email_2fa_vwc_success",e.EMAIL_2FA_VWC_SUBMISSION="email_2fa_vwc_submit",e.EMAIL_2FA_VWC_ERROR="email_2fa_vwc_error",e.EMAIL_2FA_VWC_SUCCESS_CREDENTIALS_ERROR="email_2fa_vwc_success_credentials_error"})(m||(m={})),(function(e){e.ENTER_EMAIL_CONTINUE="enter_email_continue",e.ENTER_EMAIL_CONTINUE_SSO="enter_email_continue_sso",e.LOGIN_SSO_USER="login_sso_user",e.ENTER_EMAIL="enter_email",e.REGISTER_ENTER_ACCOUNT_DETAILS="register_enter_account_details",e.LOGIN_ENTER_PASSWORD="login_enter_password",e.EMAIL_SUBMITTED_WITH_PASSWORD_AUTOFILL="email_submitted_with_password_autofill"})(g||(g={}));const h=new Set(["form_error","user_exists","access_denied","tfa_required","sso_required","emails_do_not_match_redirect"]),f=new Set(["enable_twofactor_required","emails_do_not_match","emails_do_not_match_redirect","not_verified","email_not_verified","google_login_not_allowed","access_denied","disabled_account","tos_required","sso_required","tfa_required","requires_password","requires_twofactor","tos_required","invalid_token","missing_email","unsupported_platform","unverified_email","server_error","disabled_user","user_already_invited_to_team","no_email_in_response","requires_password_on_first_link","apple_login_not_allowed","apple_login_not_allowed_for_teams","user_cancelled_authorize"]);function _(e){return{url:a.get_href(),remember_me:e.remember_me?e.remember_me.toString():void 0,pair_user:e.pair_user?e.pair_user.toString():void 0,err_msg:e.err_msg?e.err_msg:void 0}}function v(e,t){return e&&t.has(e)?e:"unknown"}function E(){const e=[[o.chrome,"chrome"],[o.edge,"edge"],[o.mozilla,"firefox"],[o.msie,"msie"],[o.safari,"safari"]];let t="other";for(const[r,n]of e)if(r){t=n;break}return t}t.AuthAMPLogger={logSignupIntent(e){I("signup/intent",{},1),e&&I("signup/intent/experiments",Object.assign({},e),1)},logSignupAttempt(e){I("signup/attempt",{authType:e},1)},logSignupResponse(e,t,r,n){"funcaptcha_response"!==r?t?(I("signup/success",{authType:e},1),n&&I("signup/success/experiments",Object.assign({authType:e},n),1)):(I("signup/success",{authType:e},0),I("signup/failure",{authType:e,error:v(r,h)},1),n&&(I("signup/success/experiments",Object.assign({authType:e},n),0),I("signup/failure/experiments",Object.assign({authType:e,error:v(r,h)},n),1))):I("signup/failure",{authType:e,error:r},1)},logLoginIntent(e){I("login/intent",{loginType:e||"normal"},1)},logLoginAttempt(e,t){I("login/attempt",{authType:e,loginType:t||"normal"},1)},logCredentialsLoginResponse(e,t){const r=d.CREDENTIALS,n=e||"normal";if("funcaptcha_response"!==t)if(t===s.LoginResponseStatus.OK||t===s.LoginResponseStatus.TWOFACTOR)I("login/success",{authType:r,loginType:n},1);else{let e;switch(t){case s.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:e="tos_required";break;case s.LoginResponseStatus.SSO:e="sso_required";break;case s.LoginResponseStatus.TWOFACTOR_REQUIRED:e="enable_twofactor_required";break;case s.LoginResponseStatus.RATELIMIT:e="rate_limited";break;case s.LoginResponseStatus.EXPIRED:e="login_expired";break;case s.LoginResponseStatus.PASSWORD_EXPIRED:e="password_expired";break;case s.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:e="password_descryption_error";break;case s.LoginResponseStatus.ERROR:e="generic_error";break;case"form_error":e=t;break;default:e="unknown"}I("login/success",{authType:r,loginType:n},0),I("login/failure",{authType:r,loginType:n,error:e},1)}else I("login/failure",{authType:r,loginType:n,error:t},1)},logMagicLinkLoginResponse(e,t){e||"tfa_required"===t?I("login/success",{authType:d.MAGIC_LINK,loginType:"normal"},1):(I("login/success",{authType:d.MAGIC_LINK,loginType:"normal"},0),I("login/failure",{authType:d.MAGIC_LINK,loginType:"normal",error:null!=t?t:"unknown"},1))},logThirdPartyLoginResponse(e,t,r,n){const a=t||"normal";r||"tfa_required"===n?I("login/success",{authType:e,loginType:a},1):(I("login/success",{authType:e,loginType:a},0),I("login/failure",{authType:e,loginType:a,error:v(n,f)},1))},log2faResponse(e,t){const r=e||"normal";if(t===s.LoginResponseStatus.OK)I("2fa/success",{loginType:r},1);else{let e;switch(t){case s.LoginResponseStatus.REQUIRES_ROLE:e="requires_role";break;case s.LoginResponseStatus.EXPIRED:e="twofactor_expired";break;case s.LoginResponseStatus.INVALID_CREDENTIALS:e="invalid_credentials";break;case s.LoginResponseStatus.ERROR:e="generic_error";break;case"u2f_error":case"code_error":e=t;break;default:e="unknown"}I("2fa/success",{loginType:r},0),I("2fa/failure",{loginType:r,error:e},1)}}},t.AuthUXAnalyticsLogger={logSignupModalShown(e,t={}){T("signup_modal_shown",Object.assign({url:a.get_href(),kind:e},t))},logLoginModalShown(e,t={}){T("login_modal_shown",Object.assign({url:a.get_href(),kind:e},t))},logSignupModalDismissed(e){T("signup_modal_dismissed",{url:a.get_href(),kind:e})},logLoginModalDismissed(e){T("login_modal_dismissed",{url:a.get_href(),kind:e})},logRecoverableErrorShown(){T("login_recoverable_error_shown",{url:a.get_href()})},logDisabledErrorShown(){T("login_disabled_error_shown",{url:a.get_href()})},logRecoverableErrorDismissed(){T("login_recoverable_error_dismissed",{url:a.get_href()})},logDisabledErrorDismissed(){T("login_disabled_error_dismissed",{url:a.get_href()})}},t.ProgressiveUXAnalyticsLogger={logEnterEmailContinue(){y(g.ENTER_EMAIL_CONTINUE)},logEnterEmailContinueSSO(){y(g.ENTER_EMAIL_CONTINUE_SSO)},logEmailRecognizedAsSSO(){O(g.LOGIN_SSO_USER,!0)},logEnterEmail(){O(g.ENTER_EMAIL,!0)},logRegisterEnterAccountDetails(){O(g.REGISTER_ENTER_ACCOUNT_DETAILS,!0)},logLoginEnterPassword(){O(g.LOGIN_ENTER_PASSWORD,!0)},logEmailSubmittedWithPasswordAutofill(){O(g.EMAIL_SUBMITTED_WITH_PASSWORD_AUTOFILL,!0)}},t.ProgressiveAmpLogger={logCheckUserWithEmailExistsError(){I("progressive_check_user_with_email_exists_error",{},1)},logUnexpectedSSOLoginResponseStatus(e){I("progressive_unexpected_sso_login_response_status",{status:e},1)}},t.EmailAuthUXAnalyticsLogger={logLoginStart(){y(m.EMAIL_LOGIN_START)},logSplitSignupContinue(){y(m.EMAIL_SPLIT_SIGNUP_CONTINUE)},logLoginResponse(e){switch(e.status){case s.LoginResponseStatus.OK:O(m.EMAIL_LOGIN_SUCCEEDED,!0);break;case s.LoginResponseStatus.TWOFACTOR:O(m.EMAIL_LOGIN_REQUIRES_TWO_FACTOR,!0);break;case s.LoginResponseStatus.TWOFACTOR_REQUIRED:case s.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:case s.LoginResponseStatus.EXPIRED:case s.LoginResponseStatus.SSO:O(m.EMAIL_LOGIN_REDIRECT,!0);break;default:O(m.EMAIL_LOGIN_FAILED,!0)}},logLoginError(){O(m.EMAIL_LOGIN_FAILED,!0)},logSignupStart(){y(m.EMAIL_SIGNUP_START)},logSignupResponse(){O(m.EMAIL_SIGNUP_SUCCEEDED,!0)},logSignupError(){O(m.EMAIL_SIGNUP_FAILED,!0)},logEmailVerifyWithCodeStart(){O(m.EMAIL_2FA_VWC_START,!0)},logEmailVerifyWithCodeSuccess(){O(m.EMAIL_2FA_VWC_SUCCESS,!0)},logEmailVerifyWithCodeSubmission(){O(m.EMAIL_2FA_VWC_SUBMISSION,!0)},logEmailVerifyWithCodeError(){O(m.EMAIL_2FA_VWC_ERROR,!0)},logEmailVerifyWithCodeSuccessCredentialsError(){O(m.EMAIL_2FA_VWC_SUCCESS_CREDENTIALS_ERROR,!0)}},t.GoogleUXAnalyticsLogger={logLoginStart(){y(p.GOOGLE_LOGIN_START)},logLoginResponse(e){e.success?O(p.GOOGLE_LOGIN_SUCCEEDED,!0):"tfa_required"===e.err_msg?O(p.GOOGLE_LOGIN_REQUIRES_TWO_FACTOR,!0):O(p.GOOGLE_LOGIN_FAILED,!0)},logSuccessfulLogin(){O(p.GOOGLE_LOGIN_SUCCEEDED,!0)},logSuccessfulLoginTfaRequired(){O(p.GOOGLE_LOGIN_REQUIRES_TWO_FACTOR,!0)},logUnsuccessfulLogin(){O(p.GOOGLE_LOGIN_FAILED,!0)},logSignupStart(){y(p.GOOGLE_SIGNUP_START)},logSignupResponse(e,t){O(e?p.GOOGLE_SIGNUP_SUCCEEDED:p.GOOGLE_SIGNUP_FAILED,!0)}},t.AppleUXAnalyticsLogger={logLoginStart(){T("sia_login_start",{url:a.get_href()})},logLoginResponse(e){e.success?T("sia_login_succeeded",_(e)):"tfa_required"===e.err_msg?T("sia_login_requires_two_factor",_(e)):"requires_password_on_first_link"===e.err_msg?T("sia_login_requires_password",_(e)):T("sia_login_failed",_(e))}},t.MagicLinkAmpLogger={logMagicLinkRequestFailure(e){I("magic_link_request_failure",{error:e},1)},logMagicLinkRequestSuccess(){I("magic_link_request_success",{},1)},logMagicLinkEmptyFingerprint(e){I("magic_link_empty_fingerprint",{surface:e},1)}},t.GoogleOneTapAmpLogger={logOneTapNotShown(e){I("google_onetap_not_shown",{error:e},1)},logOneTapShown(){I("show_google_onetap",{},1)},logAuthType(e){I("authType",{selectBy:e},1)},logScriptLoadError(){I("google_onetap_script_load_error",{},1)},logScriptLoadSuccess(){I("google_onetap_script_load_success",{},1)},logCredentialsDecodeError(){I("google_onetap_credentials_decode_error",{},1)}},t.GoogleAmpLogger={logVerificationAttempt(){I("google/verification/attempt",{},1)},logVerificationResult(e,t){e?I("google/verification/success",{},1):(I("google/verification/success",{},0),I("google/verification/fail",{error:v(t,h)},1))}},t.ImplicitTOSLogger={logImplicitTOSUXVariantsSuccess(){I("implicit_tos_ux_variants_success",{},1)},logImplicitTOSUXVariantsError(e){I("implicit_tos_ux_variants_error",{error:e},1)},logImplicitTOSUXVariantsTimeout(){I("implicit_tos_ux_variants_timeout",{},1)},logImplicitTOSUXVariantsMismatch(e,t){I("implicit_tos_ux_variants_mismatch",{propVariant:e,asyncVariant:t},1)},logImplicitTOSGatingClientError(e){I("implicit_tos_gating_client_error",{error:e},1)}};const S=new Set(["/scl/fi/","/scl/fo/","/s/","/sh/","/transfer/","/family/join/","/referrals/","/sc/","/request/"]);function b(){let e=a.get_pathname();S.forEach(t=>{e.includes(t)&&(e=t)});const t=e.split("/");return u.LocaleCodes.forEach(r=>{t[1]===r&&(e=2===t.length?"/":e.replace(r+"/",""))}),e}function I(e,t,r=1){try{(0,l.getMetricsReporter)().createStats({ns:"web_auth",name:e},Object.assign(Object.assign({},t),{browser:E(),pagePath:b()})).record(r)}catch(r){(0,i.reportException)({err:r,severity:i.SEVERITY.NONCRITICAL,tags:["web_auth_amp_logging","acquisition_eng"],exc_extra:Object.assign({metricName:e},t)})}}function T(e,t){n.UXAnalyticsLogger.log(e,t)}function y(e){let t=document.createElement("button");t.setAttribute("data-uxa-log",e),document.body.appendChild(t),t.style.visibility="hidden";let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(r),document.body.removeChild(t)}function O(e,t){t?(0,c.dispatchDialogOpened)({element_id:e}):(0,c.dispatchDialogClosed)({element_id:e})}t.getPagePathTag=b,t.logToAMP=I,t.logUXAnalytics=T,t.clickEvent=y,t.displayEvent=O,t.logExplicitExposure=function(t,n){return r.__awaiter(this,void 0,void 0,(function*(){try{const{getGatingClientSingleton:a}=yield new Promise((t,r)=>{e(["metaserver/static/js/stormcrow/gating_factory"],t,r)}).then(r.__importStar),o=a(),i={stormcrowVariantInfo:{feature:t,variant:n}};o.logExposure(i)}catch(e){const r=e.toString();I(`${t}_explicit_log_error`,{error:r},1),(0,i.reportException)({err:r,severity:i.SEVERITY.NONCRITICAL,tags:["susi","sc_gating_client"]})}}))}})),define("metaserver/static/js/auth/register/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormEvent=void 0,(function(e){e.GOOGLE_REGISTER_CLICK="GOOGLE_REGISTER_CLICK",e.GOOGLE_REGISTER_SUCCESS="GOOGLE_REGISTER_SUCCESS",e.REGISTER_CLICK="REGISTER_CLICK",e.REGISTER_IMMEDIATE_SUCCESS="REGISTER_IMMEDIATE_SUCCESS"})(t.RegisterFormEvent||(t.RegisterFormEvent={}))})),define("metaserver/static/js/auth/login/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginFormEvent=t.TwoFactorResendResponse=t.LoginResponseStatus=t.DomainCaptureState=t.SsoState=t.SecurityKeyState=t.TwoFactorType=t.LoginRole=void 0,(function(e){e.ROLE_WORK="work",e.ROLE_PERSONAL="personal",e.ROLE_PHOTOS="photos",e.ROLE_BOTH="both"})(t.LoginRole||(t.LoginRole={})),(function(e){e[e.EMAIL=0]="EMAIL",e[e.SMS=1]="SMS",e[e.AUTHENTICATOR=2]="AUTHENTICATOR",e[e.SEC_KEY=3]="SEC_KEY"})(t.TwoFactorType||(t.TwoFactorType={})),(function(e){e[e.LOADING=0]="LOADING",e[e.FOUND=1]="FOUND",e[e.NOT_FOUND=2]="NOT_FOUND"})(t.SecurityKeyState||(t.SecurityKeyState={})),(function(e){e.OFF="none",e.OPTIONAL="optional",e.REQUIRED="required"})(t.SsoState||(t.SsoState={})),(function(e){e[e.OFF=0]="OFF",e[e.INVITED_ONLY=1]="INVITED_ONLY",e[e.ALL=2]="ALL"})(t.DomainCaptureState||(t.DomainCaptureState={})),(function(e){e.DEVICE_LIMIT="DEVICE_LIMIT",e.OK="OK",e.SSO="SSO",e.TWOFACTOR="TWOFACTOR",e.TWOFACTOR_REQUIRED="TWOFACTOR_REQUIRED",e.RATELIMIT="RATELIMIT",e.PASSWORD_EXPIRED="PASSWORD_EXPIRED",e.EXPIRED="EXPIRED",e.ERROR="ERROR",e.REQUIRES_ROLE="REQUIRES_ROLE",e.INVALID_CREDENTIALS="INVALID_CREDENTIALS",e.PASSWORD_DECRYPTION_ERROR="PASSWORD_DECRYPTION_ERROR",e.TOS_SIGNATURE_REQUIRED="TOS_SIGNATURE_REQUIRED"})(t.LoginResponseStatus||(t.LoginResponseStatus={})),(function(e){e.OK="OK",e.RATELIMIT="RATELIMIT",e.UNREACHABLE="UNREACHABLE",e.EXPIRED="EXPIRED",e.BADCARRIER="BADCARRIER",e.INVALIDNUMBER="BADCARRIER",e.NOTAMOBILE="BADCARRIER"})(t.TwoFactorResendResponse||(t.TwoFactorResendResponse={})),(function(e){e.LOGIN_CLICK="LOGIN_CLICK",e.LOGIN_IMMEDIATE_SUCCESS="LOGIN_IMMEDIATE_SUCCESS",e.GOOGLE_LOGIN_CLICK="GOOGLE_LOGIN_CLICK",e.GOOGLE_LOGIN_SUCCESS="GOOGLE_LOGIN_SUCCESS",e.APPLE_LOGIN_CLICK="APPLE_LOGIN_CLICK",e.APPLE_LOGIN_SUCCESS="APPLE_LOGIN_SUCCESS"})(t.LoginFormEvent||(t.LoginFormEvent={}))})),define("metaserver/static/js/auth/common/utils",["require","exports","tslib","metaserver/static/js/auth/login/types","metaserver/static/js/auth/register/types","metaserver/static/js/modules/constants/page_load","metaserver/static/js/core/i18n","metaserver/static/js/core/notify","metaserver/static/js/core/uri","metaserver/static/js/form_util/name_parser","metaserver/static/js/clean/marketing_tracker"],(function(e,t,r,n,a,o,i,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pushMarketingEvent=t.notifyCaptchaConnectionError=t.notifyCaptchaNotLoaded=t.twoFactorRecoveryUrl=t.getFormattedName=t.lastNameGoesFirst=t.genErrorId=t.generateId=void 0,c=r.__importDefault(c);t.generateId=e=>e+Math.random().toString().slice(2);t.genErrorId=e=>`${e}__input-error`;const d=["ja","ko","zh"];t.lastNameGoesFirst=()=>d.includes(o.PAGE_LOCALE.slice(0,2));t.getFormattedName=(e,r,n)=>{if(!n)return[e,r];const[a,o]=c.default.splitFullName(e);return(0,t.lastNameGoesFirst)()?o?[o,a]:[e,r]:[a,o]};t.twoFactorRecoveryUrl=(e,t)=>{const r=new l.URI({path:"/twofactor_recovery"});return e&&r.updateQuery({remember_me:e.toString()}),t&&!["/",""].includes(t)&&r.updateQuery({cont:t}),r.toString()};t.notifyCaptchaNotLoaded=()=>{s.Notify.warning(i.intl.formatMessage({id:"977N0X",defaultMessage:"Your browser appears to be blocking dropboxcaptcha.com, which is required for authentication. To resolve this issue, please update any anti-virus or ad-blocking software settings to allow connections to dropboxcaptcha.com."}))};t.notifyCaptchaConnectionError=()=>{s.Notify.warning(i.intl.formatMessage({id:"6XamvA",defaultMessage:"The CAPTCHA response was not verified successfully, please try again."}))};t.pushMarketingEvent=(e,t)=>{let r;switch(e){case n.LoginFormEvent.LOGIN_CLICK:case n.LoginFormEvent.GOOGLE_LOGIN_CLICK:case n.LoginFormEvent.APPLE_LOGIN_CLICK:case a.RegisterFormEvent.REGISTER_CLICK:case a.RegisterFormEvent.GOOGLE_REGISTER_CLICK:if(!t)return;r={form_event:e},u.MarketingTracker.tryPushEvent("conversionDataReady",u.EventTypeEnum.Link,r);break;case n.LoginFormEvent.LOGIN_IMMEDIATE_SUCCESS:case n.LoginFormEvent.GOOGLE_LOGIN_SUCCESS:case n.LoginFormEvent.APPLE_LOGIN_SUCCESS:r=(0,u.getGAEventData)(u.MARKETING_LOGIN_EVENT,u.MARKETING_LOGIN_EVENT),u.MarketingTracker.tryPushEvent(u.MARKETING_LOGIN_EVENT,u.EventTypeEnum.Link,r);break;case a.RegisterFormEvent.REGISTER_IMMEDIATE_SUCCESS:case a.RegisterFormEvent.GOOGLE_REGISTER_SUCCESS:r=(0,u.getGAViewData)(u.MARKETING_REGISTER_EVENT,"ga_register_pageview","/virtual/ga_register_pageview"),u.MarketingTracker.tryPushEvent(u.MARKETING_REGISTER_EVENT,u.EventTypeEnum.View,r)}}})),define("metaserver/static/js/clean/web_register_logging_data",["require","exports","tslib","metaserver/static/js/core/browser","metaserver/static/js/core/transport/query_string_helpers"],(function(e,t,r,n,a){"use strict";function o(){return{signupUrl:n.get_href(),signupReferrer:document.referrer,trackingParams:(0,a.getTrackingParamsAsJSON)()}}Object.defineProperty(t,"__esModule",{value:!0}),t.setWebRegisterLoggingData=t.getWebRegisterLoggingData=void 0,n=r.__importStar(n),t.getWebRegisterLoggingData=o,t.setWebRegisterLoggingData=function(e={}){const{signupUrl:t,signupReferrer:r,trackingParams:n}=o(),a={signup_url:t,signup_referrer:r,tracking_params:n};return Object.assign(Object.assign({},e),a)}})),define("metaserver/static/js/components/password_strength_meter",["require","exports","tslib","react","classnames","metaserver/static/js/core/i18n","metaserver/static/js/components/ui/css","metaserver/static/js/clean/ui/bubble_dropdown_v2","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/core/cancelable_promise","metaserver/static/js/clean/ui/sticky_position","@dropbox/dig-components/tooltips","typescript/component_libraries/dwg-components/src/components/dwg-tooltip/index","typescript/component_libraries/dwg-components/src/atoms/dwg-box/index","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","metaserver/static/js/core/browser_detection"],(function(e,t,r,n,a,o,i,s,l,c,u,d,p,m,g,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordStrengthMeter=void 0,n=r.__importDefault(n),a=r.__importDefault(a);class f extends n.default.Component{constructor(t){super(t),this.setZxcvbn=({default:e})=>{this.setState({zxcvbn:e})},this.getPasswordScore=e=>this.state.zxcvbn?this.state.zxcvbn(e).score:0,this.renderPasswordDots=(e,t)=>{const{isDigEnabled:r,bubblePosition:a,bubbleClassName:i,bubbleDescription:l}=this.props,c=l||_,d="password_strength_meter_tooltip";return r?n.default.createElement(b,{score:e,title:t,description:c,className:i}):n.default.createElement(n.default.Fragment,null,n.default.createElement(S,{score:e}),n.default.createElement(s.BubbleDropdown,{position:a||u.StickyPosition.RIGHT,isContentFocusable:!1,targetButton:n.default.createElement("button",{type:"button","aria-label":o.intl.formatMessage({id:"bjXtDK",defaultMessage:"Show more information about password strength."}),"aria-describedby":d,"aria-controls":d,className:"password-bubble__button"}),className:i},n.default.createElement("div",{id:d,role:"tooltip",className:"password-bubble__content"},n.default.createElement("div",{className:"password-bubble__title"},t||""),n.default.createElement("div",{className:"password-bubble__desc"},c))))},this.state={},t.zxcvbnPostTti?(0,l.waitForTTI)().then(()=>{this.zxcvbnPromise=(0,c.makeCancelable)(new Promise((t,r)=>{e(["zxcvbn"],t,r)}).then(r.__importStar)),this.zxcvbnPromise.then(this.setZxcvbn)}):(this.zxcvbnPromise=(0,c.makeCancelable)(new Promise((t,r)=>{e(["zxcvbn"],t,r)}).then(r.__importStar)),this.zxcvbnPromise.then(this.setZxcvbn))}componentWillUnmount(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()}getTitle(e){return["",o.intl.formatMessage({id:"i/ragh",defaultMessage:"Weak"}),o.intl.formatMessage({id:"GwYES8",defaultMessage:"So-so"}),o.intl.formatMessage({id:"Yd7c8F",defaultMessage:"Good"}),o.intl.formatMessage({id:"kbsmZh",defaultMessage:"Great!"})][e]}render(){const{password:e,className:t}=this.props,r=e.length?Math.max(1,this.getPasswordScore(e)):0,i=this.getTitle(r);if(this.props.dwgRefreshEnabled){const e=(0,h.is_mobile_or_tablet)();return n.default.createElement(m.DWGBox,{className:"password-input-container--dwg-refresh"},n.default.createElement(m.DWGBox,{className:(0,a.default)("password-input-meter",{[`${t}`]:t})},n.default.createElement(p.DWGTooltip,{content:n.default.createElement(E,{headline:i,mobile:e,content:this.props.bubbleDescription||_}),id:"password-strength-meter-tooltip",placement:e?"top-end":"right"},n.default.createElement(v,{score:r},n.default.createElement(S,{score:r})))))}return n.default.createElement("div",{className:(0,a.default)("password-input-meter",{[`${t}`]:t}),"aria-label":o.intl.formatMessage({id:"7h/xn+",defaultMessage:"Password strength"})},n.default.createElement("span",{"aria-live":"assertive",className:"ax-visually-hidden"},i),this.renderPasswordDots(r,i))}}f.displayName="PasswordStrengthMeterComponent";const _=o.intl.formatMessage({id:"6SDr7W",defaultMessage:"Passwords must be 6 characters or more. Good passwords are hard to guess and use uncommon words, numbers, symbols, and uppercase letters."}),v=n.default.forwardRef((e,t)=>{var{children:i,score:s}=e,l=r.__rest(e,["children","score"]);const c=0===s;return n.default.createElement(m.DWGBox,Object.assign({className:(0,a.default)("password-dots-container--dwg-refresh",{"password-dots-container-disabled--dwg-refresh":c}),ref:t,tabIndex:c?-1:0,alignItems:"center",padding:0,color:"standard",role:"button","aria-describedby":"password-strength-meter-tooltip","aria-disabled":c?"true":"false","aria-label":o.intl.formatMessage({id:"yTH4+p",defaultMessage:"Show more information about password strength"})},l),i)});v.displayName="TooltipRefreshButton";const E=e=>n.default.createElement(n.default.Fragment,null,n.default.createElement(m.DWGBox,{className:"tooltip-headline--dwg-refresh","aria-describedby":"password-strength-meter-tooltip"},n.default.createElement(g.DWGText,{fontSize:14,fontWeight:"medium",lineHeight:18,fontFamily:"atlas-grotesk"},e.headline)),!e.mobile&&n.default.createElement(g.DWGText,{fontSize:12,fontWeight:"regular",lineHeight:16,fontFamily:"atlas-grotesk"},e.content)),S=({score:e})=>n.default.createElement(n.default.Fragment,null,[4,3,2,1].map(t=>{const r=(0,a.default)({"password-input-dot":!0,"password-input-dot-selected--weak":e>=t&&e<=2,"password-input-dot-selected":e>=t});return n.default.createElement("div",{key:"password-input-dot-"+t,className:r})})),b=({score:e,description:t,title:r,className:a})=>{const o=r?`(${r}) ${t}`:`${t}`;return n.default.createElement(d.Tooltip,{title:o,placement:"right",className:a},n.default.createElement("span",{tabIndex:0},n.default.createElement(S,{score:e})))};t.PasswordStrengthMeter=(0,i.requireCssWithComponent)(f,["/static/metaserver/static/css/components/password_strength_meter-vfldJoBwE.css"])})),define("metaserver/static/js/google_one_tap/google_one_tap_platform",["require","exports","tslib","metaserver/static/js/core/browser_detection","metaserver/static/js/clean/raf_throttle","metaserver/static/js/google_one_tap/lib","metaserver/static/js/core/browser","metaserver/static/js/core/notify","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/stats","metaserver/static/js/google_one_tap/one_tap_tos","metaserver/static/js/fedramp/fedramp_util","metaserver/static/js/core/uri","metaserver/static/js/google_one_tap/google_one_tap_helpers","metaserver/static/js/auth/login/types","metaserver/static/js/auth/login/sso_utils","react","metaserver/static/js/google_one_tap/containers","metaserver/static/js/abuse/fingerprintjs_component","metaserver/static/js/signup_signin/helpers"],(function(e,t,r,n,a,o,i,s,l,c,u,d,p,m,g,h,f,_,v,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UseGsiState=t.initialize_module=t.GoogleOneTapPlatform=t.GoogleOneTapPlatformSingleton=void 0,i=r.__importStar(i);class S{constructor(){if(this.tosPromptShown=!1,this.googleIframeObserver=null,this.bodyClass="google-one-tap-displayed",this.tosBodyClass="google-one-tap-tos-displayed",this.currentContext="signin",this.isPromptClosed=!1,this.autoSignInEnabled=!1,this.initialPromptRender=!0,this.init=(e,t)=>{(!this.config&&e||t)&&(this.config=e,this.currentContext=e.context,this.autoSignInEnabled=this.autoSignInExperimentEnabled()&&!this.isFromLogout(),o.GSIEventManager.sendGSIEvent(o.GSIEvent.INITIALIZE_PLATFORM),e.context!==o.GSIEventManager.getGSIState().context&&this.updateStateContext(e.context),e.isInline&&(o.GSIEventManager.sendGSIEvent(o.GSIEvent.USE_INLINE_PROMPT),o.GSIEventManager.sendGSIEvent(o.GSIEvent.PROMPT_OPEN),document.body.addEventListener("focusin",this.handleFocusIn)),this.fingerprintJSRef=(0,m.initFingerprintJS)(),this.loadGSILibrary().then(this.initGSIClient),this.listenForContextChanges(),e.isMobile&&o.GSIEventManager.sendGSIEvent(o.GSIEvent.IS_MOBILE),this.autoSignInEnabled&&(window.onbeforeunload=e=>{o.GSIEventManager.getGSIState().tosPromptDisplayed&&google.accounts.id.revoke(this.userId,e=>{})}),this.fingerprintJSRef=(0,m.initFingerprintJS)())},this.handleScriptLoadError=()=>{c.GoogleOneTapAmpLogger.logScriptLoadError()},this.handleScriptLoad=()=>{c.GoogleOneTapAmpLogger.logScriptLoadSuccess()},this.loadGSILibrary=()=>{if(this.config.isTest)return(0,m.initTestMock)();const e=document.getElementsByTagName("head")[0],t=document.createElement("script");return t.type="text/javascript",t.async=!0,t.defer=!0,t.src="https://accounts.google.com/gsi/client",t.onerror=this.handleScriptLoadError,new Promise(r=>{t.onload=()=>{this.handleScriptLoad(),r()},e.insertBefore(t,e.firstChild)})},this.initGSIClient=()=>{this.config.clientId&&"undefined"!=typeof google&&(this.applyPendingContext(),o.GSIEventManager.clearPendingContext(),this.initContainerListeners())},this.displaySigButton=()=>{let e=null;const t=o.SIG_BUTTON_TEXT.CONTINUE_WITH;"signin"===this.currentContext?e=document.getElementById(o.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID):"signup"===this.currentContext&&(e=document.getElementById(o.DEFAULT_SIGNUP_BUTTON_CONTAINER_ID));const r=o.SIG_BUTTON_STYLES.get(this.config.pageName),n=this.buttonWidth?this.buttonWidth:(null==r?void 0:r.width)||350;if(e){if(this.refreshFormContainer&&!this.refreshSigWrapper){const t=document.createElement("div");t.classList.add("sig-wrapper--dwg-refresh"),e.appendChild(t),this.refreshSigWrapper=t}google.accounts.id.renderButton(this.refreshSigWrapper?this.refreshSigWrapper:e,{text:t,width:n,logo_alignment:r?r.logo_alignment:"left",locale:this.config.locale,click_listener:this.handleSiGClick})}},this.handleSiGClick=()=>{this.getBannerNode()&&this.removeBanner()},this.initContainerListeners=()=>{this.config.isInline&&!o.GSIEventManager.getGSIState().inlineContainerMounted||this.config.hidePromptOnInit||this.displayOneTapPrompt(),o.GSIEventManager.createGSIEventListener(o.GSIEvent.INLINE_CONTAINER_MOUNTED,this.displayOneTapPrompt),o.GSIEventManager.createGSIEventListener(o.GSIEvent.SHOW_PROMPT,this.displayOneTapPrompt),o.GSIEventManager.createGSIEventListener(o.GSIEvent.REMOVE_PROMPT,()=>{google.accounts.id.cancel()}),o.GSIEventManager.getGSIState().buttonContainerMounted&&(this.initGoogleAccount(),this.initRefreshResizeObserver(),this.displaySigButton()),this.resizeThrottle&&this.resizeObserver||o.GSIEventManager.createGSIEventListener(o.GSIEvent.BUTTON_CONTAINER_MOUNTED,this.initRefreshResizeObserver),o.GSIEventManager.createGSIEventListener(o.GSIEvent.BUTTON_CONTAINER_MOUNTED,this.displaySigButton)},this.getRefreshFormContainerWidth=e=>Math.floor(e.getBoundingClientRect().width),this.handleRefreshResize=()=>{this.buttonWidth=this.getRefreshFormContainerWidth(this.refreshFormContainer),this.displaySigButton()},this.getTOSMetadata=()=>{const e=(0,E.getTOSDataForType)(E.TOSType.UNIFIED_SUSI);return(null==e?void 0:e.tosMetadata)||void 0},this.initRefreshResizeObserver=()=>{let e=document.querySelector(".login-register-container--dwg-refresh");e||(e=document.querySelector(".unified-susi-na")),e&&(this.refreshFormContainer=e,this.buttonWidth=this.getRefreshFormContainerWidth(this.refreshFormContainer),this.resizeThrottle&&this.resizeObserver&&(this.resizeThrottle.cancelPending(),this.resizeObserver.disconnect()),this.resizeThrottle=new a.RafThrottle(()=>{this.handleRefreshResize()}),this.resizeObserver=new ResizeObserver(this.resizeThrottle.request),this.resizeObserver.observe(this.refreshFormContainer),o.GSIEventManager.createGSIEventListener(o.GSIEvent.BUTTON_CONTAINER_UNMOUNTED,this.removeRefreshResizeObserver),o.GSIEventManager.createGSIEventListener(o.GSIEvent.BUTTON_CONTAINER_UNMOUNTED,this.removeRefreshSigWrapper))},this.removeRefreshResizeObserver=()=>{this.resizeObserver&&this.resizeObserver.disconnect()},this.removeRefreshSigWrapper=()=>{this.refreshSigWrapper&&(this.refreshSigWrapper.remove(),this.refreshSigWrapper=void 0)},this.displayOneTapPrompt=()=>{this.shouldDisplayCopyBanner()&&this.initialPromptRender&&(this.initialPromptRender=!1,(0,c.logExplicitExposure)(`acq_susi_one_tap_copy_${"warp-page"===this.config.pageName?"homepage":"loginregister"}`,this.config.copyBannerVariant));const e=this.getPromptParentId(),t=e!==o.DEFAULT_ONE_TAP_PROMPT_WRAPPER&&!!document.getElementById(e||"");this.config.isInline&&!t||(this.shouldDisplayCopyBanner()&&(0,_.createCopyBanner)(this.config.copyBannerVariant),this.initGoogleAccount(),google.accounts.id.prompt(e=>{e.isDisplayMoment()&&this.handleDisplayMoment(e);const t=e.isNotDisplayed()||e.isSkippedMoment()||e.isDismissedMoment();let r="";if(e.isSkippedMoment()?(c.GoogleOneTapAmpLogger.logOneTapNotShown(e.getSkippedReason()),(0,c.displayEvent)(o.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0),e.getSkippedReason()===o.GoogleNotShownReason.USER_CANCEL&&(0,c.clickEvent)(o.GoogleOneTapEvent.DISMISS_GOOGLE_ONE_TAP)):e.isNotDisplayed()?(e.getNotDisplayedReason()!==o.GoogleNotShownReason.OPT_OUT_OR_NO_SESSION&&(0,c.displayEvent)(o.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0),c.GoogleOneTapAmpLogger.logOneTapNotShown(e.getNotDisplayedReason())):e.isDismissedMoment()&&(c.GoogleOneTapAmpLogger.logOneTapNotShown(e.getDismissedReason()),(0,c.displayEvent)(o.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0),r=e.getDismissedReason()),this.setPromptClosedState(t,r),o.GSIEventManager.getGSIState().isMobile&&!this.googleOneTapDisabledOverlay){this.googleOneTapDisabledOverlay=document.createElement("div"),this.googleOneTapDisabledOverlay.classList.add("google-one-tap-disabled-mobile-overlay");const e=this.getGoogleIframe();null==e||e.insertAdjacentElement("afterend",this.googleOneTapDisabledOverlay)}if(t){(0,c.displayEvent)(o.GoogleOneTapEvent.GOOGLE_ONE_TAP_NOT_SHOWN,!1),this.setOneTapHeightCssVar("0px",e.getSkippedReason()===o.GoogleNotShownReason.USER_CANCEL),this.stopObservingGoogleContainer(),document.body.classList.remove(this.bodyClass),this.googleOneTapDisabledOverlay&&this.googleOneTapDisabledOverlay.remove(),this.getBannerNode()&&e.getSkippedReason()===o.GoogleNotShownReason.USER_CANCEL&&this.removeBannerOnUserCancel()}else(0,c.displayEvent)(o.GoogleOneTapEvent.SHOW_GOOGLE_ONE_TAP,!0),(0,c.displayEvent)(o.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0)}))},this.handleDisplayMoment=e=>{var t,r;if(o.GSIEventManager.sendGSIEvent(o.GSIEvent.DISPLAY_MOMENT),e.isDisplayed()){this.setOneTapHeightCssVar(this.getOneTapIframeHeight()),this.observeGoogleIframe(),document.body.classList.add(this.bodyClass),this.config.pageName&&document.body.classList.add(this.config.pageName),this.config.isInline&&(n.safari?o.GSIEventManager.sendGSIEvent(o.GSIEvent.PROMPT_UI_READY):this.pollAndClearIframeFocus());const e=this.getBannerNode();e&&(null===(r=null===(t=this.getGoogleIframe())||void 0===t?void 0:t.parentElement)||void 0===r||r.addEventListener("transitionend",()=>{e.style.opacity="1"}))}},this.setPromptClosedState=(e,t)=>{this.isPromptClosed=e,e?o.GSIEventManager.sendGSIEvent(o.GSIEvent.PROMPT_CLOSE,{dismissReason:t}):o.GSIEventManager.sendGSIEvent(o.GSIEvent.PROMPT_OPEN)},this.listenForContextChanges=()=>{this.clearContextChangesListener(),o.GSIEventManager.createGSIEventListener(o.GSIEvent.CONTEXT_CHANGE_SIGNUP,this.handleContextChange),o.GSIEventManager.createGSIEventListener(o.GSIEvent.CONTEXT_CHANGE_SIGNIN,this.handleContextChange)},this.clearContextChangesListener=()=>{o.GSIEventManager.removeGSIEventListener(o.GSIEvent.CONTEXT_CHANGE_SIGNUP,this.handleContextChange),o.GSIEventManager.removeGSIEventListener(o.GSIEvent.CONTEXT_CHANGE_SIGNIN,this.handleContextChange)},this.applyPendingContext=()=>{o.GSIEventManager.getPendingContext()&&this.setCurrentContext(o.GSIEventManager.getPendingContext())},this.handleContextChange=()=>{const e=o.GSIEventManager.getGSIState().context;e!==this.currentContext&&(this.cancelTOS(),this.setCurrentContext(e),this.refreshGSIClient())},this.isFromLogout=()=>"logout"===new URLSearchParams(window.location.search).get("src"),this.autoSignInExperimentEnabled=()=>{var e;return"V1"===(null===(e=this.config)||void 0===e?void 0:e.autoSignInVariant)},this.refreshGSIClient=()=>{var e;o.GSIEventManager.getGSIState().gsiClientInitialized&&(o.GSIEventManager.sendGSIEvent(o.GSIEvent.RESET_DISPLAY_MOMENT),o.GSIEventManager.sendGSIEvent(o.GSIEvent.PROMPT_UI_NOT_READY),(null===(e=this.config)||void 0===e?void 0:e.isInline)&&"undefined"!=typeof google&&google.accounts.id.cancel(),this.initGSIClient())},this.googleSignInCallback=({select_by:e,credential:t})=>r.__awaiter(this,void 0,void 0,(function*(){c.GoogleOneTapAmpLogger.logAuthType(e);const r=o.BUTTON_AUTH_TYPES.includes(e);r||((0,c.clickEvent)(o.GoogleOneTapEvent.GOOGLE_ONE_TAP_CONTINUE),(0,c.displayEvent)("auto"===e?o.GoogleOneTapEvent.GOOGLE_ONE_TAP_VERIFICATION_AUTO_SUCCESS:o.GoogleOneTapEvent.GOOGLE_ONE_TAP_VERIFICATION_SUCCESS,!0)),o.GSIEventManager.sendGSIEvent(r?o.GSIEvent.USE_BUTTON_FLOW:o.GSIEvent.USE_ONE_TAP_FLOW),!(0,v.isTest)()&&this.fingerprintJSRef.current&&(yield this.fingerprintJSRef.current.getWrappedComponent().invokeFPJSIframeAndLog("",1500)),this.isButtonFlow=r,this.googleCredentials=t,this.selectBy=e,this.signIn(r)})),this.signIn=e=>{const t={googleCredentials:this.googleCredentials,select_by:this.selectBy,tos_signed:!1,visitorId:this.fingerprintJSRef.current?(0,v.get_visitor_id)(this.fingerprintJSRef.current)["visitor-id"]:void 0,pageName:this.config.pageName,additionalAuthParams:this.config.additionalAuthParams,webSigninTag:this.config.signinTag};(0,m.getIdentityClient)(t).then(t=>{var r,n,a;const u=(0,d.getFedrampRedirectUrlIfApplicable)(t.is_fedramp_user||!1,(null===(r=this.config)||void 0===r?void 0:r.loginContUrl)||o.DEFAULT_CONTINUATION_URL),m=t[".tag"];switch("tos_required"!==m&&(this.isButtonFlow?(c.GoogleUXAnalyticsLogger.logLoginStart(),c.AuthAMPLogger.logLoginAttempt(c.AuthType.GOOGLE,"normal")):c.AuthAMPLogger.logLoginAttempt(c.AuthType.GOOGLE_ONE_TAP,"auto"===this.selectBy?"auto":"normal")),m){case"success":this.logOneTapLoginResponse(!0,null,this.selectBy),e?c.GoogleUXAnalyticsLogger.logSuccessfulLogin():(0,c.displayEvent)("auto"===this.selectBy?o.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_AUTO_LOGIN_SUCCESS:o.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_LOGIN_SUCCESS,!0),s.Notify.success(l.intl.formatMessage({id:"/qL3on",defaultMessage:"Log in successful! Your browser will be redirected in a few seconds."})),i.redirect(u);break;case"requires_twofactor":{this.logOneTapLoginResponse(!1,"tfa_required",this.selectBy),e||(0,c.displayEvent)("auto"===this.selectBy?o.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_AUTO_LOGIN_SUCCESS:o.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_LOGIN_SUCCESS,!0);const r=new p.URI({path:"/verify_code"}).updateQuery({remember_me:t.remember_me.toString(),pair_user:t.pair_user.toString(),cont:u});i.redirect(r.toString());break}case"tos_required":o.GSIEventManager.sendGSIEvent(o.GSIEvent.TOS_PROMPT_OPEN),this.showTOSPrompt(e);break;case"enable_twofactor_required":{this.logOneTapLoginResponse(!1,m,this.selectBy);const e=new p.URI({path:"/twofactor"}).updateQuery({remember_me:t.remember_me.toString(),pair_user:t.pair_user.toString(),cont:u});i.redirect(e.toString());break}case"google_login_not_allowed":this.logOneTapLoginResponse(!1,m,this.selectBy),t.redirect_url?i.unsafeRedirect(t.redirect_url):(s.Notify.error(l.intl.formatMessage({id:"oW2LTj",defaultMessage:"Google Sign In is not allowed with this email."})),this.ssoChecker.checkSsoState((null===(n=t.profile)||void 0===n?void 0:n.email)||"",this.onSsoStateUpdate));break;case"sso_required":this.logOneTapLoginResponse(!1,m,this.selectBy),t.redirect_url?i.unsafeRedirect(t.redirect_url):window.location.href.includes("/login")&&o.GSIEventManager.sendGSIEvent(o.GSIEvent.SSO_REQUIRED,{email:null===(a=t.profile)||void 0===a?void 0:a.email});break;case"requires_password":{this.logOneTapLoginResponse(!1,m,this.selectBy);const e=new p.URI({path:"/show_password_form"}).updateQuery({remember_me:t.remember_me.toString(),pair_user:t.pair_user.toString(),cont:u});i.redirect(e.toString());break}default:this.logOneTapLoginResponse(!1,m,this.selectBy),s.Notify.error(l.intl.formatMessage({id:"9n1q0s",defaultMessage:"There was a problem completing this request. Please Try Again."}))}}).catch(e=>{this.logOneTapLoginResponse(!1,e[".tag"],this.selectBy),(0,m.handleClientError)(e)})},this.logOneTapLoginResponse=(e,t,r)=>{this.isButtonFlow?(c.AuthAMPLogger.logThirdPartyLoginResponse(c.AuthType.GOOGLE,"normal",e,t),"tfa_required"===t?c.GoogleUXAnalyticsLogger.logSuccessfulLoginTfaRequired():c.GoogleUXAnalyticsLogger.logUnsuccessfulLogin()):c.AuthAMPLogger.logThirdPartyLoginResponse(c.AuthType.GOOGLE_ONE_TAP,"auto"===r?"auto":"normal",e,t)},this.onSsoStateUpdate=(e,t)=>{t.user_sso_state!==g.SsoState.REQUIRED&&t.user_sso_state!==g.SsoState.OPTIONAL||o.GSIEventManager.sendGSIEvent(o.GSIEvent.SSO_REQUIRED,{email:e})},this.signUp=e=>{var t;const r={googleCredentials:this.googleCredentials,select_by:this.selectBy,tos_signed:!0,marketingOptedIn:e,referralCode:this.config.referralCode,referralSource:this.config.referralSource,emailHash:this.config.emailHash,webSignupTag:this.config.signupTag,additionalAuthParams:Object.assign(Object.assign({},this.config.additionalAuthParams||{}),{tos_variant:(null===(t=this.getTOSMetadata())||void 0===t?void 0:t.tos_variant)||void 0})};return(0,m.getIdentityClient)(r).then(e=>{var t;switch(e[".tag"]){case"success":{this.isButtonFlow?(c.AuthAMPLogger.logSignupResponse(c.AuthType.GOOGLE,!0,null,{dwgRefreshVariant:this.config.dwgRefreshVariant}),c.GoogleUXAnalyticsLogger.logSignupResponse(!0,null)):(c.AuthAMPLogger.logSignupResponse(c.AuthType.GOOGLE_ONE_TAP,!0,null,{dwgRefreshVariant:this.config.dwgRefreshVariant}),(0,c.displayEvent)(o.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_CREATION_SUCCESS,!0));const r=(0,d.getFedrampRedirectUrlIfApplicable)(e.is_fedramp_user||!1,(null===(t=this.config)||void 0===t?void 0:t.registerContUrl)||e.redirect_url||"/trial_first");return i.redirect(r),!0}default:return s.Notify.error(l.intl.formatMessage({id:"2q7GH0",defaultMessage:"There was a problem completing this request. Please Try Again."})),!1}}).catch(e=>(this.isButtonFlow?(c.AuthAMPLogger.logSignupResponse(c.AuthType.GOOGLE,!1,e[".tag"],{dwgRefreshVariant:this.config.dwgRefreshVariant}),c.GoogleUXAnalyticsLogger.logSignupResponse(!1,e[".tag"])):c.AuthAMPLogger.logSignupResponse(c.AuthType.GOOGLE_ONE_TAP,!1,e[".tag"],{dwgRefreshVariant:this.config.dwgRefreshVariant}),(0,m.handleClientError)(e),!1))},this.showTOSPrompt=e=>{if(!this.tosPromptShown){const t=e&&!this.config.isMobile,r=this.config.isInline||t?u.TOSModalVariant.V2:u.TOSModalVariant.V1;let n;r===u.TOSModalVariant.V2&&"signin"===this.currentContext&&(n=u.TOSModalVariant.V1),this.userId=(0,m.validateJWTAndGetUserId)(this.googleCredentials),(0,u.displayTOS)({modalVariant:this.shouldDisplayCopyBanner()?u.TOSModalVariant.NONE:r,animationVariant:this.shouldDisplayCopyBanner()?u.TOSModalVariant.NONE:n,onToggle:this.handleToggleTOS,onDismiss:this.handleDismissTOS,onSubmit:this.handleTOSSubmit,containerParentSelector:r===u.TOSModalVariant.V2?`${"signup"===this.currentContext?o.DEFAULT_ONE_TAP_INLINE_TOS_ID_REGISTER:o.DEFAULT_ONE_TAP_INLINE_TOS_ID_LOGIN}`:this.shouldDisplayCopyBanner()?o.DEFAULT_ONE_TAP_BANNER_TOS_WRAPPER:void 0,showMarketingOptIn:this.config.showMarketingOptIn,isImplicit:"V1"===this.config.implicitTOSVariant,googleCredentials:this.googleCredentials}),this.tosPromptShown=!0,document.body.classList.add(this.tosBodyClass)}},this.cancelTOS=()=>{o.GSIEventManager.sendGSIEvent(o.GSIEvent.TOS_PROMPT_CLOSE),this.tosPromptShown&&((0,u.unmountTOS)(),this.tosPromptShown=!1)},this.handleDismissTOS=()=>{(0,c.clickEvent)(o.GoogleOneTapEvent.GOOGLE_ONE_TAP_SIGNUP_DISMISS_TOS),this.cancelTOS(),document.body.classList.remove(this.tosBodyClass),this.autoSignInExperimentEnabled()?google.accounts.id.revoke(this.userId,e=>{this.autoSignInEnabled=!1,this.refreshGSIClient()}):this.refreshGSIClient()},this.handleToggleTOS=e=>{},this.handleTOSSubmit=e=>(this.isButtonFlow?(c.GoogleUXAnalyticsLogger.logSignupStart(),c.AuthAMPLogger.logSignupAttempt(c.AuthType.GOOGLE)):((0,c.clickEvent)(o.GoogleOneTapEvent.GOOGLE_ONE_TAP_SIGNUP_CLICK),c.AuthAMPLogger.logSignupAttempt(c.AuthType.GOOGLE_ONE_TAP)),this.signUp(e)),this.observeGoogleIframe=()=>{const e=this.getGoogleIframe();!this.googleIframeObserver&&e&&(this.googleIframeObserver=new MutationObserver(this.googleIframeObserverCallback),this.googleIframeObserver.observe(e,{attributes:!0}))},this.stopObservingGoogleContainer=()=>{var e;null===(e=this.googleIframeObserver)||void 0===e||e.disconnect(),this.googleIframeObserver=null},this.googleIframeObserverCallback=e=>{e.length&&"style"===e[0].attributeName&&this.setOneTapHeightCssVar(this.getOneTapIframeHeight())},this.setOneTapHeightCssVar=(e,t=!1)=>{if(this.styleTag||(this.styleTag=document.createElement("style"),document.head.appendChild(this.styleTag)),this.styleTag.innerText=`:root {\n      ${o.ONE_TAP_HEIGHT_CSS_VAR}: ${e};\n      ${o.ONE_TAP_HEIGHT_MOBILE_CSS_VAR}: ${this.config.isMobile?e:"0px"};\n    }`,this.shouldDisplayCopyBanner()){const r=document.getElementById(o.DEFAULT_ONE_TAP_PROMPT_WRAPPER);r&&!t&&(r.style.height=e)}},this.getGoogleIframe=()=>document.getElementById(o.GOOGLE_ONE_TAP_IFRAME_ID)||document.querySelector(`#${o.GOOGLE_ONE_TAP_CREDENTIAL_CONTAINER_ID} iframe`),this.getOneTapIframeHeight=()=>{const e=this.getGoogleIframe();return(null==e?void 0:e.style.height)||"0px"},this.pollAndClearIframeFocus=()=>{const e=setInterval(()=>{var t,r;document.activeElement&&document.activeElement===this.getGoogleIframe()&&(null===(t=document.activeElement)||void 0===t||t.blur(),null===(r=this.activeElement)||void 0===r||r.focus(),o.GSIEventManager.sendGSIEvent(o.GSIEvent.PROMPT_UI_READY),clearInterval(e))},5);setTimeout(()=>{o.GSIEventManager.sendGSIEvent(o.GSIEvent.PROMPT_UI_READY),clearInterval(e)},3e3)},this.handleFocusIn=()=>{document.activeElement!==this.getGoogleIframe()&&(this.activeElement=document.activeElement)},this.getPromptParentId=()=>{var e;return(null===(e=this.config)||void 0===e?void 0:e.isInline)?this.getInlineContainerId():this.shouldDisplayCopyBanner()?o.DEFAULT_ONE_TAP_PROMPT_WRAPPER:void 0},this.getInlineContainerId=()=>this.config&&"signup"===this.currentContext?o.DEFAULT_SIGNUP_CONTAINER_ID:o.DEFAULT_SIGNIN_CONTAINER_ID,this.setCurrentContext=e=>{this.currentContext=e},this.updateStateContext=e=>{const t="signup"===e?o.GSIEvent.CONTEXT_CHANGE_SIGNUP:o.GSIEvent.CONTEXT_CHANGE_SIGNIN;o.GSIEventManager.sendGSIEvent(t)},this.shouldDisplayCopyBanner=()=>{var e,t;return"V1"===(null===(e=this.config)||void 0===e?void 0:e.copyBannerVariant)||"V2"===(null===(t=this.config)||void 0===t?void 0:t.copyBannerVariant)},this.getBannerNode=()=>document.getElementById(o.DEFAULT_ONE_TAP_BANNER_ID),this.removeBanner=()=>{const e=document.getElementById(o.DEFAULT_ONE_TAP_BANNER_ID);null==e||e.remove()},this.removeBannerOnUserCancel=()=>{const e=document.getElementById(o.DEFAULT_ONE_TAP_BANNER_ID);e&&(e.style.opacity="0",setTimeout(()=>{e.remove()},250))},S.instance)return S.instance;S.instance=this,this.ssoChecker=new h.SsoStateChecker}initGoogleAccount(){const e={client_id:this.config.clientId,callback:this.googleSignInCallback,cancel_on_tap_outside:!1,context:this.currentContext,prompt_parent_id:this.getPromptParentId(),itp_support:!0,auto_select:this.autoSignInEnabled};google.accounts.id.initialize(e),this.isFromLogout()&&google.accounts.id.disableAutoSelect(),o.GSIEventManager.getGSIState().gsiClientInitialized||o.GSIEventManager.sendGSIEvent(o.GSIEvent.INITIALIZE_GSI_CLIENT)}}t.GoogleOneTapPlatformSingleton=S,t.GoogleOneTapPlatform=new S,t.initialize_module=function(e){t.GoogleOneTapPlatform.init(e)},t.UseGsiState=function(e){e&&!o.GSIEventManager.getGSIState().isInline&&o.GSIEventManager.sendGSIEvent(o.GSIEvent.USE_INLINE_PROMPT);const[t,r]=(0,f.useState)(o.GSIEventManager.getGSIState()),n=[o.GSIEvent.INITIALIZE_PLATFORM,o.GSIEvent.PROMPT_OPEN,o.GSIEvent.PROMPT_CLOSE,o.GSIEvent.DISPLAY_MOMENT,o.GSIEvent.RESET_DISPLAY_MOMENT,o.GSIEvent.PROMPT_UI_READY,o.GSIEvent.PROMPT_UI_NOT_READY],a=[o.GSIEvent.TOS_PROMPT_OPEN,o.GSIEvent.TOS_PROMPT_CLOSE,o.GSIEvent.IS_MOBILE,...e?n:[]],i=()=>{r(o.GSIEventManager.getGSIState())};return(0,f.useEffect)(()=>(o.GSIEventManager.removeGSIEventListener(a,i),o.GSIEventManager.createGSIEventListener(a,i),()=>{o.GSIEventManager.removeGSIEventListener(a,i)}),[]),t}})),define("metaserver/static/js/google_one_tap/lib",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONTINUATION_URL=t.ONE_TAP_HEIGHT_MOBILE_CSS_VAR=t.ONE_TAP_HEIGHT_CSS_VAR=t.GOOGLE_ONE_TAP_BUTTON_PROMPT_DISABLED=t.GOOGLE_ONE_TAP_CREDENTIAL_CONTAINER_ID=t.GOOGLE_ONE_TAP_IFRAME_ID=t.GOOGLE_ONE_TAP_COLLAPSE_FORM=t.GOOGLE_ONE_TAP_DISABLED_FORM=t.DEFAULT_ONE_TAP_BANNER_TOS_WRAPPER=t.DEFAULT_ONE_TAP_BANNER_ID=t.DEFAULT_ONE_TAP_PROMPT_WRAPPER=t.DEFAULT_ONE_TAP_INLINE_SPINNER_CLASS=t.DEFAULT_ONE_TAP_INLINE_TOS_ID_LOGIN=t.DEFAULT_ONE_TAP_INLINE_TOS_ID_REGISTER=t.DEFAULT_ONE_TAP_CONTAINER_CLASS=t.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID=t.DEFAULT_SIGNUP_BUTTON_CONTAINER_ID=t.DEFAULT_SIGNIN_CONTAINER_ID=t.DEFAULT_SIGNUP_CONTAINER_ID=t.GSIEvent=t.GSIEventManager=t.SIG_BUTTON_STYLES=t.BUTTON_AUTH_TYPES=t.DismissReason=t.SIG_BUTTON_TEXT=t.GoogleNotShownReason=t.SignInTag=t.GoogleOneTapEvent=t.GoogleOneTapClientIdDev=t.GoogleOneTapClientIdProd=void 0,t.GoogleOneTapClientIdProd="801668726815.apps.googleusercontent.com",t.GoogleOneTapClientIdDev="165392285814-9b1gvvi0368l5p5v3j86qfsfcks0pdnn.apps.googleusercontent.com",(function(e){e.DISMISS_GOOGLE_ONE_TAP="dismiss_google_onetap",e.GOOGLE_ONE_TAP_CONTINUE="google_onetap_continue",e.GOOGLE_ONE_TAP_NOT_SHOWN="google_onetap_not_shown",e.GOOGLE_ONE_TAP_ACCOUNT_CREATION_SUCCESS="google_onetap_account_creation_success",e.GOOGLE_ONE_TAP_ACCOUNT_LOGIN_SUCCESS="google_onetap_account_login_success",e.GOOGLE_ONE_TAP_ACCOUNT_AUTO_LOGIN_SUCCESS="google_onetap_auto_login_success",e.GOOGLE_ONE_TAP_SIGNUP_CLICK="google_onetap_signup_click",e.GOOGLE_ONE_TAP_SIGNUP_DISMISS_TOS="google_onetap_signup_dismiss_tos",e.GOOGLE_ONE_TAP_SIGNUP_PLEASE_AGREE_TO_TOS="google_onetap_signup_please_agree_to_tos",e.GOOGLE_ONE_TAP_VERIFICATION_FAILED="google_onetap_verification_failed",e.GOOGLE_ONE_TAP_VERIFICATION_SUCCESS="google_onetap_verification_success",e.GOOGLE_ONE_TAP_VERIFICATION_AUTO_SUCCESS="google_onetap_verification_auto_success",e.GOOGLE_ONE_TAP_SIG_BUTTON_CLICKED="google_onetap_sig_button_clicked",e.LOGGED_IN_GOOGLE_USER="loggedin_google_user",e.SHOW_GOOGLE_ONE_TAP="show_google_onetap",e.GOOGLE_ONE_TAP_IMPLICIT_TOS_AGREE="google_one_tap_implicit_tos_agree"})(t.GoogleOneTapEvent||(t.GoogleOneTapEvent={})),(function(e){e.LOGIN_PAGE_ONETAP_SIGNIN="login_page_google_one_tap_login",e.LOGIN_PAGE_ONETAP_AUTO_SIGNIN="login_page_google_one_tap_login_auto",e.LOGIN_PAGE_SIG_SIGNIN="login_page_google_login",e.REGISTER_PAGE_ONETAP_SIGNIN="register_page_google_one_tap_login",e.REGISTER_PAGE_ONETAP_AUTO_SIGNIN="register_page_google_one_tap_login_auto",e.REGISTER_PAGE_SIG_SIGNIN="register_page_google_login",e.HOMEPAGE_ONETAP_SIGNIN="homepage_google_one_tap_login",e.SHARING_IB_FILE_ONE_TAP_LOGIN="inband_file_share_file_one_tap_login",e.SHARING_IB_FILE_GOOGLE_LOGIN="inband_file_share_file_google_login",e.SHARING_IB_FOLDER_ONE_TAP_LOGIN="inband_folder_share_folder_one_tap_login",e.SHARING_IB_FOLDER_GOOGLE_LOGIN="inband_folder_share_folder_google_login",e.SHARING_OOB_FILE_ONE_TAP_LOGIN="outofband_file_share_file_one_tap_login",e.SHARING_OOB_FILE_GOOGLE_LOGIN="outofband_file_share_file_google_login",e.SHARING_OOB_FOLDER_ONE_TAP_LOGIN="outofband_folder_share_folder_one_tap_login",e.SHARING_OOB_FOLDER_GOOGLE_LOGIN="outofband_folder_share_folder_google_login"})(t.SignInTag||(t.SignInTag={})),(function(e){e.OPT_OUT_OR_NO_SESSION="opt_out_or_no_session",e.USER_CANCEL="user_cancel"})(t.GoogleNotShownReason||(t.GoogleNotShownReason={})),(function(e){e.CONTINUE_WITH="continue_with",e.SIGN_IN_WITH="signin_with",e.SIGN_UP_WITH="signup_with"})(t.SIG_BUTTON_TEXT||(t.SIG_BUTTON_TEXT={})),(function(e){e.inFlow="credential_returned"})(t.DismissReason||(t.DismissReason={})),t.BUTTON_AUTH_TYPES=["btn","btn_confirm","btn_add_session","btn_confirm_add_session"],t.SIG_BUTTON_STYLES=new Map([["default",{width:350,logo_alignment:"left"}],["shared-link-signup-page",{width:400,logo_alignment:"left"}]]);const r={platformInitialized:!1,gsiClientInitialized:!1,displayMoment:!1,isInline:!1,isPromptClosed:!0,context:"signin",pendingContext:null,buttonContainerMounted:!1,inlineContainerMounted:!1,tosPromptDisplayed:!1,promptUIReady:!1,dismissReason:"",formDisabled:!1,isButtonFlow:!1,email:"",isMobile:!1};let n=r;const a=e=>`gsi_${e.toString()}`,o=e=>{n.pendingContext=e},i=e=>{const t=e.detail;n=Object.assign(Object.assign({},n),t||{}),e.type!==a(s.STATE_CHANGE)&&window.dispatchEvent(u(s.STATE_CHANGE))};var s;t.GSIEventManager={sendGSIEvent:(e,{email:t,dismissReason:r}={})=>{const a=c.includes(e),i=u(e,{email:t,dismissReason:r});i&&(window.dispatchEvent(i),a&&!n.platformInitialized&&o(i.detail.context))},getGSIState:()=>n,getPendingContext:()=>n.pendingContext,clearPendingContext:()=>{n.pendingContext=null},getEventType:a,createGSIEventListener:(e,t)=>{const r=e=>window.addEventListener(a(e),t);Array.isArray(e)?e.forEach(e=>{r(e)}):r(e)},removeGSIEventListener:(e,t)=>{const r=e=>window.removeEventListener(a(e),t);Array.isArray(e)?e.forEach(e=>{r(e)}):r(e)},resetGSIState:()=>{n=r}},(function(e){e.STATE_CHANGE="state_change",e.CONTEXT_CHANGE_SIGNUP="context_change_signup",e.CONTEXT_CHANGE_SIGNIN="context_change_signin",e.INITIALIZE_PLATFORM="initialize_platform",e.INITIALIZE_GSI_CLIENT="initialize_gsi_client",e.DISPLAY_MOMENT="display_moment",e.RESET_DISPLAY_MOMENT="reset_display_moment",e.USE_INLINE_PROMPT="use_inline_prompt",e.PROMPT_CLOSE="prompt_close",e.PROMPT_OPEN="prompt_open",e.SHOW_PROMPT="show_prompt",e.REMOVE_PROMPT="remove_prompt",e.INLINE_CONTAINER_MOUNTED="inline_container_mounted",e.BUTTON_CONTAINER_MOUNTED="button_container_mounted",e.BUTTON_CONTAINER_UNMOUNTED="button_container_unmounted",e.TOS_PROMPT_OPEN="tos_prompt_open",e.TOS_PROMPT_CLOSE="tos_prompt_closed",e.USE_BUTTON_FLOW="use_button_flow",e.USE_ONE_TAP_FLOW="use_one_tap_flow",e.SSO_REQUIRED="sso_required",e.PROMPT_UI_READY="prompt_ui_ready",e.PROMPT_UI_NOT_READY="prompt_ui_not_ready",e.IS_MOBILE="IS_MOBILE"})(s=t.GSIEvent||(t.GSIEvent={}));const l={context_change_signup:"signup",context_change_signin:"signin"},c=[s.CONTEXT_CHANGE_SIGNIN,s.CONTEXT_CHANGE_SIGNUP],u=(e,{email:t,dismissReason:r}={})=>{const n=a(e);switch(e){case s.CONTEXT_CHANGE_SIGNUP:case s.CONTEXT_CHANGE_SIGNIN:return new CustomEvent(n,{detail:{context:l[e.toString()],formDisabled:!1}});case s.INITIALIZE_PLATFORM:return new CustomEvent(n,{detail:{platformInitialized:!0}});case s.INITIALIZE_GSI_CLIENT:return new CustomEvent(n,{detail:{gsiClientInitialized:!0}});case s.DISPLAY_MOMENT:return new CustomEvent(n,{detail:{displayMoment:!0}});case s.RESET_DISPLAY_MOMENT:return new CustomEvent(n,{detail:{displayMoment:!1}});case s.USE_INLINE_PROMPT:return new CustomEvent(n,{detail:{isInline:!0}});case s.PROMPT_CLOSE:return new CustomEvent(n,{detail:{isPromptClosed:!0,dismissReason:r}});case s.SHOW_PROMPT:case s.REMOVE_PROMPT:return new CustomEvent(n);case s.PROMPT_OPEN:return new CustomEvent(n,{detail:{isPromptClosed:!1}});case s.BUTTON_CONTAINER_MOUNTED:return new CustomEvent(n,{detail:{buttonContainerMounted:!0}});case s.BUTTON_CONTAINER_UNMOUNTED:return new CustomEvent(n,{detail:{buttonContainerMounted:!1}});case s.INLINE_CONTAINER_MOUNTED:return new CustomEvent(n,{detail:{inlineContainerMounted:!0}});case s.TOS_PROMPT_OPEN:return new CustomEvent(n,{detail:{tosPromptDisplayed:!0,formDisabled:!0}});case s.TOS_PROMPT_CLOSE:return new CustomEvent(n,{detail:{tosPromptDisplayed:!1,formDisabled:!1,dismissReason:""}});case s.USE_BUTTON_FLOW:return new CustomEvent(n,{detail:{isButtonFlow:!0}});case s.USE_ONE_TAP_FLOW:return new CustomEvent(n,{detail:{isButtonFlow:!1}});case s.STATE_CHANGE:return new CustomEvent(n);case s.SSO_REQUIRED:return new CustomEvent(n,{detail:{email:t}});case s.PROMPT_UI_READY:return new CustomEvent(n,{detail:{promptUIReady:!0}});case s.PROMPT_UI_NOT_READY:return new CustomEvent(n,{detail:{promptUIReady:!1}});case s.IS_MOBILE:return new CustomEvent(n,{detail:{isMobile:!0}});default:return null}};Object.values(s).forEach(e=>{const t=a(e);window.addEventListener(t,i)}),t.DEFAULT_SIGNUP_CONTAINER_ID="google-one-tap-inline-container-register",t.DEFAULT_SIGNIN_CONTAINER_ID="google-one-tap-inline-container-login",t.DEFAULT_SIGNUP_BUTTON_CONTAINER_ID="sign-in-with-google-button-container--register",t.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID="sign-in-with-google-button-container--login",t.DEFAULT_ONE_TAP_CONTAINER_CLASS="google-one-tap-inline-container",t.DEFAULT_ONE_TAP_INLINE_TOS_ID_REGISTER="google-one-tap-inline-tos-register",t.DEFAULT_ONE_TAP_INLINE_TOS_ID_LOGIN="google-one-tap-inline-tos-login",t.DEFAULT_ONE_TAP_INLINE_SPINNER_CLASS="google-one-tap-inline-spinner",t.DEFAULT_ONE_TAP_PROMPT_WRAPPER="google-one-tap-wrapper",t.DEFAULT_ONE_TAP_BANNER_ID="one-tap-banner",t.DEFAULT_ONE_TAP_BANNER_TOS_WRAPPER="one-tap-banner-tos-container",t.GOOGLE_ONE_TAP_DISABLED_FORM="google-one-tap-form--disabled",t.GOOGLE_ONE_TAP_COLLAPSE_FORM="google-one-tap-form--collapse",t.GOOGLE_ONE_TAP_IFRAME_ID="credential_picker_iframe",t.GOOGLE_ONE_TAP_CREDENTIAL_CONTAINER_ID="credential_picker_container",t.GOOGLE_ONE_TAP_BUTTON_PROMPT_DISABLED="google-one-tap-button-prompt--disabled",t.ONE_TAP_HEIGHT_CSS_VAR="--google-one-tap-container-height",t.ONE_TAP_HEIGHT_MOBILE_CSS_VAR="--google-one-tap-mobile-container-height",t.DEFAULT_CONTINUATION_URL="/"})),define("metaserver/static/js/google_one_tap/containers",["require","exports","tslib","classnames","metaserver/static/js/core/i18n","react","react-dom","metaserver/static/js/google_one_tap/lib","metaserver/static/js/google_one_tap/google_one_tap_helpers","@dropbox/dig-components/progress_indicators","typescript/component_libraries/dwg-components/src/atoms/dwg-box/index","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index"],(function(e,t,r,n,a,o,i,s,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OneTapBannerFC=t.createCopyBanner=t.DEFAULT_TOS_INLINE_CONTAINER_REGISTER=t.DEFAULT_TOS_INLINE_CONTAINER_LOGIN=t.DefaultButtonContainerFC=t.DefaultContainerFC=void 0,n=r.__importDefault(n),o=r.__importStar(o),i=r.__importDefault(i);const p=o.default.createElement(u.DWGBox,{marginBottom:2,className:s.DEFAULT_ONE_TAP_INLINE_SPINNER_CLASS},o.default.createElement(c.Spinner,{"aria-valuetext":"Loading Terms of Service prompt",size:"small"}));t.DefaultContainerFC=e=>{const{context:t,gsiState:r}=e,a="signup"===t?s.DEFAULT_SIGNUP_CONTAINER_ID:s.DEFAULT_SIGNIN_CONTAINER_ID,i=(0,o.useCallback)(e=>{null!==e&&s.GSIEventManager.sendGSIEvent(s.GSIEvent.INLINE_CONTAINER_MOUNTED)},[]);return o.default.createElement("div",{className:(0,n.default)({"expanding-inline-one-tap-prompt":null==r?void 0:r.promptUIReady})},o.default.createElement("div",{id:a,className:(0,n.default)({[s.DEFAULT_ONE_TAP_CONTAINER_CLASS]:!(null==r?void 0:r.isPromptClosed)||!(null==r?void 0:r.displayMoment)}),ref:i},!(null==r?void 0:r.promptUIReady)&&!(null==r?void 0:r.isPromptClosed)&&p))},t.DefaultContainerFC.displayName="DefaultContainerFC";t.DefaultButtonContainerFC=({context:e,gsiState:t})=>{let r;"signup"===e?r=s.DEFAULT_SIGNUP_BUTTON_CONTAINER_ID:"signin"===e&&(r=s.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID);const n=(0,o.useCallback)(e=>{null!==e&&s.GSIEventManager.sendGSIEvent(s.GSIEvent.BUTTON_CONTAINER_MOUNTED)},[]);return(0,o.useEffect)(()=>()=>{s.GSIEventManager.sendGSIEvent(s.GSIEvent.BUTTON_CONTAINER_UNMOUNTED)},[]),o.default.createElement("div",{ref:n,id:r,className:"google-one-tap-inline-button-container",style:!1===(0,l.showOneTapInlineGoogleButton)(t)?{display:"none"}:void 0})},t.DefaultButtonContainerFC.displayName="DefaultButtonContainerFC",t.DEFAULT_TOS_INLINE_CONTAINER_LOGIN=o.default.createElement("div",{id:s.DEFAULT_ONE_TAP_INLINE_TOS_ID_LOGIN,className:"inline-tos-container"}),t.DEFAULT_TOS_INLINE_CONTAINER_REGISTER=o.default.createElement("div",{id:s.DEFAULT_ONE_TAP_INLINE_TOS_ID_REGISTER,className:"inline-tos-container"}),t.createCopyBanner=function(e){if(document.getElementById(s.DEFAULT_ONE_TAP_PROMPT_WRAPPER))return;const r=document.createElement("div");r.id=s.DEFAULT_ONE_TAP_BANNER_ID,r.classList.add(`${s.DEFAULT_ONE_TAP_BANNER_ID}-${e}`),i.default.render(o.default.createElement(t.OneTapBannerFC,{variant:e}),r),r.setAttribute("role","dialog"),r.setAttribute("aria-labelledby","copy-banner-title"),document.body.append(r)};t.OneTapBannerFC=({variant:e})=>o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:(0,n.default)("one-tap-banner-text-container",`one-tap-banner-text-container-${e}`)},o.default.createElement(u.DWGBox,{justifyContent:"center",display:"flex",className:`one-tap-banner-text-wrapper-${e}`},o.default.createElement(d.DWGText,{className:"one-tap-banner-text",fontSize:16,fontWeight:"medium",fontFamily:"atlas-grotesk",lineHeight:24,textAlign:"center",id:"copy-banner-title",tagName:"h2"},m))),o.default.createElement("div",{id:s.DEFAULT_ONE_TAP_BANNER_TOS_WRAPPER,className:`${s.DEFAULT_ONE_TAP_BANNER_TOS_WRAPPER}-${e}`}),o.default.createElement("div",{id:s.DEFAULT_ONE_TAP_PROMPT_WRAPPER})),t.OneTapBannerFC.displayName="OneTapBannerFC";const m=a.intl.formatMessage({id:"o05qkf",defaultMessage:"Sign up for {space} of free storage on Dropbox"},{space:"2GB"})})),define("metaserver/static/js/google_one_tap/google_one_tap_helpers",["require","exports","tslib","react","react-dom","metaserver/static/js/api_v2/noauth_client","metaserver/static/js/core/browser","metaserver/static/js/core/notify","metaserver/static/js/core/i18n","metaserver/static/js/google_one_tap/lib","metaserver/static/js/google_one_tap/lib","metaserver/static/js/auth/common/stats","metaserver/static/js/abuse/fingerprintjs_component"],(function(e,t,r,n,a,o,i,s,l,c,u,d,p){"use strict";function m(e,t){const r=t.match(/^[^_]+/);if(!r)return;const n=r[0];switch(e){case"warp-page":return u.SignInTag.HOMEPAGE_ONETAP_SIGNIN;case"login_page":return"btn"===n?u.SignInTag.LOGIN_PAGE_SIG_SIGNIN:"auto"===n?u.SignInTag.LOGIN_PAGE_ONETAP_AUTO_SIGNIN:u.SignInTag.LOGIN_PAGE_ONETAP_SIGNIN;case"register_page":return"btn"===n?u.SignInTag.REGISTER_PAGE_SIG_SIGNIN:"auto"===n?u.SignInTag.REGISTER_PAGE_ONETAP_AUTO_SIGNIN:u.SignInTag.REGISTER_PAGE_ONETAP_SIGNIN;case"inband_file_share":return"btn"===n?u.SignInTag.SHARING_IB_FILE_GOOGLE_LOGIN:u.SignInTag.SHARING_IB_FILE_ONE_TAP_LOGIN;case"inband_folder_share":return"btn"===n?u.SignInTag.SHARING_IB_FOLDER_GOOGLE_LOGIN:u.SignInTag.SHARING_IB_FOLDER_ONE_TAP_LOGIN;case"outofband_file_share":return"btn"===n?u.SignInTag.SHARING_OOB_FILE_GOOGLE_LOGIN:u.SignInTag.SHARING_OOB_FILE_ONE_TAP_LOGIN;case"outofband_folder_share":return"btn"===n?u.SignInTag.SHARING_OOB_FOLDER_GOOGLE_LOGIN:u.SignInTag.SHARING_OOB_FOLDER_ONE_TAP_LOGIN;default:return}}Object.defineProperty(t,"__esModule",{value:!0}),t.initFingerprintJS=t.setGoogleOneTapDisabledBodyClass=t.initTestMock=t.showOneTapInlineGoogleButton=t.getSignInTag=t.validateJWTAndGetUserId=t.handleClientError=t.getIdentityClient=void 0,n=r.__importDefault(n),a=r.__importDefault(a),i=r.__importStar(i),t.getIdentityClient=function({googleCredentials:e,select_by:t,tos_signed:r,marketingOptedIn:n,cont_url:a,visitorId:s,webSigninTag:l,webSignupTag:c,referralCode:u,referralSource:d,emailHash:p,additionalAuthParams:g}){const h={id_token:e,one_tap_platform:{".tag":"web"},select_by:t,remember_me:!0,pair_user:!1,tos_signed:r,source_url:i.get_href(),marketing_opt_in:n,cont_url:a,visitor_id:s,web_signin_tag:m(l,t),referral_code:u,referral_source:d,web_signup_tag:c,email_hash:p,additional_auth_params:g};return(new o.NoAuthApiV2Client).ns("account").rpc("register_or_sign_in_with_1tap",h,{})},t.handleClientError=function(e){switch(e[".tag"]){case"unsupported_platform":s.Notify.error(l.intl.formatMessage({id:"zxg8L5",defaultMessage:"This platform is not supported by Google One Tap."}));break;case"unverified_email":s.Notify.error(l.intl.formatMessage({id:"8vxEe0",defaultMessage:"Verify your email with Google to sign in with this email address."}));break;case"disabled_user":s.Notify.error(l.intl.formatMessage({id:"FtHoiO",defaultMessage:"This account has been marked as inactive. Contact the team admin."}));break;case"user_already_invited_to_team":s.Notify.error(l.intl.formatMessage({id:"WPQLwi",defaultMessage:"You've already been invited. Check your email for an invite link or ask the admin to resend it."}));break;case"invalid_token":s.Notify.error(l.intl.formatMessage({id:"hcIBNz",defaultMessage:"That email address wasn't found, try checking it for typos."}));break;default:s.Notify.error(l.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}},t.validateJWTAndGetUserId=function(e){const t=e=>decodeURIComponent(escape(e)),[r,n,a]=e.split(".").map(e=>atob(e.split("_").join("/").split("-").join("+")));if(!a)return d.GoogleOneTapAmpLogger.logCredentialsDecodeError(),"";try{return"JWT"!==JSON.parse(t(r)).typ?"":JSON.parse(t(n)).sub}catch(e){return d.GoogleOneTapAmpLogger.logCredentialsDecodeError(),""}},t.getSignInTag=m,t.showOneTapInlineGoogleButton=function(e){const t=(null==e?void 0:e.isButtonFlow)&&!(null==e?void 0:e.isMobile),r=((null==e?void 0:e.tosPromptDisplayed)||(null==e?void 0:e.dismissReason)==u.DismissReason.inFlow)&&((null==e?void 0:e.isInline)||t);return!((null==e?void 0:e.isInline)&&(!(null==e?void 0:e.isPromptClosed)||(null==e?void 0:e.tosPromptDisplayed))||r)},t.initTestMock=function(){return r.__awaiter(this,void 0,void 0,(function*(){const e=new URLSearchParams(window.location.search).get("test_token")||"";let t;window.google={accounts:{id:{initialize:({callback:r})=>{t=()=>{r({credential:e,select_by:"test-select-by"})}},prompt:()=>{if(!!!document.getElementById("onetap-test-modal")){const e=document.createElement("div");e.style.position="absolute",e.style.top="100px",e.style.right="150px",e.style.width="100px",e.style.height="70px";const r=document.createElement("button");r.textContent="Google OneTap test button",r.onclick=t,e.append(r),document.body.append(e)}},renderButton:()=>{if(!!!document.getElementById("onetap-test-sig-button")){const e=document.createElement("button");e.id="onetap-test-sig-button",e.textContent="Sign in with Google test button",e.onclick=t;const r=document.getElementById(c.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID);r&&r.append(e)}}}}}}))};t.setGoogleOneTapDisabledBodyClass=e=>{document.body.classList.toggle(c.GOOGLE_ONE_TAP_BUTTON_PROMPT_DISABLED,e)};t.initFingerprintJS=()=>{const e=n.default.createRef(),t=document.createElement("div");return t.id="one-tap-fpjs-container",document.body.appendChild(t),a.default.render(n.default.createElement(p.FingerprintJs,{ref:e,source:"GOOGLE_ONE_TAP"}),t),e}})),define("typescript/component_libraries/dwg-components/src/components/dwg-sso-button/auth-logos/google_logo",["require","exports","tslib","react"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleLogoDisabled=t.GoogleLogo=void 0,n=r.__importDefault(n);t.GoogleLogo=()=>n.default.createElement("svg",{width:"44px",height:"44px",viewBox:"0 0 44 44",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n.default.createElement("defs",null,n.default.createElement("rect",{id:"path-2",x:"0",y:"0",width:"40",height:"40",rx:"2"})),n.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.default.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -160.000000)"}),n.default.createElement("g",{id:"btn_google_light_normal",transform:"translate(-2.000000, -1.000000)"},n.default.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},n.default.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),n.default.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),n.default.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),n.default.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),n.default.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),n.default.createElement("g",{id:"handles_square"})))),t.GoogleLogo.displayName="GoogleLogo";t.GoogleLogoDisabled=()=>n.default.createElement("svg",{width:"44px",height:"44px",viewBox:"0 0 44 44",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n.default.createElement("title",null,"btn_google_light_disabled_ios"),n.default.createElement("desc",null,"Created with Sketch."),n.default.createElement("defs",null,n.default.createElement("rect",{id:"path-1",x:"0",y:"0",width:"40",height:"40",rx:"2"})),n.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.default.createElement("g",{id:"9-PATCH",transform:"translate(-788.000000, -160.000000)"}),n.default.createElement("g",{id:"btn_google_light_disabled",transform:"translate(-2.000000, -1.000000)"},n.default.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)"}),n.default.createElement("path",{d:"M24.001,25.71 L24.001,22.362 L32.425,22.362 C32.551,22.929 32.65,23.46 32.65,24.207 C32.65,29.346 29.203,33 24.01,33 C19.042,33 15.01,28.968 15.01,24 C15.01,19.032 19.042,15 24.01,15 C26.44,15 28.474,15.891 30.031,17.349 L27.475,19.833 C26.827,19.221 25.693,18.501 24.01,18.501 C21.031,18.501 18.601,20.976 18.601,24.009 C18.601,27.042 21.031,29.517 24.01,29.517 C27.457,29.517 28.726,27.132 28.96,25.719 L24.001,25.719 L24.001,25.71 Z",id:"Shape-Copy",fillOpacity:"0.4",fill:"#000000"}),n.default.createElement("g",{id:"handles_square"})))),t.GoogleLogoDisabled.displayName="GoogleLogoDisabled"})),define("typescript/component_libraries/dwg-components/src/components/dwg-sso-button/index",["require","exports","tslib","react","classnames","typescript/component_libraries/dwg-components/src/atoms/dwg-box/index","typescript/component_libraries/dwg-components/src/components/dwg-lazy-icon/index","typescript/component_libraries/dwg-components/src/components/dwg-sso-button/auth-logos/google_logo","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","typescript/component_libraries/dwg-components/src/helpers/polyfills"],(function(e,t,r,n,a,o,i,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DWGSSOButton=void 0,n=r.__importStar(n),a=r.__importDefault(a);const u=({service:e,disabled:t,v2variant:r,isLoading:l})=>{const c=(0,a.default)("dwg-sso-button--apple-logo",{"dwg-sso-button--apple-logo-v2":r,"dwg-sso-button--apple-logo-disabled":t});return"apple"===e?n.default.createElement(o.DWGBox,{className:(0,a.default)(c),alignItems:"center",display:"flex",justifyContent:"center"},n.default.createElement(i.DWGLazyUIIcon,{src:"AppleExternalLogo",size:"large"})):n.default.createElement(o.DWGBox,{alignItems:"center",display:"flex",justifyContent:"center",className:(0,a.default)("dwg-sso-button--google-logo",{"dwg-sso-button--google-logo-v2":r,"dwg-sso-button--google-logo-v2-loading":r&&l})},t?n.default.createElement(s.GoogleLogoDisabled,null):n.default.createElement(s.GoogleLogo,null))};u.displayName="Logo";t.DWGSSOButton=({children:t,classes:i,dataUxaLog:s,disabled:d=!1,onClick:p,service:m,width:g,isLoading:h=!1,v2variant:f=!1,loadingLabel:_})=>{const v=(0,a.default)("dwg-sso-button",{"dwg-sso-button-v2":f,"dwg-sso-button--disabled":d||h},i),E=(0,a.default)({"dwg-sso-button--text-container-disabled ":d});(0,n.useEffect)(()=>{(0,c.loadFocusVisiblePolyfill)()},[]);const[S,b]=(0,n.useState)();return(0,n.useEffect)(()=>{!S&&h&&new Promise((t,r)=>{e(["@dropbox/dig-components/progress_indicators"],t,r)}).then(r.__importStar).then(({Spinner:e})=>{b(n.default.createElement(e,{size:"xsmall","aria-valuetext":_,monochromatic:!0}))})},[S,h,_]),n.default.createElement(o.DWGBox,{className:v,alignItems:"center",color:"standard",backgroundColor:"core-secondary",borderColor:f?void 0:"core-primary",borderColorDisabled:f&&h?"faint":"disabled","data-uxa-log":s,disabled:d||h,display:"flex",onClick:p,padding:0,tagName:"button",theme:"coconut-200",width:g},n.default.createElement(u,{service:m,disabled:d,isLoading:h,v2variant:f}),n.default.createElement(o.DWGBox,Object.assign({className:(0,a.default)({"dwg-sso-button--text-container":!f,"dwg-sso-button--text-container-v2":f&&!h}),paddingRight:1.5,display:"flex",justifyContent:"center",width:"full"},f&&h&&{paddingTop:1.5,paddingBottom:1.5}),h?S:n.default.createElement(l.DWGText,{className:E,fontFamily:"atlas-grotesk",fontSize:f?14:16,fontWeight:f?"regular":"medium",lineHeight:f?16:24},t)))},t.DWGSSOButton.displayName="DWGSSOButton"})),define("metaserver/static/js/google_one_tap/one_tap_tos",["require","exports","tslib","react","react-dom","classnames","metaserver/static/js/auth/common/inputs/checkbox","metaserver/static/js/auth/common/types","@dropbox/dig-components/buttons","@dropbox/dig-icons","@dropbox/dig-icons/assets","react-transition-group","metaserver/static/js/core/i18n","@dropbox/dig-components/modal","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","typescript/component_libraries/dwg-components/src/atoms/dwg-box/index","typescript/component_libraries/dwg-components/src/components/dwg-button2/index","@dropbox/dig-components/progress_indicators","metaserver/static/js/components/ui/css","metaserver/static/js/google_one_tap/lib","metaserver/static/js/auth/common/stats","metaserver/static/js/signup_signin/helpers"],(function(e,t,r,n,a,o,i,s,l,c,u,d,p,m,g,h,f,_,v,E,S,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OneTapTOS=t.unmountTOS=t.displayTOS=t.TOSModalVariant=void 0,n=r.__importStar(n),a=r.__importDefault(a),o=r.__importDefault(o),(function(e){e.V1="v1",e.V2="v2",e.NONE="none"})(t.TOSModalVariant||(t.TOSModalVariant={}));t.displayTOS=e=>{let t=document.getElementById("one-tap-tos-modal-container");t||(t=document.createElement("div"),E.GSIEventManager.getGSIState().isMobile&&t.classList.add("one-tap-tos-mobile-model-container"),t.id="one-tap-tos-modal-container",t.classList.add("one-tap-tos-modal-container"));const r=(!!e.containerParentSelector&&document.getElementById(e.containerParentSelector)||document.body).appendChild(t);a.default.render(n.default.createElement(T,Object.assign({},e)),r,()=>{const e=document.querySelector('.one-tap-tos__terms-checkbox-container input[type="checkbox"]');e&&e.focus()})};t.unmountTOS=()=>{const e=document.getElementById("one-tap-tos-modal-container");e&&(a.default.unmountComponentAtNode(e),e.remove())};const I=({modalVariant:e,animationVariant:r,onSubmit:a,onToggle:o,onDismiss:i,showMarketingOptIn:s,isImplicit:l,googleCredentials:c})=>(r=r||e,n.default.createElement(d.CSSTransition,{in:!0,timeout:125,appear:!0,classNames:`one-tap-tos__modal-animation-${r}`,mountOnEnter:!0,unmountOnExit:!0},n.default.createElement(m.Modal.Content,{className:"one-tap-tos__modal"},n.default.createElement(t.OneTapTOS,{modalVariant:e,animationVariant:r,onSubmit:a,onToggle:o,onDismiss:i,showMarketingOptIn:s,isImplicit:l,googleCredentials:c}))));I.displayName="OneTapModal";const T=(0,v.requireCssWithComponent)(I,["/static/typescript/component_libraries/dwg-components/src/index.web-vflqs9Gql.css","/static/metaserver/static/css/dig-components/index.web-vfllRi-uH.css"]);t.OneTapTOS=({onSubmit:e,onDismiss:t,onToggle:a,showMarketingOptIn:d,modalVariant:m,animationVariant:v,isImplicit:I})=>{const[T,O]=(0,n.useState)(!!I),[N,A]=(0,n.useState)(!0),[C,P]=(0,n.useState)(!1),[G,M]=(0,n.useState)(!1),D=!!I,F=N?"google_onetap_signup_marketing_opt_out":"google_onetap_signup_marketing_opt_in",x=T?"google_onetap_signup_agree_to_tos_uncheck":"google_onetap_signup_agree_to_tos_check",{tosMessage:k,ctaMessage:U}=(0,b.getTOSDataForType)(b.TOSType.UNIFIED_SUSI),j=I?U:p.intl.formatMessage({id:"1XrMh2",defaultMessage:"Sign up"}),V=n.default.createElement(i.AuthCheckbox,{className:"one-tap-tos__terms-checkbox-container",variant:s.AuthFormVariant.DIG20,checked:T,disabled:C,inline:!1,label:L,maestroStyle:!1,name:"one-tap-tos-checkbox",onChange:()=>{G&&!T&&M(!1),O(!T),a(!T)},uxaEventName:x}),B=n.default.createElement(g.DWGText,{fontFamily:"atlas-grotesk",fontSize:12,lineHeight:18},k),W=n.default.createElement("div",{className:"one-tap-tos__terms-container one-tap-tos__row one-tap-tos__tos","data-testid":"row"},I?B:V);return n.default.createElement("form",{className:(0,o.default)(`one-tap-tos one-tap-tos-animation-${v}`,`one-tap-tos-modal-${m}`,`one-tap-tos-modal-animation-${v}`),onSubmit:t=>r.__awaiter(void 0,void 0,void 0,(function*(){if(t.preventDefault(),!T)return M(!0),void(0,S.clickEvent)(E.GoogleOneTapEvent.GOOGLE_ONE_TAP_SIGNUP_PLEASE_AGREE_TO_TOS);P(!0),(yield e(d?N:void 0))||P(!1)}))},n.default.createElement("div",{className:"one-tap-tos__title-container","data-testid":"row"},n.default.createElement("div",{className:"one-tap-tos__title-content"},n.default.createElement(g.DWGText,{fontFamily:"atlas-grotesk",lineHeight:20,fontSize:16,fontWeight:"medium"},y),n.default.createElement(l.IconButton,{variant:"transparent",size:"small",onClick:()=>{t()},type:"button","aria-label":w,disabled:C},n.default.createElement(c.UIIcon,{src:u.CloseLine})))),!D&&W,d&&n.default.createElement("div",{className:"one-tap-tos__terms-container one-tap-tos__row one-tap-tos__marketing-opt-in","data-testid":"row"},n.default.createElement(i.AuthCheckbox,{checked:N,className:"one-tap-tos__terms-checkbox-container",disabled:C,inline:!1,label:p.intl.formatMessage({id:"puZoGX",defaultMessage:"I’d like to receive direct marketing email updates from Dropbox"}),maestroStyle:!1,name:"marketing_opt_in",onChange:()=>{A(!N)},variant:s.AuthFormVariant.DIG20,uxaEventName:F})),D&&W,G&&n.default.createElement(R,null),n.default.createElement("div",{className:"one-tap-tos__signup-container one-tap-tos__row one-tap-tos__submit","data-testid":"row"},C?n.default.createElement("div",{className:"one-tap-tos__loading-indicator"},n.default.createElement(_.Spinner,{"aria-valuetext":"Signing up",size:"small"})):n.default.createElement(h.DWGBox,{theme:"coconut-200"},n.default.createElement(f.DWGPrimaryButton,{label:j,size:"small",width:"full",style:{justifyContent:"center"},disableArrow:!0}))))},t.OneTapTOS.displayName="OneTapTOS";const y=p.intl.formatMessage({id:"9csKpE",defaultMessage:"Continue to Dropbox"}),O=p.intl.formatMessage({id:"aLP5RS",defaultMessage:"Click the checkbox to agree to the terms of service"}),w=p.intl.formatMessage({id:"56IzdQ",defaultMessage:"Close sign up prompt"}),R=()=>n.default.createElement("div",{className:"one-tap-tos__error-container","data-testid":"row"},n.default.createElement(g.DWGText,{textAlign:"left",color:"alert",fontWeight:"regular",fontSize:12,lineHeight:18},O)),L=p.intl.formatMessage({id:"zZ7Lc7",defaultMessage:"I agree to the <a>Dropbox Terms</a>. Learn about how we use and protect your data in our <b>Privacy Policy</b>."},{a:e=>n.default.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"google_onetap_signup_dropbox_terms_link"},e),b:e=>n.default.createElement("a",{href:"/privacy",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"google_onetap_signup_privacy_policy_link"},e)})})),define("metaserver/static/js/logging/hive/schemas/abuse-fingerprintjs_logs",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FingerprintJsLogsRow=void 0;t.FingerprintJsLogsRow=class{constructor(e){this.category="abuse-fingerprintjs_logs",this.email=e.email,this.event=e.event,this.request_id=e.request_id,this.visitor_id=e.visitor_id,this.visitor_found=e.visitor_found,this.confidence_score=void 0,this.confidence_comment=e.confidence_comment,this.browser_name=e.browser_name,this.browser_version=e.browser_version,this.device=e.device,this.incognito=e.incognito,this.ip=e.ip,this.latitude=e.latitude,this.longitude=e.longitude,this.timezone=e.timezone,this.city=e.city,this.country=e.country,this.os=e.os,this.os_version=e.os_version,this.confidence_score_double=e.confidence_score_double,Object.seal(this)}}})),define("metaserver/static/js/signup_signin/helpers",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/core/exception"],(function(e,t,r,n,a,o){"use strict";var i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.isImplicitTOSEnabled=t.getTOSDataForType=t.TOS_TYPE_TO_VARIANT=t.TOSType=void 0,n=r.__importDefault(n),(function(e){e.IMPLICIT_TOS_V1="implicit_tos_v1"})(i||(i={})),(function(e){e.UNIFIED_SUSI="unified_susi"})(s=t.TOSType||(t.TOSType={}));const l=e=>a.intl.formatMessage({id:"0PLHgE",defaultMessage:'By selecting "<cta>Sign up</cta>" I agree to the <a>Dropbox Terms</a>. Learn about how we use and protect your data in our <b>Privacy Policy</b>.'},{a:e=>n.default.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"google_onetap_signup_dropbox_terms_link"},e),b:e=>n.default.createElement("a",{href:"/privacy",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"google_onetap_signup_privacy_policy_link"},e),cta:()=>e});t.TOS_TYPE_TO_VARIANT={[s.UNIFIED_SUSI]:i.IMPLICIT_TOS_V1};const c={[i.IMPLICIT_TOS_V1]:l},u={[i.IMPLICIT_TOS_V1]:a.intl.formatMessage({id:"TFpjzf",defaultMessage:"Agree and Sign up"})},d=e=>l(e),p=(e,r)=>{const n=t.TOS_TYPE_TO_VARIANT[e];if(!c[n])return d(r);try{return c[n](r)}catch(e){return(0,o.reportException)({err:e,severity:o.SEVERITY.CRITICAL,tags:["signup-tos","signup_signin"]}),d(r)}},m=e=>u[t.TOS_TYPE_TO_VARIANT[e]],g=e=>({tos_variant:t.TOS_TYPE_TO_VARIANT[e]});t.getTOSDataForType=e=>({tosMessage:p(e,m(e)),ctaMessage:m(e),tosMetadata:g(e)});t.isImplicitTOSEnabled=e=>"V1"===e})),define("metaserver/static/js/auth/login/2fa/trust_checkbox",["require","exports","tslib","react","metaserver/static/js/core/browser_detection","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/checkbox","metaserver/static/js/clean/ui/sprite_div","metaserver/static/js/clean/ui/tooltip"],(function(e,t,r,n,a,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyTrustTooltipContent=t.TwoFactorTrustCheckbox=void 0,n=r.__importDefault(n),a=r.__importStar(a),s=r.__importDefault(s),l=r.__importStar(l);const c=()=>n.default.createElement("div",{className:"two-factor-trusted-info"},a.is_mobile_or_tablet()?o.intl.formatMessage({id:"UkQZnd",defaultMessage:"Trusted devices will never ask you for a security code again. You should only trust this device if you trust everyone who uses it."}):o.intl.formatMessage({id:"UraGyT",defaultMessage:"Trusted computers will never ask you for a security code again. You should only trust this computer if you trust everyone who uses it."}));t.TestOnlyTrustTooltipContent=c;const u=e=>n.default.createElement("div",{className:"tooltip-wrapper info-icon"},n.default.createElement(l.Tooltip,{position:l.TooltipPosition[e.position||"TOP"],tooltip_classname:"twofactor-trust-tooltip",tooltip_contents:n.default.createElement(c,null)},n.default.createElement(s.default,{group:"web",name:"info",alt:o.intl.formatMessage({id:"+SX5vq",defaultMessage:"More information"}),text:a.is_mobile_or_tablet()?o.intl.formatMessage({id:"+79s4f",defaultMessage:"Trust this device"}):o.intl.formatMessage({id:"Ey/8Q8",defaultMessage:"Trust this computer"}),spritePosition:"right"})));t.TwoFactorTrustCheckbox=e=>n.default.createElement(i.AuthCheckbox,{className:"remember-me",name:"trusted",checked:e.checked,inline:!0,disabled:!1,maestroStyle:e.maestroStyle,onChange:e.onChange,variant:e.variant,label:n.default.createElement(u,{position:e.tooltipPosition})})})),define("metaserver/static/js/auth/login/apple_login_button",["require","exports","tslib","react","classnames","metaserver/static/js/core/i18n","metaserver/static/js/auth/login/login_error","typescript/component_libraries/dwg-components/src/components/dwg-sso-button/index"],(function(e,t,r,n,a,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppleLoginButton=void 0,n=r.__importDefault(n),a=r.__importDefault(a);t.AppleLoginButton=e=>{const t=e.buttonProps||{},r=t.text||l();return n.default.createElement("div",{className:"login-form-container__apple-div"},n.default.createElement(s.DWGSSOButton,{onClick:e.onClick,classes:(0,a.default)("auth-apple"),disabled:e.disabled||t.disabled,service:"apple",width:"full",dataUxaLog:"sia_login_start",v2variant:e.dwgRefreshEnabled},r),e.error&&n.default.createElement(i.LoginError,{className:"apple-login-error",message:e.error}))};const l=()=>o.intl.formatMessage({id:"9wJ2LP",defaultMessage:"Continue with Apple"})})),define("metaserver/static/js/auth/login/credentials_form",["require","exports","tslib","classnames","react","metaserver/static/js/core/browser_detection","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/checkbox","metaserver/static/js/auth/common/inputs/text","typescript/component_libraries/dwg-components/src/components/dwg-button2/index","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/captcha","metaserver/static/js/auth/login/login_error","metaserver/static/js/auth/login/google_login_button","metaserver/static/js/auth/login/apple_login_button","metaserver/static/js/auth/login/types","metaserver/static/js/clean/ui/image","metaserver/static/js/clean/static_urls","metaserver/static/js/abuse/fingerprintjs_component","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","metaserver/static/js/google_one_tap/containers","metaserver/static/js/auth/login/login_sso"],(function(e,t,r,n,a,o,i,s,l,c,u,d,p,m,g,h,f,_,v,E,S,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginCredentialsForm=void 0,n=r.__importDefault(n),a=r.__importStar(a);const I=e=>{let t="/forgot",r=e.target;return e.appendEmail&&(t=`/forgot?email_from_login=${e.email}`,r=void 0),a.default.createElement("a",{className:"forgot-password-link",href:t,target:r,"data-uxa-log":"forgot_your_password_cta","data-trackingid":"forgot_your_password_cta"},e.text||i.intl.formatMessage({id:"ovBgtz",defaultMessage:"Forgot your password?"}))},T=e=>a.default.createElement("div",{id:"navisite"},a.default.createElement("br",null),a.default.createElement("a",{href:"/navi_redirect/login",target:e.openLinkInNewTab?"_blank":void 0},i.intl.formatMessage({id:"vnuqfB",defaultMessage:"Dropbox NAVI"}))),y=()=>a.default.createElement("span",{className:"login-loading-indicator ajax-loading"},a.default.createElement(f.Image,{src:(0,_.static_url)("/static/metaserver/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:(0,_.static_url)("/static/metaserver/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif")})),O=e=>{(0,a.useEffect)(()=>{if(!e.emailAsLabel)return;const t=setTimeout(()=>{const e=document.getElementsByName("login_password").item(0);e&&e.focus()},100);return()=>clearTimeout(t)},[]);return a.default.createElement("div",{className:"credentials-form__fields"},e.emailAsLabel?a.default.createElement("div",{className:"form-header--dwg-refresh"},a.default.createElement(E.DWGText,{fontFamily:"atlas-grotesk",fontSize:16,fontWeight:"regular",lineHeight:30,textAlign:"left"},i.intl.formatMessage({id:"U/O5d6",defaultMessage:"Log in using {emailValue}"},{emailValue:e.emailValue}))):a.default.createElement(l.AuthTextField,{value:e.emailValue,className:(0,n.default)("login-text-input","login-email",e.emailProps.className),onChange:e.onInputChange,disabled:e.disabled||e.emailProps.readonly||!1,label:e.emailProps.label||(e.maestroStyle?i.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"}):void 0),placeholder:e.emailProps.placeholder||(e.maestroStyle?i.intl.formatMessage({id:"mx5U0y",defaultMessage:"you@mail.com"}):i.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"})),error:e.emailError,styledError:e.styledEmailError,maestroStyle:e.maestroStyle,name:"login_email",type:u.AuthTextInputType.EMAIL,autoComplete:u.AuthTextInputAutoComplete.USERNAME,variant:e.variant,persistLabel:e.persistLabel}),e.ssoState===h.SsoState.OFF&&a.default.createElement(l.AuthTextField,{value:e.passwordValue,placeholder:e.passwordProps.placeholder||(e.maestroStyle?i.intl.formatMessage({id:"JtdF1I",defaultMessage:"Your password"}):i.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),name:"login_password",className:(0,n.default)("login-text-input","login-password",e.passwordProps.className),error:e.emailAsLabel?e.passwordError||e.emailError:e.passwordError,inputClassName:"password-input",onChange:e.onInputChange,measureStrength:!1,label:e.passwordProps.label||(e.maestroStyle?i.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}):void 0),maestroStyle:e.maestroStyle,disabled:e.disabled,variant:e.variant,type:u.AuthTextInputType.PASSWORD,autoComplete:u.AuthTextInputAutoComplete.CURRENT_PASSWORD,persistLabel:e.persistLabel,dwgRefreshEnabled:e.dwgRefreshEnabled,passwordManagerHint:e.emailAsLabel?{position:"before",node:(t=e.emailValue,a.default.createElement(a.default.Fragment,null,a.default.createElement("input",{type:"hidden",name:"autofill-email",id:"autofill-email",value:t}),a.default.createElement("input",{className:"hide",type:"text",id:"credential-autofill-hint",name:"autofill-email",value:t,autoComplete:u.AuthTextInputAutoComplete.USERNAME,"data-claim":t})))}:void 0,showPasswordByDefault:e.showPasswordByDefault,autofillOrUserInputHandled:e.autofillOrUserInputHandled,showPasswordVariant:e.showPasswordVariant,onUserInputKeyDown:e.onUserInputKeyDown}));var t};class w extends a.default.Component{constructor(){super(...arguments),this.setCaptchaComponent=e=>{this.captchaComponent=e},this.setFingerprintJsComponent=e=>{this.fingerprintJsComponent=e},this.getVisitorId=()=>(0,v.get_visitor_id)(this.fingerprintJsComponent),this.getCaptchaResponses=()=>this.props.supportsCaptcha?(0,d.get_captcha_responses)(this.captchaComponent):{},this.handleCaptchaErrors=e=>!!this.props.supportsCaptcha&&(0,d.handle_captcha_errors)(this.captchaComponent,e),this.submitRecaptcha=()=>{this.props.supportsCaptcha?this.captchaComponent.getWrappedComponent().submit():this.props.onSubmit()}}getFingerprintJsComponent(){return this.fingerprintJsComponent}render(){var e,t;const r=this.props.rememberMeProps||{},l=this.props.googleLoginProps,f=this.props.appleLoginProps,_=(0,n.default)({clearfix:!this.props.hideRememberMe||!this.props.hideHelp&&(0,o.is_supported_mobile_browser)()}),E=this.props.openLinksInNewTab?"_blank":void 0,w=(0,n.default)("clearfix","credentials-form","login-form",{"sso-required":this.props.ssoState!==h.SsoState.OFF,"sso-optional":this.props.ssoState===h.SsoState.OPTIONAL}),R=l&&l.positionBelow,L=l&&!l.positionBelow,N=f&&f.positionBelow,A=f&&!f.positionBelow,C=R||N,P=L||A,G=["V1","V2"].includes(this.props.googleOneTapVariant||"")&&!this.props.fromLegacyMobile,M=G&&!(null===(e=this.props.gsiState)||void 0===e?void 0:e.isMobile),D=G?a.default.createElement("div",{className:(0,n.default)({"login-form-container__google-div":this.props.showOneTapInlineGoogleButton})},a.default.createElement(S.DefaultButtonContainerFC,{context:"signin",gsiState:this.props.gsiState})):l?a.default.createElement(m.GoogleLoginButton,{buttonProps:l.buttonProps,disabled:this.props.disabled||this.props.isSubmitting,error:this.props.googleLoginError,onClick:this.props.onGoogleLoginClick,dwgRefreshEnabled:this.props.dwgRefreshEnabled}):null,F=f?a.default.createElement(g.AppleLoginButton,{buttonProps:f.buttonProps,disabled:this.props.disabled||this.props.isSubmitting,error:this.props.appleLoginError,onClick:this.props.onAppleLoginClick,dwgRefreshEnabled:this.props.dwgRefreshEnabled}):null,x=this.props.hideHelp||this.props.ssoState===h.SsoState.REQUIRED,k=x?null:a.default.createElement(I,{email:this.props.emailValue,target:E,appendEmail:void 0===this.props.forgotPasswordProps.appendEmail||this.props.forgotPasswordProps.appendEmail,text:this.props.forgotPasswordProps.text}),U=!!this.props.dwgRefreshEnabled&&this.props.isSubmitting,j=this.props.loginButtonProps.text||i.intl.formatMessage({id:"g451JD",defaultMessage:"Log in"}),V=a.default.createElement(c.DWGPrimaryButton,{className:(0,n.default)("login-button--dwg-refresh",this.props.loginButtonProps.className),type:"submit",disabled:this.props.disabled||this.props.isSubmitting||this.props.loginButtonProps.disabled,label:j,disableArrow:!0,susiRefreshExpIsLoading:this.props.isSubmitting,susiRefreshExpSpinnerValueText:i.intl.formatMessage({id:"TD8ILD",defaultMessage:"Submitting"}),susiRefreshExpPreloadProgressIndicators:!0,"data-uxa-log":"login_form_submit_button"}),B=this.props.dwgRefreshEnabled?V:a.default.createElement("button",{className:(0,n.default)("login-button","signin-button","button-primary",this.props.loginButtonProps.className),type:"submit",disabled:this.props.disabled||this.props.isSubmitting||this.props.loginButtonProps.disabled},this.props.ssoState===h.SsoState.OFF&&a.default.createElement("div",{className:"signin-text"},this.props.loginButtonProps.text||i.intl.formatMessage({id:"raLp6W",defaultMessage:"Sign in"})),this.props.ssoState!==h.SsoState.OFF&&a.default.createElement("div",{className:"sso-text"},i.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}))),W=a.default.createElement("div",{className:"hr-label"},a.default.createElement("span",{className:"hr-label__text"},i.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}))),H=this.props.variant===u.AuthFormVariant.PAPER_COMPACT,X=this.props.isPaperLogin;let q,Y;(function(e){e[e.INLINE_WITH_LOGIN_BUTTON=0]="INLINE_WITH_LOGIN_BUTTON",e[e.ON_NEW_LINE=1]="ON_NEW_LINE",e[e.BELOW_FORM=2]="BELOW_FORM"})(q||(q={})),Y=C||H?X&&!H?q.BELOW_FORM:q.INLINE_WITH_LOGIN_BUTTON:q.ON_NEW_LINE;const z=!!this.props.gsiState&&this.props.gsiState.isInline;return a.default.createElement("div",{className:"login-form-container--subcontainer"},L&&D,z&&a.default.createElement(S.DefaultContainerFC,{context:"signin",gsiState:this.props.gsiState}),M&&S.DEFAULT_TOS_INLINE_CONTAINER_LOGIN,A&&F,P&&!this.props.hideCredentialFields&&W,a.default.createElement("form",{className:w,onSubmit:this.props.onLoginClick,method:"POST",noValidate:!0},!this.props.hideCredentialFields&&a.default.createElement(O,{disabled:this.props.disabled||U,emailError:this.props.emailError,styledEmailError:this.props.styledEmailError,emailProps:this.props.emailProps,emailValue:this.props.emailValue,emailAsLabel:null!==(t=this.props.emailAsLabel)&&void 0!==t&&t,maestroStyle:this.props.maestroStyle,onInputChange:this.props.onInputChange,passwordError:this.props.passwordError,passwordProps:this.props.passwordProps,passwordValue:this.props.passwordValue,ssoState:this.props.ssoState,variant:this.props.variant,persistLabel:this.props.persistLabel,dwgRefreshEnabled:this.props.dwgRefreshEnabled,showPasswordByDefault:this.props.showPasswordByDefault,autofillOrUserInputHandled:this.props.autofillOrUserInputHandled,showPasswordVariant:this.props.showPasswordVariant,onUserInputKeyDown:this.props.onUserInputKeyDown}),this.props.dwgRefreshEnabled&&!x&&a.default.createElement("div",{className:"login-help--dwg-refresh"},k),this.props.loginError&&!this.props.dwgRefreshEnabled&&a.default.createElement(p.LoginError,{message:this.props.loginError}),a.default.createElement("div",{className:this.props.dwgRefreshEnabled?"sso-container--dwg-refresh":_},this.props.ssoState!==h.SsoState.OFF&&a.default.createElement(b.SsoDescription,{dwgRefreshEnabled:this.props.dwgRefreshEnabled}),this.props.dwgRefreshEnabled&&this.props.ssoState===h.SsoState.OPTIONAL&&a.default.createElement(b.SsoOptout,{onClick:this.props.onSsoChangeClick,dwgRefreshEnabled:this.props.dwgRefreshEnabled}),a.default.createElement("div",{className:(0,n.default)({"login-submit-container--dwg-refresh":this.props.dwgRefreshEnabled})},!this.props.hideRememberMe&&a.default.createElement(s.AuthCheckbox,{checked:this.props.rememberMeValue,className:"remember-me",disabled:r.disabled||this.props.disabled||U,inline:void 0===r.inline||r.inline,label:r.label||i.intl.formatMessage({id:"ztezCK",defaultMessage:"Remember me"}),maestroStyle:this.props.maestroStyle,name:"remember_me",uxaEventName:this.props.rememberMeValue?"remember_me_uncheck":"remember_me_check",onChange:this.props.onInputChange,variant:this.props.dwgRefreshEnabled?u.AuthFormVariant.DIG20:this.props.variant}),Y===q.INLINE_WITH_LOGIN_BUTTON&&k,!H&&!this.props.hideCredentialFields&&B,!this.props.dwgRefreshEnabled&&this.props.isSubmitting&&a.default.createElement(y,null)),!this.props.dwgRefreshEnabled&&this.props.ssoState===h.SsoState.OPTIONAL&&a.default.createElement(b.SsoOptout,{onClick:this.props.onSsoChangeClick,dwgRefreshEnabled:!!this.props.dwgRefreshEnabled}),!this.props.dwgRefreshEnabled&&Y===q.ON_NEW_LINE&&a.default.createElement("div",{className:"login-need-help"},k),this.props.showNaviSiteLogin&&a.default.createElement(T,{openLinkInNewTab:this.props.openLinksInNewTab}),H&&B)),R&&D,N&&F,!this.props.dwgRefreshEnabled&&Y===q.BELOW_FORM&&a.default.createElement("div",{className:"login-need-help"},k),this.props.supportsCaptcha&&a.default.createElement(d.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"LOGIN"}),a.default.createElement(v.FingerprintJs,{ref:this.setFingerprintJsComponent,source:"LOGIN"}),this.props.customFooter)}}t.LoginCredentialsForm=w,w.displayName="LoginCredentialsForm"})),define("metaserver/static/js/auth/login/email_error_banner",["require","exports","tslib","react","metaserver/static/js/components/ui/css","@dropbox/dig-components/banner","@dropbox/dig-icons","@dropbox/dig-icons/assets","@dropbox/dig-components/typography","@dropbox/dig-components/buttons","metaserver/static/js/core/i18n"],(function(e,t,r,n,a,o,i,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginEmailDisabledErrorBanner=t.LoginEmailRecoverableErrorBanner=void 0,n=r.__importDefault(n),t.LoginEmailRecoverableErrorBanner=function(e){return n.default.createElement(d,{descriptionText:e.recoverableErrorMessage,onCreateNewAccount:e.onCreateNewAccount,onRequestClose:e.onRequestClose,bannerId:"login_recoverable_email_error",id:e.id})},t.LoginEmailDisabledErrorBanner=function(e){return n.default.createElement(d,{descriptionText:e.disabledErrorMessage,onCreateNewAccount:e.onCreateNewAccount,onReRegister:e.onReRegister,onRequestClose:e.onRequestClose,bannerId:"login_disabled_email_error",id:e.id})};const d=(0,a.requireCssWithComponent)(e=>{const{learnMoreAriaLabel:t,learnMoreText:r,reRegisterButtonText:a,createANewAccountButtonText:d,titleText:p}={learnMoreText:u.intl.formatMessage({id:"o4l0fJ",defaultMessage:"Learn more"}),learnMoreAriaLabel:u.intl.formatMessage({id:"OfSk0L",defaultMessage:"Learn more about being deleted from a Dropbox team."}),reRegisterButtonText:u.intl.formatMessage({id:"cEOkYU",defaultMessage:"Re-register email"}),createANewAccountButtonText:u.intl.formatMessage({id:"DpXKIj",defaultMessage:"Create a new account"}),titleText:u.intl.formatMessage({id:"XK9XCq",defaultMessage:"This account is deleted"})};return n.default.createElement(o.Banner,{className:"login-form-email-error-banner",id:e.id,onRequestClose:e.onRequestClose,type:"alert",variant:"rich",withCloseButton:"close",withLeftPictogram:n.default.createElement(i.PictogramIcon,{src:s.WarningPictogram})},n.default.createElement(o.Banner.Message,null,n.default.createElement(l.Title,{size:"small"},p),n.default.createElement(l.Text,null,e.descriptionText," ",n.default.createElement(l.Link,{"aria-label":t,"data-trackingid":"email-error-banner-learn-more",href:"/help/508"},r))),n.default.createElement(o.Banner.Actions,null,n.default.createElement(c.Button,{"data-uxa-log":`${e.bannerId}_reregister_click`,disabled:!Boolean(e.onReRegister),onClick:e.onReRegister,type:"button",variant:"outline"},a),n.default.createElement(c.Button,{"data-uxa-log":`${e.bannerId}_create_a_new_account_click`,onClick:e.onCreateNewAccount,variant:"transparent",type:"button"},d)))},["/static/metaserver/static/css/dig-components/index.web-vfllRi-uH.css"])})),define("metaserver/static/js/auth/login/form",["require","exports","tslib","classnames","react","metaserver/static/js/core/assert","metaserver/static/js/core/browser","metaserver/static/js/core/exception","metaserver/static/js/core/html","metaserver/static/js/core/notify","metaserver/static/js/core/uri","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils","metaserver/static/js/auth/login/2fa/authenticator_form","metaserver/static/js/auth/login/2fa/email_form","metaserver/static/js/auth/login/2fa/phone_form","metaserver/static/js/auth/login/2fa/seckey_form","metaserver/static/js/auth/login/api","metaserver/static/js/auth/login/credentials_form","metaserver/static/js/auth/login/sso_utils","metaserver/static/js/auth/login/types","metaserver/static/js/components/ui/css","metaserver/static/js/core/i18n","metaserver/static/js/profile_services/profile_services_constants","metaserver/static/js/profile_services/profile_services_link","metaserver/static/js/auth/authenticator","metaserver/static/js/security/passwords","metaserver/static/js/auth/common/stats","metaserver/static/js/fedramp/fedramp_util","metaserver/static/js/auth/login/email_error_banner","metaserver/static/js/abuse/fingerprintjs_component","metaserver/static/js/google_one_tap/lib","metaserver/static/js/admin/registration_source_constants","metaserver/static/js/google_one_tap/google_one_tap_helpers"],(function(e,t,r,n,a,o,i,s,l,c,u,d,p,m,g,h,f,_,v,E,S,b,I,T,y,O,w,R,L,N,A,C,P,G){"use strict";var M;Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyLoginStep=t.TestOnlyLoginFormComponent=t.LoginForm=void 0,n=r.__importDefault(n),a=r.__importDefault(a),i=r.__importStar(i),_=r.__importStar(_),T=r.__importDefault(T),O=r.__importStar(O),A=r.__importStar(A),(function(e){e[e.CREDENTIALS_OR_SSO=0]="CREDENTIALS_OR_SSO",e[e.EMAIL_2FA=1]="EMAIL_2FA",e[e.PHONE_2FA=2]="PHONE_2FA",e[e.AUTHENTICATOR_2FA=3]="AUTHENTICATOR_2FA",e[e.SECKEY_2FA=4]="SECKEY_2FA"})(M||(M={})),t.TestOnlyLoginStep=M;class D extends a.default.Component{constructor(e){var t;super(e),this.userKeyDownDetected=!1,this.testOnlyGetSsoChecker=()=>this.ssoChecker,this.setCredentialsFormComponent=e=>{this.credentialsFormComponent=e},this.testOnlyGetCredentialsFormComponent=()=>this.credentialsFormComponent,this.listenForContextChanges=()=>{this.clearContextChangesListener(),C.GSIEventManager.createGSIEventListener(C.GSIEvent.SSO_REQUIRED,this.handleContextChange)},this.clearContextChangesListener=()=>{C.GSIEventManager.removeGSIEventListener(C.GSIEvent.SSO_REQUIRED,this.handleContextChange)},this.handleContextChange=()=>{const e=C.GSIEventManager.getGSIState().email;this.setState({email:e}),this.setState({ssoState:S.SsoState.REQUIRED})},this.onInputChange=e=>{const t=e.currentTarget,r={},n=Object.assign({},this.state.localErrors);let a=!1;switch(t.name){case"login_email":r.email=t.value,n.email=void 0,n.styledEmailError=void 0,a=!0;break;case"login_password":r.password=t.value,n.password=void 0,this.props.emailAsLabel&&(n.email=void 0),"V1"!==this.props.showPasswordVariant||this.state.autofillOrUserInputHandled||0!==this.state.password.length||(r.showPasswordByDefault=this.userKeyDownDetected||1===t.value.length,r.autofillOrUserInputHandled=!0);break;case"remember_me":r.rememberMe=t.checked;break;case"trusted":r.trusted=t.checked;break;case"code":r.twoFactorCode=t.value,n.twoFactor=void 0}r.localErrors=n,this.setState(r,()=>{a&&this.ssoChecker.checkSsoState(r.email,this.onSsoStateUpdate)})},this.onSsoStateUpdate=(e,t)=>{e===this.state.email&&this.setState({ssoState:t.user_sso_state})},this.onSsoChangeClick=()=>{(0,o.assert)(this.state.ssoState===S.SsoState.OPTIONAL,"User can change SSO state only when it is optional",{tags:["react-login-form"]}),this.setState({ssoState:S.SsoState.OFF})},this.generateThirdPartyAuthUrl=(e,t)=>{const r={fname:e.profile.given_name,lname:e.profile.family_name,email:e.profile.email,picture_url:e.profile.picture_url,refresh_token:e.refresh_token,email_sig:e.email_sig,automatic_redirect:t.toString(),cont:this.props.continuationUrl||"/"};return this.props.googleLoginProps&&this.props.googleLoginProps.signupTag&&(r.signup_tag=this.props.googleLoginProps.signupTag),this.props.googleLoginProps&&this.props.googleLoginProps.signupEndpoint&&(r.signup_endpoint=this.props.googleLoginProps.signupEndpoint,"login"==this.props.googleLoginProps.signupEndpoint?r.signup_tag=P.RegistrationSource.LOGIN_PAGE_SIGNUP_WITH_GOOGLE:"register"==this.props.googleLoginProps.signupEndpoint&&(r.signup_tag=P.RegistrationSource.REGISTER_PAGE_SIGN_UP_WITH_GOOGLE)),String(new u.URI({path:"/third_party_signup"}).updateQuery(r))},this.handleGoogleCallback=e=>r.__awaiter(this,void 0,void 0,(function*(){R.AuthAMPLogger.logThirdPartyLoginResponse(R.AuthType.GOOGLE,this.props.type,e.success,e.err_msg),R.GoogleUXAnalyticsLogger.logLoginResponse(e);let t=(0,L.getFedrampRedirectUrlIfApplicable)(e.is_fedramp_user||!1,this.props.continuationUrl||"/");if(e.profile&&!A.isTest()&&(yield this.credentialsFormComponent.getFingerprintJsComponent().getWrappedComponent().invokeFPJSIframeAndLog(e.profile.email)),e.success)this.handleLoginFormEvent(S.LoginFormEvent.GOOGLE_LOGIN_SUCCESS),!1!==this.props.canRedirect?(c.Notify.success(I.intl.formatMessage({id:"Ce9FpX",defaultMessage:"Log in successful! Your browser will be redirected in a few seconds."})),i.redirect(t)):e.is_fedramp_user&&!this.props.forceOnLoginSuccess?(t=(0,L.getFedrampRedirectUrlIfApplicable)(!0,this.props.continuationUrl||i.get_href()),i.redirect(t)):this.props.onLoginSuccess&&this.props.onLoginSuccess({display_name:e.display_name,id:e.user_id,email:e.profile.email,is_fedramp_user:e.is_fedramp_user});else if("emails_do_not_match_redirect"===e.err_msg){const t=this.props.googleLoginProps,r=t&&t.customErrorHandlers;if(r&&r.emailsDoNotMatchRedirect)r.emailsDoNotMatchRedirect(e);else{R.GoogleUXAnalyticsLogger.logSignupStart();const t=this.generateThirdPartyAuthUrl(e,!0);i.redirect(t)}}else if("emails_do_not_match"===e.err_msg)if("pairing"!==this.props.type&&this.props.variant===d.AuthFormVariant.STANDARD){const t=this.generateThirdPartyAuthUrl(e,!1),r=I.intl.formatMessage({id:"6AHSKo",defaultMessage:"Oops! We couldn’t find a Dropbox account matching that email. <a>Click here to create one.</a>"},{a:e=>a.default.createElement("a",{className:"third-party-signup-link",href:t,"data-uxa-log":"google_signup_start"},e)});this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{googleLogin:r})})}else e.localized_error?c.Notify.error(e.localized_error):c.Notify.error(I.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}));else if("tos_required"===e.err_msg){const t=new u.URI({path:"/account/complete_registration_page"}).updateQuery({finish_web_auth:"true",remember_me:e.remember_me.toString(),cont:this.props.continuationUrl||"/"});i.redirect(t.toString())}else if("tfa_required"===e.err_msg){const r=new u.URI({path:"/verify_code"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(r.toString())}else if("enable_twofactor_required"===e.err_msg){const r=new u.URI({path:"/twofactor"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(r.toString())}else if("not_verified"===e.err_msg){const r=new u.URI({path:"/show_password_form"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(r.toString())}else if("email_not_verified"===e.err_msg){const t=I.intl.formatMessage({id:"S6RuBm",defaultMessage:"Before you can sign in, you’ll need to verify your account with Google {email}"},{email:e.profile.email});c.Notify.error(new l.HTML(`<span>${t}</span>`),30)}else e.localized_error?c.Notify.error(e.localized_error):c.Notify.error(I.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),"google_login_not_allowed"!==e.err_msg&&"sso_required"!==e.err_msg||(this.setState({email:e.profile.email}),this.ssoChecker.checkSsoState(e.profile.email,this.onSsoStateUpdate))})),this.onGoogleLoginClick=()=>{this.handleLoginFormEvent(S.LoginFormEvent.GOOGLE_LOGIN_CLICK),this.setState({localErrors:{}}),R.AuthAMPLogger.logLoginAttempt(R.AuthType.GOOGLE,this.props.type);const e=!!this.props.googleLoginProps&&!1!==this.props.googleLoginProps.popup,t=new y.ProfileServicesLinkingHandler,r=["pairing","link_user","bidirectional_pair"].includes(this.props.type);t.auth_service_login_web(T.default.GOOGLE,this.handleGoogleCallback,"login_form",e?y.AuthWindowOption.POP_UP:y.AuthWindowOption.REDIRECT,this.state.rememberMe,this.props.continuationUrl||"/",r,this.props.webSignInTag?[this.props.webSignInTag,"google_legacy_login"].join("_"):void 0)},this.handleAppleCallback=e=>r.__awaiter(this,void 0,void 0,(function*(){R.AuthAMPLogger.logThirdPartyLoginResponse(R.AuthType.APPLE,this.props.type,e.success,e.err_msg),R.AppleUXAnalyticsLogger.logLoginResponse(e);let t=(0,L.getFedrampRedirectUrlIfApplicable)(e.is_fedramp_user||!1,this.props.continuationUrl||"/");if(e.profile&&!A.isTest()&&(yield this.credentialsFormComponent.getFingerprintJsComponent().getWrappedComponent().invokeFPJSIframeAndLog(e.profile.email)),e.success)this.handleLoginFormEvent(S.LoginFormEvent.APPLE_LOGIN_SUCCESS),!1!==this.props.canRedirect?(c.Notify.success(I.intl.formatMessage({id:"ZJmJez",defaultMessage:"Sign in successful! Your browser will be redirected in a few seconds."})),i.redirect(t)):e.is_fedramp_user&&!this.props.forceOnLoginSuccess?(t=(0,L.getFedrampRedirectUrlIfApplicable)(!0,this.props.continuationUrl||i.get_href()),i.redirect(t)):this.props.onLoginSuccess&&this.props.onLoginSuccess({display_name:e.display_name,id:e.user_id,email:e.profile.email,is_fedramp_user:e.is_fedramp_user});else if("no_email_in_response"===e.err_msg){const e=I.intl.formatMessage({id:"oFA/9f",defaultMessage:"Sign in failed. If you’d like to sign in with Apple again, <a>see how in our help center</a>. You could also sign in with your Dropbox account email and password."},{a:e=>`<a href="/help/accounts-billing/settings-sign-in/apple-sign-in-error">${e}</a>`});c.Notify.error(new l.HTML(`<span>${e}</span>`),30)}else if("tfa_required"===e.err_msg){const r=new u.URI({path:"/verify_code"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(r.toString())}else if("enable_twofactor_required"===e.err_msg){const r=new u.URI({path:"/twofactor"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(r.toString())}else if("requires_password_on_first_link"===e.err_msg){const r=new u.URI({path:"/show_password_form"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(r.toString())}else if("emails_do_not_match"===e.err_msg){const t=I.intl.formatMessage({id:"8cKJMG",defaultMessage:"We couldn’t find a Dropbox account matching the email {email}. <a1>Sign up for a new account</a1> or <a2>get help signing in</a2> to an existing account."},{a1:e=>`<a href="/individual/plans-comparison?_tk=sia_nomatch_plan_web">${e}</a1>`,a2:e=>`<a href="/help/accounts-billing/settings-sign-in/sign-in-with-apple?_tk=sia_nomatch_help_web">${e}</a2>`,email:e.profile.email});c.Notify.error(new l.HTML(`<span>${t}</span>`),30)}else e.localized_error?c.Notify.error(e.localized_error):c.Notify.error(I.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),"apple_login_not_allowed"===e.err_msg&&(this.setState({email:e.profile.email}),this.ssoChecker.checkSsoState(e.profile.email,this.onSsoStateUpdate))})),this.onAppleLoginClick=()=>{this.handleLoginFormEvent(S.LoginFormEvent.APPLE_LOGIN_CLICK),this.setState({localErrors:{}}),R.AuthAMPLogger.logLoginAttempt(R.AuthType.APPLE,this.props.type),R.AppleUXAnalyticsLogger.logLoginStart();const e=!!this.props.appleLoginProps&&!1!==this.props.appleLoginProps.popup;(new y.ProfileServicesLinkingHandler).auth_service_login_web(T.default.APPLE,this.handleAppleCallback,"login_form",e?y.AuthWindowOption.POP_UP:y.AuthWindowOption.REDIRECT,this.state.rememberMe,this.props.continuationUrl||"/","pairing"===this.props.type,this.props.webSignInTag?[this.props.webSignInTag,"apple_login"].join("_"):void 0)},this.credentialsFormData=()=>{const e=Object.assign(Object.assign(Object.assign(Object.assign({login_email:this.state.email,cont:this.props.continuationUrl||"/",remember_me:this.state.rememberMe},this.credentialsFormComponent.getCaptchaResponses()),this.credentialsFormComponent.getVisitorId()),this.props.additionalData),this.props.webSignInTag&&{web_signin_tag:[this.props.webSignInTag,"email_login"].join("_")});if(void 0===this.props.encryptionOptions)return Promise.reject(new Error("Must provide encryption options"));const t=this.state.ssoState===S.SsoState.OFF?this.state.password:"";return(0,w.wrapPassword)(t,this.props.encryptionOptions).then(t=>(e.encrypted_password=t,Promise.resolve(e)))},this.handleLoginSuccess=e=>r.__awaiter(this,void 0,void 0,(function*(){if(this.handleLoginFormEvent(S.LoginFormEvent.LOGIN_IMMEDIATE_SUCCESS,{userInfo:e}),this.state.didEnterIncorrectPassword&&(yield _.updateDropboxPasswordsEligibility("incorrect_password")),!1!==this.props.canRedirect){const t=(0,L.getFedrampRedirectUrlIfApplicable)(e.is_fedramp_user||!1,e.cont_override||this.props.continuationUrl||"/");return i.redirect(t)}if(e.is_fedramp_user&&!this.props.forceOnLoginSuccess){const e=(0,L.getFedrampRedirectUrlIfApplicable)(!0,this.props.continuationUrl||i.get_href());return i.redirect(e)}return this.props.onLoginSuccess?this.props.onLoginSuccess(e):i.redirect("/")})),this.handleSuccessResponse=e=>{switch(this.setState({isSubmitting:!1}),R.AuthAMPLogger.logCredentialsLoginResponse(this.props.type,e.status),R.EmailAuthUXAnalyticsLogger.logLoginResponse(e),e.status){case S.LoginResponseStatus.ERROR:const t=e.html_response?new l.HTML(e.message):e.message;return c.Notify.error(t);case S.LoginResponseStatus.EXPIRED:return i.redirect(e.cont);case S.LoginResponseStatus.OK:const r={id:e.id,email:e.email,display_name:e.display_name,locale:e.locale,is_fedramp_user:e.is_fedramp_user,cont_override:e.cont_override};this.handleLoginSuccess(r);break;case S.LoginResponseStatus.PASSWORD_EXPIRED:return this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{email:{message_text:I.intl.formatMessage({id:"3EEu7s",defaultMessage:"The password of the account associated with this email has expired. Please login to this account and update its password before pairing."})}})});case S.LoginResponseStatus.RATELIMIT:return this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{email:{message_text:I.intl.formatMessage({id:"7k/CMy",defaultMessage:"You’ve tried to log in too many times. Please try again in a few minutes."})}})});case S.LoginResponseStatus.TWOFACTOR_REQUIRED:case S.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:return i.redirect(e.cont);case S.LoginResponseStatus.TWOFACTOR:e.checkpoint_token&&this.setState({checkpointToken:e.checkpoint_token}),e.use_email_2fa?(R.EmailAuthUXAnalyticsLogger.logEmailVerifyWithCodeStart(),this.setState({primaryTwoFactorType:S.TwoFactorType.EMAIL,currentStep:M.EMAIL_2FA})):e.u2f_challenge&&O.canUseAuthenticator(this.generateU2fRequest(e.u2f_challenge))?(this.setState({primaryTwoFactorType:S.TwoFactorType.SEC_KEY,currentStep:M.SECKEY_2FA}),e.last_two_digits?this.setState({lastTwoDigits:e.last_two_digits,secondaryTwoFactorType:S.TwoFactorType.SMS}):this.setState({secondaryTwoFactorType:S.TwoFactorType.AUTHENTICATOR}),this.kickOffU2f(e.u2f_challenge)):e.last_two_digits?this.setState({primaryTwoFactorType:S.TwoFactorType.SMS,lastTwoDigits:e.last_two_digits,secondaryTwoFactorType:void 0,currentStep:M.PHONE_2FA}):this.setState({primaryTwoFactorType:S.TwoFactorType.AUTHENTICATOR,lastTwoDigits:void 0,secondaryTwoFactorType:void 0,currentStep:M.AUTHENTICATOR_2FA});break;case S.LoginResponseStatus.SSO:return i.unsafeRedirect(e.sso_url);case S.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:return i.redirect(e.cont)}},this.handleServerErrors=e=>{if(R.AuthAMPLogger.logCredentialsLoginResponse(this.props.type,e.funcaptcha_response?"funcaptcha_response":"form_error"),this.credentialsFormComponent.handleCaptchaErrors(e))return void setTimeout(()=>{this.isCaptchaReady||(0,p.notifyCaptchaNotLoaded)()},1e4);R.EmailAuthUXAnalyticsLogger.logLoginError();const t={};e.login_email?t.email=e.login_email:t.email=void 0,e.login_password?t.password=e.login_password:t.password=void 0,e["failed-login-invalid-email-password"]?(t.login=I.intl.formatMessage({id:"kfg1Pg",defaultMessage:"Oops! It looks like you may have forgotten your password. <a>Click here to reset it.</a>"},{a:e=>a.default.createElement("a",{href:"/forgot"},e)}),this.setState({didEnterIncorrectPassword:!0})):t.login=void 0,e["account-is-disabled"]&&e.login_email&&e.login_email.message_text&&this.props.onCreateNewAccountClick&&this.props.onReRegisterClick&&(t.styledEmailError=t=>(R.AuthUXAnalyticsLogger.logDisabledErrorDismissed(),a.default.createElement(N.LoginEmailDisabledErrorBanner,{disabledErrorMessage:e.login_email.message_text,onCreateNewAccount:this.props.onCreateNewAccountClick,onReRegister:()=>this.props.onReRegisterClick(this.state.email),onRequestClose:()=>{R.AuthUXAnalyticsLogger.logDisabledErrorDismissed(),this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{styledEmailError:void 0})})},id:t.id})),t.email=void 0),e["account-is-recoverable"]&&e.login_email&&e.login_email.message_text&&this.props.onCreateNewAccountClick&&(t.styledEmailError=t=>(R.AuthUXAnalyticsLogger.logRecoverableErrorDismissed(),a.default.createElement(N.LoginEmailRecoverableErrorBanner,{onCreateNewAccount:this.props.onCreateNewAccountClick,onRequestClose:()=>{R.AuthUXAnalyticsLogger.logRecoverableErrorDismissed(),this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{styledEmailError:void 0})})},recoverableErrorMessage:e.login_email.message_text,id:t.id})),t.email=void 0),this.setState({localErrors:t}),this.setState({isSubmitting:!1})},this.onCredentialsFormSubmit=()=>r.__awaiter(this,void 0,void 0,(function*(){R.EmailAuthUXAnalyticsLogger.logLoginStart(),this.setState({isSubmitting:!0}),this.state.email&&!A.isTest()&&(yield this.credentialsFormComponent.getFingerprintJsComponent().getWrappedComponent().invokeFPJSIframeAndLog(this.state.email)),this.credentialsFormData().then(e=>{_.submitCredentialsForm(this.props.type,e).then(this.handleSuccessResponse).catch(this.handleServerErrors)}).catch(e=>{let t,r;e.isBrowserNotSupported?(t="user-error",r=I.intl.formatMessage({id:"rWb8d2",defaultMessage:"Dropbox doesn’t support your browser. For a better experience, upgrade to the latest version of a modern browser like Chrome, Firefox, Edge, or Safari."})):(t="critical",r=I.intl.formatMessage({id:"dNlIBC",defaultMessage:"There was a problem completing this request."})),(0,s.reportException)({err:e,severity:t,tags:["react-login-form"]}),this.setState({isSubmitting:!1}),c.Notify.error(r)})})),this.onLoginClick=e=>{e.preventDefault(),R.AuthAMPLogger.logLoginAttempt(R.AuthType.CREDENTIALS,this.props.type),this.handleLoginFormEvent(S.LoginFormEvent.LOGIN_CLICK),this.credentialsFormComponent.submitRecaptcha()},this.handleResendCodeSuccess=e=>{let t;switch(e){case S.TwoFactorResendResponse.OK:return c.Notify.success(I.intl.formatMessage({id:"vdqTup",defaultMessage:"We sent you a code. It may take a few minutes to arrive."}));case S.TwoFactorResendResponse.RATELIMIT:t=I.intl.formatMessage({id:"7k/CMy",defaultMessage:"You’ve tried to log in too many times. Please try again in a few minutes."});break;case S.TwoFactorResendResponse.UNREACHABLE:t=I.intl.formatMessage({id:"G6HUee",defaultMessage:"We couldn’t reach your phone number. Are you sure it’s correct?"});break;case S.TwoFactorResendResponse.EXPIRED:t=I.intl.formatMessage({id:"l5AyQn",defaultMessage:"Sorry, your phone code has expired. Please log in again."});break;case S.TwoFactorResendResponse.BADCARRIER:t=I.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."});break;case S.TwoFactorResendResponse.INVALIDNUMBER:t=I.intl.formatMessage({id:"1P05hM",defaultMessage:"That isn’t a valid phone number."});break;case S.TwoFactorResendResponse.NOTAMOBILE:t=I.intl.formatMessage({id:"aI/ARD",defaultMessage:"That phone number doesn’t appear to be a valid mobile number."});break;default:return c.Notify.error(I.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{twoFactor:{message_text:t}})})},this.resendCode=()=>{var e,t,r,n;const a=_.resendTwoFactorCode(null!==(t=null===(e=this.props.additionalData)||void 0===e?void 0:e.backup)&&void 0!==t&&t,null!==(n=null===(r=this.props.additionalData)||void 0===r?void 0:r.mobile_push)&&void 0!==n&&n);a.then(this.handleResendCodeSuccess),a.catch(()=>{c.Notify.error(I.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))})},this.handleTwoFactorSuccess=e=>{switch(R.AuthAMPLogger.log2faResponse(this.props.type,e.status),this.state.currentStep===M.EMAIL_2FA&&R.EmailAuthUXAnalyticsLogger.logEmailVerifyWithCodeSuccess(),e.status){case S.LoginResponseStatus.OK:this.state.currentStep===M.SECKEY_2FA&&this.setState({securityKeyState:S.SecurityKeyState.FOUND});const t={id:e.id,email:e.email,display_name:e.display_name,locale:e.locale,is_fedramp_user:e.is_fedramp_user,cont_override:e.cont_override};this.handleLoginSuccess(t);break;case S.LoginResponseStatus.ERROR:c.Notify.error(e.message);break;case S.LoginResponseStatus.REQUIRES_ROLE:case S.LoginResponseStatus.EXPIRED:this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{email:{message_text:e.message}}),currentStep:M.CREDENTIALS_OR_SSO});break;case S.LoginResponseStatus.INVALID_CREDENTIALS:this.state.currentStep===M.EMAIL_2FA&&R.EmailAuthUXAnalyticsLogger.logEmailVerifyWithCodeSuccessCredentialsError(),this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{password:{message_text:e.message}}),currentStep:M.CREDENTIALS_OR_SSO});break;default:c.Notify.error(I.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}},this.twoFactorFormData=()=>{const e=Object.assign({remember_me:this.state.rememberMe,cont:this.props.continuationUrl||"/",code:this.state.twoFactorCode,trusted:this.state.trusted},this.props.additionalData);return this.state.checkpointToken?Object.assign({checkpoint_token:this.state.checkpointToken},e):e},this.submitTwoFactor=()=>{this.setState({isSubmitting:!0}),this.state.currentStep===M.EMAIL_2FA&&R.EmailAuthUXAnalyticsLogger.logEmailVerifyWithCodeSubmission();const e=_.submitTwoFactorForm(this.props.type,this.twoFactorFormData());e.then(this.handleTwoFactorSuccess),e.catch(e=>{R.AuthAMPLogger.log2faResponse(this.props.type,e.u2f?"u2f_error":e.code?"code_error":"unknown"),this.state.currentStep===M.EMAIL_2FA&&R.EmailAuthUXAnalyticsLogger.logEmailVerifyWithCodeError(),this.state.currentStep===M.SECKEY_2FA&&e.u2f?this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{securityKey:e.u2f.message_text}),securityKeyState:S.SecurityKeyState.NOT_FOUND}):e.code?this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{twoFactor:e.code})}):c.Notify.error(I.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}),e.finally(()=>{this.setState({isSubmitting:!1})})},this.onPhone2FASubmit=e=>{e.preventDefault(),this.submitTwoFactor()},this.onAuthenticator2FASubmit=e=>{e.preventDefault(),this.submitTwoFactor()},this.generateU2fRequest=e=>{const t=JSON.parse(e),r={challenge_id:t.challenge_id};for(const e of Object.keys(O.PROTOCOLS))r[e]=t[e]&&JSON.parse(t[e]);return r},this.kickOffU2f=e=>r.__awaiter(this,void 0,void 0,(function*(){const t=this.generateU2fRequest(e);if(O.canUseAuthenticator(t))try{const e=yield O.sign(t);this.state.currentStep===M.SECKEY_2FA&&this.setState({twoFactorCode:JSON.stringify(e)},()=>this.submitTwoFactor())}catch(e){this.state.currentStep===M.SECKEY_2FA&&this.setState({securityKeyState:S.SecurityKeyState.NOT_FOUND}),(0,o.assert)(!1,`U2F Error - ${e}`,{tags:["react-login-form","u2f"]})}})),this.switch2FA=()=>{let e;(0,o.assert)(this.state.primaryTwoFactorType===S.TwoFactorType.SEC_KEY,"Unexpected two factor choice switch",{tags:["react-login-form"]}),this.state.secondaryTwoFactorType===S.TwoFactorType.SMS?(e=M.PHONE_2FA,this.resendCode()):e=M.AUTHENTICATOR_2FA,this.setState({twoFactorCode:"",primaryTwoFactorType:this.state.secondaryTwoFactorType,secondaryTwoFactorType:void 0,currentStep:e})},this.onRetryU2f=()=>{this.setState({securityKeyState:S.SecurityKeyState.LOADING});const e=_.retryU2fAuthentication();e.then(this.kickOffU2f),e.catch(()=>{this.setState({securityKeyState:S.SecurityKeyState.NOT_FOUND}),c.Notify.error(I.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))})},this.onUserInputKeyDown=e=>{"Unidentified"!==e.key&&(this.userKeyDownDetected=!0)},this.onCaptchaReady=()=>{this.isCaptchaReady=!0},(0,o.assert)(!1!==e.canRedirect||!!e.onLoginSuccess,"Need an on login success handler if we cannot redirect the user",{tags:["react-login-form"]}),this.ssoChecker=new E.SsoStateChecker,this.isCaptchaReady=!1;let n=M.CREDENTIALS_OR_SSO,m=void 0,g=void 0,h=void 0;e.twoFactorOnlyProps&&(e.twoFactorOnlyProps.u2fChallenge&&!(null===(t=e.additionalData)||void 0===t?void 0:t.backup)&&O.canUseAuthenticator(this.generateU2fRequest(e.twoFactorOnlyProps.u2fChallenge))?(n=M.SECKEY_2FA,m=S.TwoFactorType.SEC_KEY,e.twoFactorOnlyProps.lastTwoDigits?(g=S.TwoFactorType.SMS,h=e.twoFactorOnlyProps.lastTwoDigits):g=S.TwoFactorType.AUTHENTICATOR):e.twoFactorOnlyProps.lastTwoDigits?(n=M.PHONE_2FA,m=S.TwoFactorType.SMS,h=e.twoFactorOnlyProps.lastTwoDigits):(n=M.AUTHENTICATOR_2FA,m=S.TwoFactorType.AUTHENTICATOR)),this.state={currentStep:n,email:e.emailProps&&e.emailProps.initialValue||"",isSubmitting:!1,lastTwoDigits:h,localErrors:{},password:"",primaryTwoFactorType:m,secondaryTwoFactorType:g,rememberMe:e.rememberMeCheckboxProps&&e.rememberMeCheckboxProps.checked||!1,securityKeyState:S.SecurityKeyState.LOADING,ssoState:S.SsoState.OFF,trusted:e.twoFactorTrustCheckboxProps&&e.twoFactorTrustCheckboxProps.checked||!1,twoFactorCode:"",checkpointToken:void 0,shouldDisableForm:!0,didEnterIncorrectPassword:!1,showPasswordByDefault:"V1"===this.props.showPasswordVariant,autofillOrUserInputHandled:!1}}componentDidUpdate(e,t){var r,n,a;(null===(r=this.props.emailProps)||void 0===r?void 0:r.initialValue)!==(null===(n=e.emailProps)||void 0===n?void 0:n.initialValue)&&this.setState({email:(null===(a=this.props.emailProps)||void 0===a?void 0:a.initialValue)||""}),["V1","V2"].includes(this.props.googleOneTapVariant||"")&&t.isSubmitting!==this.state.isSubmitting&&(0,G.setGoogleOneTapDisabledBodyClass)(this.state.isSubmitting)}handleLoginFormEvent(e,t){(0,p.pushMarketingEvent)(e,this.props.pushConversionDataReadyMarketingEvent),this.props.onLoginFormEvent&&this.props.onLoginFormEvent(e,t)}componentDidMount(){this.setState({shouldDisableForm:!1}),this.listenForContextChanges(),this.props.twoFactorOnlyProps||R.AuthAMPLogger.logLoginIntent(this.props.type),this.props.twoFactorOnlyProps&&this.props.twoFactorOnlyProps.u2fChallenge&&this.state.currentStep===M.SECKEY_2FA&&this.kickOffU2f(this.props.twoFactorOnlyProps.u2fChallenge),this.state.email&&!this.props.emailAsLabel&&this.ssoChecker.checkSsoState(this.state.email,this.onSsoStateUpdate)}get shouldDisableForm(){return!!this.props.disabled||this.state.shouldDisableForm}get supportsCaptcha(){return!this.props.hideCredentialFields&&!["multi","pairing","cli_link_nonce"].includes(this.props.type)}render(){var e,t,r,o;let i;switch(this.state.currentStep){case M.CREDENTIALS_OR_SSO:i=a.default.createElement(v.LoginCredentialsForm,{ref:this.setCredentialsFormComponent,disabled:this.shouldDisableForm,emailError:this.state.localErrors.email,styledEmailError:this.state.localErrors.styledEmailError,emailProps:this.props.emailProps||{},emailValue:this.state.email,forgotPasswordProps:this.props.forgotPasswordProps||{},googleLoginError:this.state.localErrors.googleLogin,googleLoginProps:this.props.googleLoginProps,appleLoginError:this.state.localErrors.appleLogin,appleLoginProps:this.props.appleLoginProps,hideCredentialFields:this.props.hideCredentialFields||!1,hideHelp:this.props.hideHelp||!1,hideRememberMe:this.props.hideRememberMe||!1,isPaperLogin:this.props.isPaperLogin||!1,isSubmitting:this.state.isSubmitting,loginButtonProps:this.props.loginButtonProps||{},loginError:this.state.localErrors.login,maestroStyle:this.props.maestroStyle||!1,onGoogleLoginClick:this.onGoogleLoginClick,onAppleLoginClick:this.onAppleLoginClick,onInputChange:this.onInputChange,onLoginClick:this.onLoginClick,openLinksInNewTab:!!this.props.openLinksInNewTab,onSsoChangeClick:this.onSsoChangeClick,onSubmit:this.onCredentialsFormSubmit,onCaptchaReady:this.onCaptchaReady,passwordError:this.state.localErrors.password,passwordProps:this.props.passwordProps||{},passwordValue:this.state.password,persistLabel:!!this.props.persistLabel,rememberMeProps:this.props.rememberMeCheckboxProps||{},rememberMeValue:this.state.rememberMe,showNaviSiteLogin:!!this.props.showNaviSiteLogin,ssoState:this.state.ssoState,supportsCaptcha:this.supportsCaptcha,variant:this.props.variant||d.AuthFormVariant.STANDARD,googleOneTapVariant:this.props.googleOneTapVariant,gsiState:this.props.gsiState,showOneTapInlineGoogleButton:this.props.showOneTapInlineGoogleButton,dwgRefreshEnabled:this.props.dwgRefreshEnabled,fromLegacyMobile:this.props.fromLegacyMobile,emailAsLabel:this.props.emailAsLabel,customFooter:this.props.customFooter,showPasswordByDefault:this.state.showPasswordByDefault,autofillOrUserInputHandled:this.state.autofillOrUserInputHandled,showPasswordVariant:this.props.showPasswordVariant,onUserInputKeyDown:this.onUserInputKeyDown});break;case M.PHONE_2FA:i=a.default.createElement(h.Phone2FAForm,{continuationUrl:this.props.continuationUrl,displayHeader:null!==(e=this.props.twoFactorDisplayHeader)&&void 0!==e&&e,error:this.state.localErrors.twoFactor,hideHelp:this.props.hideHelp||!1,hideTrustCheckbox:this.props.hideRememberMe||!1,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,lastTwoDigits:this.state.lastTwoDigits||"",maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onResendCodeClick:this.resendCode,onSubmit:this.onPhone2FASubmit,rememberMe:this.state.rememberMe,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,value:this.state.twoFactorCode,variant:this.props.variant||d.AuthFormVariant.STANDARD});break;case M.EMAIL_2FA:i=a.default.createElement(g.Email2FAForm,{displayHeader:null!==(t=this.props.twoFactorDisplayHeader)&&void 0!==t&&t,email:this.state.email,error:this.state.localErrors.twoFactor,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onSubmit:this.onPhone2FASubmit,value:this.state.twoFactorCode,variant:this.props.variant||d.AuthFormVariant.STANDARD,onResendCodeClick:this.resendCode});break;case M.AUTHENTICATOR_2FA:i=a.default.createElement(m.Authenticator2FAForm,{continuationUrl:this.props.continuationUrl,displayHeader:null!==(r=this.props.twoFactorDisplayHeader)&&void 0!==r&&r,error:this.state.localErrors.twoFactor,hideHelp:this.props.hideHelp||!1,hideTrustCheckbox:this.props.hideRememberMe||!1,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onSubmit:this.onAuthenticator2FASubmit,rememberMe:this.state.rememberMe,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,value:this.state.twoFactorCode,variant:this.props.variant||d.AuthFormVariant.STANDARD});break;case M.SECKEY_2FA:i=a.default.createElement(f.SecKey2FAForm,{displayHeader:null!==(o=this.props.twoFactorDisplayHeader)&&void 0!==o&&o,error:this.state.localErrors.securityKey,hideTrustCheckbox:this.props.hideRememberMe||!1,maestroStyle:this.props.maestroStyle||!1,onChange2FA:this.switch2FA,onInputChange:this.onInputChange,onRetry:this.onRetryU2f,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,secondaryTwoFactorType:this.state.secondaryTwoFactorType,securityKeyState:this.state.securityKeyState,variant:this.props.variant||d.AuthFormVariant.STANDARD})}const s=(0,n.default)("login-form-container",this.props.variant,this.props.className,{"login-form-container--centered":this.props.centered,"login-form-container--maestro":this.props.maestroStyle});return a.default.createElement("div",{className:s},a.default.createElement("div",{className:"regular-login-forms"},i))}}t.TestOnlyLoginFormComponent=D,D.displayName="LoginFormComponent",t.LoginForm=(0,b.requireCssWithComponent)(D,["/static/metaserver/static/css/components/exp_cards-vfls5BO1G.css","/static/metaserver/static/css/components/login_form-vflecD4PI.css","/static/metaserver/static/css/components/button-vfl7d2xHj.css","/static/metaserver/static/css/legacy_packages/components-vflWGC3Ox.css","/static/metaserver/static/css/login_or_register-vfloa6gxK.css","/static/metaserver/static/css/scooter/scooter-scoped-vfl0EaHDR.css","/static/metaserver/static/css/spectrum/index.web-vflkAt7yn.css","/static/metaserver/static/css/dig-components/index.web-vfllRi-uH.css","/static/typescript/component_libraries/dwg-components/src/index.web-vflqs9Gql.css","/static/metaserver/static/css/recaptcha_challenge-vflrcf67y.css","/static/metaserver/static/css/recaptcha_v2_challenge-vflYEW-GO.css"])})),define("metaserver/static/js/auth/login/google_login_button",["require","exports","tslib","react","classnames","metaserver/static/js/core/i18n","metaserver/static/js/auth/login/login_error","typescript/component_libraries/dwg-components/src/components/dwg-sso-button/index"],(function(e,t,r,n,a,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleLoginButton=void 0,n=r.__importDefault(n),a=r.__importDefault(a);t.GoogleLoginButton=e=>{const t=e.buttonProps||{},r=t.text||l();return n.default.createElement("div",{className:"login-form-container__google-div"},n.default.createElement(s.DWGSSOButton,{onClick:e.onClick,classes:(0,a.default)("auth-google"),disabled:e.disabled||t.disabled,service:"google",width:"full",dataUxaLog:"google_login_start",v2variant:e.dwgRefreshEnabled},r),e.error&&n.default.createElement(i.LoginError,{className:"google-login-error",message:e.error}))};const l=()=>o.intl.formatMessage({id:"ZSNwEY",defaultMessage:"Continue with Google"});o.intl.formatMessage({id:"lMLliC",defaultMessage:"Loading Sign in with Google button"})})),define("metaserver/static/js/auth/login/login_error",["require","exports","tslib","react","classnames"],(function(e,t,r,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginError=void 0,n=r.__importDefault(n),a=r.__importDefault(a);t.LoginError=e=>{const t=(0,a.default)("c-card","c-card--error",e.className);return n.default.createElement("div",{className:t},e.message)}})),define("metaserver/static/js/auth/login/login_sso",["require","exports","tslib","typescript/component_libraries/dwg-components/src/components/dwg-button2/index","metaserver/static/js/core/i18n","react","typescript/component_libraries/dwg-components/src/atoms/dwg-box/index","typescript/component_libraries/dwg-components/src/components/dwg-lazy-icon/index","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","metaserver/static/js/clean/ui/sprite_div"],(function(e,t,r,n,a,o,i,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SsoDescription=t.SsoOptout=void 0,o=r.__importDefault(o),c=r.__importDefault(c);t.SsoOptout=e=>e.dwgRefreshEnabled?o.default.createElement(n.DWGTransparentButton,{className:"link--dwg-refresh sso-link-container",disableArrow:!0,label:a.intl.formatMessage({id:"LBVrGQ",defaultMessage:"or login with Dropbox credentials"}),onClick:e.onClick,"data-uxa-log":"login_sso_user_continue_with_credentials"}):o.default.createElement("div",{className:"sso-optout"},a.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"})," ",o.default.createElement("a",{href:"#",onClick:e.onClick},a.intl.formatMessage({id:"fRMS5E",defaultMessage:"Log in with Dropbox credentials"})));t.SsoDescription=e=>{const t=a.intl.formatMessage({id:"WH73xS",defaultMessage:"Single sign-on enabled"});return e.dwgRefreshEnabled?o.default.createElement(i.DWGBox,{className:"sso-description sso-description--dwg-refresh"},o.default.createElement(s.DWGLazyUIIcon,{src:"LockLine"}),o.default.createElement(l.DWGText,{className:"sso-description-label--dwg-refresh",fontSize:14,lineHeight:18,fontWeight:"regular",fontFamily:"atlas-grotesk"},t)):o.default.createElement("div",{className:"sso-description"},o.default.createElement(c.default,{group:"web",name:"lock",text:t}))}})),define("metaserver/static/js/auth/login_or_register/login_register_container",["require","exports","tslib","react","react-intl","classnames","metaserver/static/js/core/i18n","metaserver/static/js/components/ui/css","metaserver/static/js/auth/login_or_register/logging_util","metaserver/static/js/auth/login_or_register/types","metaserver/static/js/auth/login/form","metaserver/static/js/auth/register/form","typescript/component_libraries/dwg-components/src/components/dwg-button2/index","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","metaserver/static/js/google_one_tap/lib","metaserver/static/js/google_one_tap/google_one_tap_helpers","@dropbox/dig-components/typography","ts-key-enum","metaserver/static/js/google_one_tap/google_one_tap_platform"],(function(e,t,r,n,a,o,i,s,l,c,u,d,p,m,g,h,f,_,v){"use strict";var E;Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyStatelessLoginRegisterContainer=t.LoginRegisterContainer=t.StatelessLoginRegisterContainer=t.SwitchLinkLocationEnum=void 0,n=r.__importStar(n),o=r.__importDefault(o),(function(e){e.TOP="top",e.BOTTOM="bottom"})(E=t.SwitchLinkLocationEnum||(t.SwitchLinkLocationEnum={}));const S=(0,a.defineMessages)({registerHeader:{id:"P09UfX",defaultMessage:"Create an account"},loginHeader:{id:"Tlook7",defaultMessage:"Login"},switchToRegisterLinkLabel:{id:"91fajJ",defaultMessage:"create an account"},switchToLoginLinkLabel:{id:"Jzb6sp",defaultMessage:"login"}}),b=({switchLinkLabel:e,onSwitchLinkAction:t,switchLinkUxaId:r,hideSwitchOrText:a=!1,href:o})=>n.default.createElement("div",{className:"login-register-switch"},!a&&n.default.createElement("span",null,`${i.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"})} `),n.default.createElement(f.Link,{className:"login-register-switch-link",onClick:t,onKeyDown:e=>{e.target instanceof HTMLAnchorElement&&[_.Key.Enter," "].includes(e.key)&&(e.preventDefault(),e.target.click())},hasNoUnderline:!0,href:o?`${o}${window.location.search||""}`:"#","data-uxa-log":r,role:"button",tabIndex:0},e));b.displayName="SwitchLink";const I=i.intl.formatMessage({id:"/S+lpO",defaultMessage:"or create an account"}),T=i.intl.formatMessage({id:"Gab+SB",defaultMessage:"or login"}),y=({label:e,href:t,dataUxaTag:r,tabIndex:a})=>n.default.createElement(p.DWGTransparentButton,{className:"link--dwg-refresh",label:e,href:t?`${t}${window.location.search||""}`:"#",disableArrow:!0,"data-uxa-log":r,"data-trackingid":r,tabIndex:a});y.displayName="RefreshLink";const O=({className:e,hideHeader:t,headerText:r,hideSwitch:a,switchLinkLocation:i,switchLinkLabel:s,onSwitchLinkAction:l,switchLinkUxaId:c,children:u,href:d,hideSwitchOrText:p=!1,dwgRefreshEnabled:g=!1,headerClassName:h})=>{const f=g?n.default.createElement("div",{className:"toggle-link-container--dwg-refresh"},n.default.createElement(y,{href:d,label:s,dataUxaTag:c,tabIndex:0})):n.default.createElement(b,{onSwitchLinkAction:l,switchLinkLabel:s,switchLinkUxaId:c,hideSwitchOrText:p,href:d}),_=g?n.default.createElement("div",{className:(0,o.default)("form-header--dwg-refresh",h)},n.default.createElement(m.DWGText,{fontFamily:"sharp-grotesk-20-book",fontSize:20,fontWeight:"regular",lineHeight:24,textAlign:"left",tagName:"h1"},r)):n.default.createElement("h1",{className:"login-register-header"},r);return n.default.createElement("div",{className:(0,o.default)("login-register-part",e)},n.default.createElement("div",{className:g?"header-and-toggle-container--dwg-refresh":"clearfix"},!t&&_,!a&&i===E.TOP&&f),u,!a&&i===E.BOTTOM&&f)};O.displayName="AuthFormWithHeader";const w=e=>{var t,{switchLinkProps:a={hideSwitch:!1,switchLinkLocation:E.TOP},hideHeaders:s=!1,currentMode:l,setLoginRegisterMode:p,gsiState:m}=e,f=r.__rest(e,["switchLinkProps","hideHeaders","currentMode","setLoginRegisterMode","gsiState"]);const{className:_,loginHeader:v,registerHeader:b,loginFormProps:y,registerFormProps:w,dwgRefreshVariant:R,showPasswordVariant:L}=f,{hideSwitch:N,switchLinkLocation:A,switchToRegisterLinkLabel:C,switchToLoginLinkLabel:P,switchLinkLoginHref:G,switchLinkLoginUxa:M,switchLinkRegisterHref:D,switchLinkRegisterUxa:F}=a,x=["V1","V2"].includes(R||"OFF"),k=(0,o.default)("login-register-container",{"login-register-container--dwg-refresh":x},{"login-register-container--dwg-refresh-v2":"V2"===R},_,null!==(t=y.variant)&&void 0!==t?t:w.variant,[`login-register-container--link-${A}`]),[U,j]=n.default.useState(void 0),V=!!(null==m?void 0:m.formDisabled),B=(0,h.showOneTapInlineGoogleButton)(m),W=n.default.createElement(O,{className:(0,o.default)("login-register-login-part",{"current-form":l===c.Mode.LOGIN,[g.GOOGLE_ONE_TAP_DISABLED_FORM]:V}),hideHeader:s,headerText:null!=v?v:i.intl.formatMessage(S.loginHeader),headerClassName:y.emailAsLabel?"email-as-label":"",hideSwitch:null!=N&&N,switchLinkLocation:null!=A?A:E.TOP,switchLinkLabel:x?I:null!=C?C:i.intl.formatMessage(S.switchToRegisterLinkLabel),onSwitchLinkAction:()=>{(void 0===G||G.startsWith("#"))&&(p(c.Mode.REGISTER),g.GSIEventManager.sendGSIEvent(g.GSIEvent.CONTEXT_CHANGE_SIGNUP))},switchLinkUxaId:M||"create_an_account_toggle",href:G,dwgRefreshEnabled:x},n.default.createElement(u.LoginForm,Object.assign({},y,{onCreateNewAccountClick:()=>{j(void 0),p(c.Mode.REGISTER),g.GSIEventManager.sendGSIEvent(g.GSIEvent.CONTEXT_CHANGE_SIGNUP)},onReRegisterClick:e=>{j(e),p(c.Mode.REGISTER),g.GSIEventManager.sendGSIEvent(g.GSIEvent.CONTEXT_CHANGE_SIGNUP)},gsiState:m,disabled:V,showOneTapInlineGoogleButton:B,dwgRefreshEnabled:x,showPasswordVariant:L}))),H=n.default.createElement(O,{className:(0,o.default)("login-register-register-part",{"current-form":l===c.Mode.REGISTER,[g.GOOGLE_ONE_TAP_DISABLED_FORM]:V}),hideHeader:s,headerText:null!=b?b:i.intl.formatMessage(S.registerHeader),hideSwitch:null!=N&&N,switchLinkLocation:null!=A?A:E.TOP,switchLinkLabel:x?T:null!=P?P:i.intl.formatMessage(S.switchToLoginLinkLabel),onSwitchLinkAction:()=>{(void 0===D||D.startsWith("#"))&&(p(c.Mode.LOGIN),g.GSIEventManager.sendGSIEvent(g.GSIEvent.CONTEXT_CHANGE_SIGNIN))},switchLinkUxaId:F||"log_in_toggle",href:D,dwgRefreshEnabled:x},n.default.createElement(d.RegisterForm,Object.assign({},w,{onEmailChanged:()=>j(void 0),emailPrefill:U,gsiState:m,disabled:V,showOneTapInlineGoogleButton:B,dwgRefreshEnabled:x,dwgRefreshVariant:R,googleOneTapInlinePosition:"V2"===R?"TOP":"BOTTOM",showPasswordVariant:L})));return n.default.createElement("div",{className:k},W,H)};t.TestOnlyStatelessLoginRegisterContainer=w,w.displayName="StatelessLoginRegisterContainerView",t.StatelessLoginRegisterContainer=(0,s.requireCssWithComponent)(w,["/static/metaserver/static/css/components/login_or_register-vflwUQdNG.css","/static/metaserver/static/css/legacy_packages/components-vflWGC3Ox.css","/static/metaserver/static/css/components/button-vfl7d2xHj.css","/static/metaserver/static/css/scooter/scooter-scoped-vfl0EaHDR.css","/static/metaserver/static/css/recaptcha_challenge-vflrcf67y.css","/static/metaserver/static/css/recaptcha_v2_challenge-vflYEW-GO.css"]);t.LoginRegisterContainer=e=>{const[r,a]=(0,n.useState)(e.defaultRegister?c.Mode.REGISTER:c.Mode.LOGIN);(0,n.useEffect)(()=>(0,l.logAuthIntent)(r),[r]);const o=e.googleOneTapVariant&&["V2"].includes(e.googleOneTapVariant),i=(0,v.UseGsiState)(o);return n.default.createElement(t.StatelessLoginRegisterContainer,Object.assign({currentMode:r,setLoginRegisterMode:a,gsiState:i},e))},t.LoginRegisterContainer.displayName="LoginRegisterContainer"})),define("metaserver/static/js/auth/login_or_register/logging_util",["require","exports","metaserver/static/js/clean/analytics","metaserver/static/js/clean/auth_event_logger","metaserver/static/js/auth/common/stats","metaserver/static/js/auth/login_or_register/types"],(function(e,t,r,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logModalMiscActivity=t.logModalShown=t.logModalDismissed=t.logAuthIntent=void 0;t.logAuthIntent=e=>{e===o.Mode.REGISTER?n.AuthEventLogger.log_web_signup_intent():n.AuthEventLogger.log_web_login_intent()};t.logModalDismissed=(e,t)=>{e===o.Mode.REGISTER?a.AuthUXAnalyticsLogger.logSignupModalDismissed(t):a.AuthUXAnalyticsLogger.logLoginModalDismissed(t)};t.logModalShown=(e,t,r={})=>{e===o.Mode.REGISTER?a.AuthUXAnalyticsLogger.logSignupModalShown(t,r):a.AuthUXAnalyticsLogger.logLoginModalShown(t,r)};t.logModalMiscActivity=(e,t)=>{const n={auth_google:!0};e===o.LoginOrRegisterKind.IMMEDIATE?r.WebMiscActivityLogger.log("signup_modal-show-upfront",n):e===o.LoginOrRegisterKind.DOWNLOAD&&t===o.DownloadAction.DIRECT_DOWNLOAD&&r.WebMiscActivityLogger.log("signup_modal-show-download",n)}})),define("metaserver/static/js/auth/register/form",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/core/browser","metaserver/static/js/core/assert","metaserver/static/js/deprecated_ajax/ajax_jquery","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils","metaserver/static/js/auth/register/types","metaserver/static/js/auth/register/view","metaserver/static/js/profile_services/auth_callback_handler","metaserver/static/js/profile_services/profile_services_constants","metaserver/static/js/profile_services/profile_services_link","metaserver/static/js/components/ui/css","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/clean/web_register_logging_data","metaserver/static/js/auth/common/stats","metaserver/static/js/api_v2/noauth_client","metaserver/static/js/core/notify","metaserver/static/js/abuse/fingerprintjs_component","metaserver/static/js/admin/registration_source_constants","metaserver/static/js/google_one_tap/google_one_tap_helpers","metaserver/static/js/signup_signin/helpers","metaserver/static/js/core/exception","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/clean/active_user"],(function(e,t,r,n,a,o,i,s,l,c,u,d,p,m,g,h,f,_,v,E,S,b,I,T,y,O,w,R){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyRegisterFormComponent=t.RegisterForm=t.handleInviteResendImpl=void 0,n=r.__importDefault(n),o=r.__importStar(o),s=r.__importStar(s),m=r.__importDefault(m),b=r.__importStar(b);class L extends n.default.Component{constructor(e){super(e),this.implicitTOSFeatureName="acq_susi_implicit_tos",this.userKeyDownDetected=!1,this.testOnlyGetViewComponent=()=>this.viewComponent,this.setViewComponent=e=>{this.viewComponent=e},this.onClickSignUp=e=>{e.preventDefault(),this.handleRegisterFormEvent(u.RegisterFormEvent.REGISTER_CLICK);const t=this.getFormErrors();t.fname||t.email||t.password||t.tos?this.setState({localErrors:t}):this.viewComponent.getCaptchaComponent().getWrappedComponent().submit()},this.onSubmit=()=>r.__awaiter(this,void 0,void 0,(function*(){this.thirdPartySignupInitiated?v.AuthAMPLogger.logSignupAttempt(v.AuthType.GOOGLE):(v.AuthAMPLogger.logSignupAttempt(v.AuthType.CREDENTIALS),v.EmailAuthUXAnalyticsLogger.logSignupStart()),this.setState({isSubmitting:!0}),b.isTest()||(yield this.viewComponent.getFingerprintJsComponent().getWrappedComponent().invokeFPJSIframeAndLog(this.state.email));const e=this.registerData(),t=this.props.signupUrl||(this.thirdPartySignupInitiated?"/ajax_thirdparty_register":"/ajax_register");s.WebRequest({url:t,type:"POST",data:e,subject_user:"/team/join/new_pair_ajax"===t?(0,R.mustGetActiveUser)():void 0,success:(e,t,r)=>{this.handleSuccess(e)},error:(e,t,r)=>{"success"===t?this.handleServerErrors(JSON.parse(r)):this.setState({isSubmitting:!1})}})})),this.handleGoogleCallback=e=>r.__awaiter(this,void 0,void 0,(function*(){v.GoogleAmpLogger.logVerificationResult(e.success,e.err_msg);const{additionalParams:t={},marketingOptInProps:n={},canRedirect:a}=this.props,i=this.props.googleRegisterProps||{},s=i.signupContinuationUrl||"/",l=i.optimisticLoginContinuationUrl||s,c=(0,_.getWebRegisterLoggingData)();e.profile&&!b.isTest()&&(yield this.viewComponent.getFingerprintJsComponent().getWrappedComponent().invokeFPJSIframeAndLog(e.profile.email));let d=t.signup_tag;t.signup_tag==I.RegistrationSource.REGISTER_PAGE_EMAIL&&(d=I.RegistrationSource.REGISTER_PAGE_SIGN_UP_WITH_GOOGLE),(0,p.handleRegisterResponse)(e,Object.assign({showMarketingOptIn:!!n.show,registerCont:s,loginCont:l,signupTag:d||I.RegistrationSource.REGISTER_PAGE_SIGN_UP_WITH_GOOGLE,canRedirect:!1!==a,k:t.k,eh:t.eh,signupEndpoint:this.props.signupEndpoint,inlineRedirect:a?void 0:e=>{const{fname:t,lname:n,email:a}=e,o=r.__rest(e,["fname","lname","email"]);this.setState({fname:t,lname:n,email:a,inlineThirdPartySignupState:o})}},c),void 0,()=>{this.handleRegisterFormEvent(u.RegisterFormEvent.GOOGLE_REGISTER_SUCCESS)},e=>{if(this.handleRegisterFormEvent(u.RegisterFormEvent.REGISTER_IMMEDIATE_SUCCESS,{userInfo:e}),!1!==this.props.canRedirect)o.redirect(l);else if(this.props.onRegisterSuccess)return this.props.onRegisterSuccess(e,e)})})),this.onGoogleRegisterClick=()=>{this.handleRegisterFormEvent(u.RegisterFormEvent.GOOGLE_REGISTER_CLICK),v.GoogleAmpLogger.logVerificationAttempt();const e=new g.ProfileServicesLinkingHandler,t=this.props.googleRegisterProps||{};let r;r=void 0===t.popup?g.AuthWindowOption.POP_UP:t.popup?g.AuthWindowOption.POP_UP:g.AuthWindowOption.REDIRECT;const n=t.signupContinuationUrl?{kind:"web",cont:t.signupContinuationUrl,remember_me:!1,pair_user:!1}:null;e.auth_service_create_user_if_needed(m.default.GOOGLE,this.handleGoogleCallback,"register_form",r,n)},this.onUserInputKeyDown=e=>{"Unidentified"!==e.key&&(this.userKeyDownDetected=!0)},this.onInputChange=e=>{var t,r;const n={},a=e.currentTarget,{name:o,value:i,checked:s}=a;"fname"===o?n.fname=i:"lname"===o?n.lname=i:"email"===o?(n.email=i,null===(r=(t=this.props).onEmailChanged)||void 0===r||r.call(t)):"password"===o?(n.password=i,"V1"!==this.props.showPasswordVariant||this.state.autofillOrUserInputHandled||0!==this.state.password.length||(n.showPasswordByDefault=this.userKeyDownDetected,n.autofillOrUserInputHandled=!0)):"tos_agree"===o?n.tosAgree=!!(0,y.isImplicitTOSEnabled)(this.state.implicitTOSVariant)||s:"marketing_opt_in"===o&&(n.marketingOptIn=s),this.setState(n),this.clearFormErrors(n)},this.handleResendClick=e=>{const t=e.target,{email:r,isSendingInvite:n}=this.state;"login-register-resend-invite"===t.className&&N(e,n,r,()=>this.setState({isSendingInvite:!0}),()=>this.setState({isSendingInvite:!1}))},this.onCaptchaReady=()=>{this.isCaptchaReady=!0},(0,i.assert)(!1!==e.canRedirect||!!e.onRegisterSuccess,"Need an on register success handler if we cannot redirect the user",{tags:["react-register-form"]});const{fnameProps:t={},lnameProps:n={},emailProps:a={},tosCheckboxProps:l={},marketingOptInProps:c={}}=e,d=!c.show||!!c.checked;this.state={localErrors:{},isSubmitting:!1,fname:t.initialValue||"",lname:n.initialValue||"",email:e.emailPrefill||a.initialValue||"",password:"",tosAgree:!!(0,y.isImplicitTOSEnabled)(e.implicitTOSVariant)||!!l.checked,isSendingInvite:!1,marketingOptIn:d,shouldDisableForm:!0,implicitTOSVariant:e.implicitTOSVariant||"",tosLoading:!e.implicitTOSVariant&&!!e.shouldUseImplicitTOSUXVariants,showPasswordByDefault:"V1"===this.props.showPasswordVariant,autofillOrUserInputHandled:!1},this.mounted=!1,this.isCaptchaReady=!1}fetchImplicitTOSUXVariants(){return r.__awaiter(this,void 0,void 0,(function*(){this.implicitTOSTimeout=setTimeout(()=>{v.ImplicitTOSLogger.logImplicitTOSUXVariantsTimeout(),this.fetchingImplicitTOSDone()},2500);try{const[{fetchAndSetConfigAndVariants:t},{getVariant:n},{runAfterUxaListening:a}]=yield Promise.all([new Promise((t,r)=>{e(["metaserver/static/js/ux_analytics/async_ux_variants"],t,r)}).then(r.__importStar),new Promise((t,r)=>{e(["metaserver/static/js/ux_analytics/ux_variants"],t,r)}).then(r.__importStar),new Promise((t,r)=>{e(["metaserver/static/js/ux_analytics/lazy_ux_analytics"],t,r)}).then(r.__importStar)]);if(yield new Promise(a),yield t([this.implicitTOSFeatureName]),v.ImplicitTOSLogger.logImplicitTOSUXVariantsSuccess(),!this.shouldDisableForm)return this.fetchingImplicitTOSDone(),void clearTimeout(this.implicitTOSTimeout);let o=n(this.implicitTOSFeatureName);this.props.implicitTOSVariant&&o!==this.props.implicitTOSVariant&&(v.ImplicitTOSLogger.logImplicitTOSUXVariantsMismatch(this.props.implicitTOSVariant,o),o=this.props.implicitTOSVariant),this.setState({implicitTOSVariant:o,tosAgree:(0,y.isImplicitTOSEnabled)(o),shouldDisableForm:!1,tosLoading:!1}),clearTimeout(this.implicitTOSTimeout)}catch(e){this.handleImplicitTOSUXVariantsError(e)}}))}handleImplicitTOSUXVariantsError(e){this.fetchingImplicitTOSDone(),v.ImplicitTOSLogger.logImplicitTOSUXVariantsError(e.toString()),(0,O.reportException)({err:e,severity:O.SEVERITY.NONCRITICAL,tags:["susi","ux_variants"]}),clearTimeout(this.implicitTOSTimeout)}fetchingImplicitTOSDone(){this.setState({shouldDisableForm:!1,tosLoading:!1})}fetchAndLogImplicitTOSExplicitly(){return r.__awaiter(this,void 0,void 0,(function*(){try{const{getGatingClientSingleton:t}=yield new Promise((t,r)=>{e(["metaserver/static/js/stormcrow/gating_factory"],t,r)}).then(r.__importStar),n=t(),a={features:[this.implicitTOSFeatureName]};n.getVariant(a).then(e=>{var t,r,a,o;const i=null==e?void 0:e.variantInfos[0],s={stormcrowVariantInfo:{feature:this.implicitTOSFeatureName,variant:null==i?void 0:i.variant,metadata:{metadata:{population_id:(null===(r=null===(t=null==i?void 0:i.metadata)||void 0===t?void 0:t.metadata)||void 0===r?void 0:r.population_id)||"",identity_gid:(null===(o=null===(a=null==i?void 0:i.metadata)||void 0===a?void 0:a.metadata)||void 0===o?void 0:o.identity_gid)||""}},status:{".tag":"get_assignment_status_success"}}};n.logExposure(s)})}catch(e){v.ImplicitTOSLogger.logImplicitTOSGatingClientError(e.toString()),(0,O.reportException)({err:e,severity:O.SEVERITY.NONCRITICAL,tags:["susi","sc_gating_client"]})}}))}getCurrentEmail(){var e;return null!==(e=this.props.emailPrefill)&&void 0!==e?e:this.state.email}handleServerErrors(e){if(!this.mounted)return;if(this.thirdPartySignupInitiated?v.AuthAMPLogger.logSignupResponse(v.AuthType.GOOGLE,!1,e.funcaptcha_response?"funcaptcha_response":"form_error",{dwgRefreshVariant:this.props.dwgRefreshVariant||""}):v.AuthAMPLogger.logSignupResponse(v.AuthType.CREDENTIALS,!1,e.funcaptcha_response?"funcaptcha_response":"form_error",{dwgRefreshVariant:this.props.dwgRefreshVariant||""}),this.viewComponent.handleCaptchaErrors(e))return void setTimeout(()=>{this.isCaptchaReady||(0,c.notifyCaptchaNotLoaded)()},1e4);this.thirdPartySignupInitiated?v.GoogleUXAnalyticsLogger.logSignupResponse(!1,null):v.EmailAuthUXAnalyticsLogger.logSignupError();const t=Object.assign({},this.state.localErrors),r=Date.now();e.email&&(t.email=e.email,t.email.clientTimestamp=r),e.password&&(t.password=e.password,t.password.clientTimestamp=r),e.lname&&(t.lname=e.lname,t.lname.clientTimestamp=r),e.fname&&(t.fname=e.fname,t.fname.clientTimestamp=r),e.tos_agree&&(t.tos=e.tos_agree,t.tos.clientTimestamp=r),this.setState({localErrors:t}),this.setState({isSubmitting:!1})}handleSuccess(e){if(!this.mounted)return;const t=JSON.parse(e),r={id:t.id,email:t.email,display_name:t.display_name};if(this.thirdPartySignupInitiated?(v.AuthAMPLogger.logSignupResponse(v.AuthType.GOOGLE,!0,null,{dwgRefreshVariant:this.props.dwgRefreshVariant||""}),v.GoogleUXAnalyticsLogger.logSignupResponse(!0,null)):(v.AuthAMPLogger.logSignupResponse(v.AuthType.CREDENTIALS,!0,null,{dwgRefreshVariant:this.props.dwgRefreshVariant||""}),v.EmailAuthUXAnalyticsLogger.logSignupResponse()),this.handleRegisterFormEvent(u.RegisterFormEvent.REGISTER_IMMEDIATE_SUCCESS,{userInfo:r}),!1!==this.props.canRedirect){const e=t.force_redirect_url?t.redirect_url:this.props.continuationUrlForNonGoogleSignup||t.redirect_url||"/";o.redirect(e)}else this.props.onRegisterSuccess&&this.props.onRegisterSuccess(r,t);this.setState({isSubmitting:!1})}handleRegisterFormEvent(e,t){(0,c.pushMarketingEvent)(e,this.props.pushConversionDataReadyMarketingEvent),this.props.onRegisterFormEvent&&this.props.onRegisterFormEvent(e,t)}registerData(){const[e,t]=(0,c.getFormattedName)(this.state.fname,this.state.lname,this.props.combinedName),r=o.get_uri().getQuery(),{email:n,password:a,tosAgree:i,marketingOptIn:s,inlineThirdPartySignupState:l}=this.state,{additionalParams:u,thirdPartyInitiatedSignupData:d}=this.props,p=Object.assign({fname:e,lname:t,email:n,tos_agree:i},this.thirdPartySignupInitiated?{}:{password:a}),m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({cont:this.props.continuationUrlForNonGoogleSignup,signup_endpoint:this.props.signupEndpoint,demandbase_override:r.demandbase_override,marketing_opt_in:s},p),d||{}),l||{}),this.viewComponent&&this.viewComponent.getCaptchaResponses()||{}),this.viewComponent&&this.viewComponent.getVisitorId()||{}),u);return(0,_.setWebRegisterLoggingData)(m)}componentDidUpdate(e,t){var r,n,a;e.emailPrefill!==this.props.emailPrefill&&this.setState({email:this.getCurrentEmail()}),(null===(r=this.props.emailProps)||void 0===r?void 0:r.initialValue)!==(null===(n=e.emailProps)||void 0===n?void 0:n.initialValue)&&this.setState({email:(null===(a=this.props.emailProps)||void 0===a?void 0:a.initialValue)||""}),["V1","V2"].includes(this.props.googleOneTapVariant||"")&&t.isSubmitting!==this.state.isSubmitting&&(0,T.setGoogleOneTapDisabledBodyClass)(this.state.isSubmitting)}clearFormErrors(e){const t=this.state.localErrors;e.fname&&(t.fname={}),e.lname&&(t.lname={}),e.email&&(t.email={}),e.password&&(t.password={}),e.tosAgree&&(t.tos={}),this.setState({localErrors:t})}getFormErrors(){const e={};if(!this.props.validateClientSide)return e;const t=Date.now();return this.state.fname?e.fname=void 0:e.fname={message_text:a.intl.formatMessage({id:"GlyhO1",defaultMessage:"Please enter your name"}),clientTimestamp:t},this.getCurrentEmail()?e.email=void 0:e.email={message_text:a.intl.formatMessage({id:"I7g4FQ",defaultMessage:"Please enter an email address"}),clientTimestamp:t},this.state.password||this.thirdPartySignupInitiated?e.password=void 0:e.password={message_text:a.intl.formatMessage({id:"LhlWCW",defaultMessage:"Please enter a password"}),clientTimestamp:t},this.state.tosAgree?e.tos=void 0:e.tos={message_text:a.intl.formatMessage({id:"yw3Lbd",defaultMessage:"Please agree to the terms of service"}),clientTimestamp:t},e}get thirdPartySignupInitiated(){return!!this.props.thirdPartyInitiatedSignupData||!!this.state.inlineThirdPartySignupState}componentDidMount(){return r.__awaiter(this,void 0,void 0,(function*(){!this.props.implicitTOSVariant&&this.props.shouldUseImplicitTOSUXVariants||this.setState({shouldDisableForm:!1}),this.props.markTti&&(0,f.mark_time_to_interactive)(),this.mounted=!0,v.AuthAMPLogger.logSignupIntent({dwgRefreshVariant:this.props.dwgRefreshVariant||""}),document.addEventListener("click",this.handleResendClick),this.props.shouldUseImplicitTOSUXVariants&&(0,w.waitForTTI)().then(()=>r.__awaiter(this,void 0,void 0,(function*(){yield this.fetchImplicitTOSUXVariants(),yield this.fetchAndLogImplicitTOSExplicitly()})))}))}componentWillUnmount(){this.mounted=!1,document.removeEventListener("click",this.handleResendClick)}get shouldDisableForm(){return!!this.props.disabled||this.state.shouldDisableForm||this.state.tosLoading}render(){const{marketingOptInProps:e={},variant:t,emailProps:r,maestroStyle:a,className:o,combinedName:i,fnameProps:s,lnameProps:c,passwordProps:u,persistLabel:p,tosCheckboxProps:m,submitButtonProps:g,googleRegisterProps:h,showSplitSignupFlow:f,googleOneTapVariant:_}=this.props;return n.default.createElement(d.RegisterFormView,{ref:this.setViewComponent,variant:t||l.AuthFormVariant.STANDARD,maestroStyle:!!a,disabled:this.shouldDisableForm,className:o,combinedName:!!i,fnameProps:s||{},fnameValue:this.state.fname,fnameError:this.state.localErrors.fname,lnameProps:c||{},lnameValue:this.state.lname,lnameError:this.state.localErrors.lname,emailProps:r||{},emailValue:this.getCurrentEmail(),emailError:this.state.localErrors.email,passwordProps:u||{},passwordValue:this.state.password,passwordError:this.state.localErrors.password,tosCheckboxProps:m||{},tosChecked:this.state.tosAgree,tosError:this.state.localErrors.tos,submitButtonProps:g||{},googleRegisterProps:h,thirdPartyInitiatedSignup:this.thirdPartySignupInitiated,isSubmitting:this.state.isSubmitting,onClickSignUp:this.onClickSignUp,onInputChange:this.onInputChange,onSubmit:this.onSubmit,onCaptchaReady:this.onCaptchaReady,onGoogleRegisterClick:this.onGoogleRegisterClick,showMarketingOptIn:!!e.show,marketingOptInChecked:this.state.marketingOptIn,splitSignupEnabled:f,persistLabel:!!p,googleOneTapVariant:_,gsiState:this.props.gsiState,showOneTapInlineGoogleButton:this.props.showOneTapInlineGoogleButton,googleOneTapInlinePosition:this.props.googleOneTapInlinePosition,dwgRefreshEnabled:this.props.dwgRefreshEnabled,fromLegacyMobile:this.props.fromLegacyMobile,emailFirst:this.props.emailFirst,implicitTOSVariant:this.state.implicitTOSVariant,tosLoading:this.state.tosLoading,showPasswordVariant:this.props.showPasswordVariant,autofillOrUserInputHandled:this.state.autofillOrUserInputHandled,showPasswordByDefault:this.state.showPasswordByDefault,onUserInputKeyDown:this.onUserInputKeyDown})}}function N(e,t,r,n,o){if(!0===t)return void e.preventDefault();const i=new E.NoAuthApiV2Client;n(),i.ns("team").rpc("logged_out_resend_pending_invite_email",{email:r},{}).then(()=>{S.Notify.success(a.intl.formatMessage({id:"un5VKD",defaultMessage:"Invite resent to {email}"},{email:r})),o()}).catch(e=>{S.Notify.error(a.intl.formatMessage({id:"yqLGvW",defaultMessage:"Failed to resend invite."})),o()}),e.preventDefault()}t.TestOnlyRegisterFormComponent=L,L.displayName="RegisterFormComponent",t.handleInviteResendImpl=N,t.RegisterForm=(0,h.requireCssWithComponent)(L,["/static/metaserver/static/css/login_or_register-vfloa6gxK.css","/static/metaserver/static/css/components/login_form-vflecD4PI.css","/static/metaserver/static/css/components/button-vfl7d2xHj.css","/static/metaserver/static/css/dig-components/index.web-vfllRi-uH.css","/static/typescript/component_libraries/dwg-components/src/index.web-vflqs9Gql.css"])})),define("metaserver/static/js/auth/register/google_register_button",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n"],(function(e,t,r,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleRegisterButton=void 0,n=r.__importDefault(n),a=r.__importDefault(a);t.GoogleRegisterButton=e=>{const t=e.buttonProps||{},r=(0,n.default)("auth-google","button-primary",t.className,{[`button-${t.variant}`]:"standard"!==t.variant}),i=t.text||o.intl.formatMessage({id:"M4SS1n",defaultMessage:"Sign up with Google"});return a.default.createElement("button",{className:r,type:"button",onClick:e.onClick,disabled:e.disabled||t.disabled,"data-uxa-log":"google_signup_start"},a.default.createElement("span",{className:"sign-up-text"},i))}})),define("metaserver/static/js/auth/register/name_fields",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/text","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils"],(function(e,t,r,n,a,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormNameFields=void 0,n=r.__importDefault(n),a=r.__importDefault(a);t.RegisterFormNameFields=e=>{const t=e.fnameProps||{};if(e.combinedName){const r=(0,n.default)("exp-input-combined-name","clearfix",t.className);return a.default.createElement("div",{className:"register-form__name-fields"},a.default.createElement(i.AuthTextField,{placeholder:t.placeholder||(e.maestroStyle?o.intl.formatMessage({id:"yse7tr",defaultMessage:"Jane Doe"}):o.intl.formatMessage({id:"7raSCH",defaultMessage:"Full name"})),name:"fname",value:e.fnameValue,onChange:e.onInputChange,disabled:e.disabled||t.readonly||!1,label:t.label||(e.maestroStyle?o.intl.formatMessage({id:"7raSCH",defaultMessage:"Full name"}):void 0),error:e.fnameError,maestroStyle:e.maestroStyle,className:r,variant:e.variant,type:s.AuthTextInputType.TEXT,autoComplete:s.AuthTextInputAutoComplete.FULL_NAME}))}const r=e.lnameProps||{},c=["first","text-input__margin-right"],u=["second"];let d=["input-fname",t.className],p=["input-lname",r.className];(0,l.lastNameGoesFirst)()?(p=[...p,...c],d=[...d,...u]):(d=[...d,...c],p=[...p,...u]);const m=a.default.createElement(i.AuthTextField,{className:(0,n.default)(d),name:"fname",value:e.fnameValue,onChange:e.onInputChange,error:e.fnameError,maestroStyle:e.maestroStyle,disabled:e.disabled||t.readonly||!1,label:t.label||(e.maestroStyle?o.intl.formatMessage({id:"flaKkC",defaultMessage:"First name"}):void 0),placeholder:t.placeholder||(e.maestroStyle?o.intl.formatMessage({id:"G3gJf8",defaultMessage:"Jane"}):o.intl.formatMessage({id:"flaKkC",defaultMessage:"First name"})),variant:e.variant,type:s.AuthTextInputType.TEXT,autoComplete:s.AuthTextInputAutoComplete.FIRST_NAME,persistLabel:e.persistLabel}),g=a.default.createElement(i.AuthTextField,{className:(0,n.default)(p),name:"lname",value:e.lnameValue,onChange:e.onInputChange,error:e.lnameError,disabled:e.disabled||r.readonly||!1,label:r.label||(e.maestroStyle?o.intl.formatMessage({id:"rew2qC",defaultMessage:"Last name"}):void 0),placeholder:r.placeholder||(e.maestroStyle?o.intl.formatMessage({id:"yUetMg",defaultMessage:"Doe"}):o.intl.formatMessage({id:"rew2qC",defaultMessage:"Last name"})),maestroStyle:e.maestroStyle,variant:e.variant,type:s.AuthTextInputType.TEXT,autoComplete:s.AuthTextInputAutoComplete.LAST_NAME,persistLabel:e.persistLabel});return(0,l.lastNameGoesFirst)()?a.default.createElement("div",{className:"register-form__name-fields"},g,m):a.default.createElement("div",{className:"register-form__name-fields"},m,g)}})),define("metaserver/static/js/auth/register/view",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/checkbox","metaserver/static/js/auth/common/inputs/text","metaserver/static/js/auth/common/captcha","metaserver/static/js/auth/common/types","metaserver/static/js/auth/register/google_register_button","metaserver/static/js/auth/register/name_fields","metaserver/static/js/auth/common/stats","metaserver/static/js/abuse/fingerprintjs_component","metaserver/static/js/google_one_tap/lib","metaserver/static/js/google_one_tap/containers","typescript/component_libraries/dwg-components/src/components/dwg-button2/index","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","typescript/component_libraries/dwg-components/src/atoms/dwg-box/index","metaserver/static/js/signup_signin/helpers","@dropbox/dig-components/progress_indicators"],(function(e,t,r,n,a,o,i,s,l,c,u,d,p,m,g,h,f,_,v,E,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormView=void 0,n=r.__importDefault(n),a=r.__importDefault(a);class b extends a.default.Component{constructor(){super(...arguments),this.state={splitSignupStep:0,formCollapsed:!1},this.handleContainerTransitionEnd=()=>{this.setState({formCollapsed:!0})},this.setCaptchaComponent=e=>{this.captchaComponent=e},this.setFingerprintJsComponent=e=>{this.fingerprintJsComponent=e}}componentDidUpdate(){var e;this.state.formCollapsed&&!(null===(e=this.props.gsiState)||void 0===e?void 0:e.formDisabled)&&this.setState({formCollapsed:!1})}handleCaptchaErrors(e){return(0,l.handle_captcha_errors)(this.captchaComponent,e)}getCaptchaComponent(){return this.captchaComponent}getFingerprintJsComponent(){return this.fingerprintJsComponent}getVisitorId(){return(0,m.get_visitor_id)(this.fingerprintJsComponent)}getCaptchaResponses(){return(0,l.get_captcha_responses)(this.captchaComponent)}onContinue(){this.setState({splitSignupStep:1}),p.EmailAuthUXAnalyticsLogger.logSplitSignupContinue()}render(){var e,t,r,p,b,I;const{className:T,variant:y,thirdPartyInitiatedSignup:O,tosCheckboxProps:w,onGoogleRegisterClick:R,disabled:L,isSubmitting:N,maestroStyle:A,onInputChange:C,showMarketingOptIn:P,marketingOptInChecked:G,splitSignupEnabled:M,googleOneTapVariant:D="",emailFirst:F,implicitTOSVariant:x,tosLoading:k}=this.props,U=(null===(e=this.props.gsiState)||void 0===e?void 0:e.isButtonFlow)&&!(null===(t=this.props.gsiState)||void 0===t?void 0:t.isMobile),j=(null===(r=this.props.gsiState)||void 0===r?void 0:r.formDisabled)&&((null===(p=this.props.gsiState)||void 0===p?void 0:p.isInline)||U),V=(0,n.default)("form_shown","login-form-container","register",T,y,{third_party_auth:O,"login-form-container--maestro":A,[g.GOOGLE_ONE_TAP_COLLAPSE_FORM]:j,"register--tos-loading":this.props.tosLoading}),B=w||{};let W=void 0;B.unsafeLabelHTML||(W=o.intl.formatMessage({id:"QECDJM",defaultMessage:"I agree to the <a>Dropbox Terms</a>. Learn about how we use and protect your data in our <b>Privacy Policy</b>."},{a:e=>a.default.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"registration_dropbox_terms_link"},e),b:e=>a.default.createElement("a",{href:"/privacy",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"registration_privacy_policy_link"},e)}));const H=this.props.submitButtonProps||{},X=(0,n.default)("login-button","button-primary",H.className,{"button-small":H.variant===c.AuthButtonVariant.SMALL,"button-big":H.variant===c.AuthButtonVariant.BIG}),q=(0,n.default)("continue-button","button-primary",H.className,{"button-small":H.variant===c.AuthButtonVariant.SMALL,"button-big":H.variant===c.AuthButtonVariant.BIG}),Y=this.props.thirdPartyInitiatedSignup,z=["V1","V2"].includes(D)&&!this.props.fromLegacyMobile,K=!!this.props.googleRegisterProps&&!Y&&!z,J=this.props.googleRegisterProps||{},Z=a.default.createElement(u.GoogleRegisterButton,{onClick:R,disabled:L||N,buttonProps:J.buttonProps}),Q=a.default.createElement("div",{className:"hr-label"},a.default.createElement("span",{className:"hr-label__text"},o.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}))),$=this.props.emailProps||{},ee=(0,n.default)("input-email","text-input__margin-right",$.className),te=this.props.passwordProps||{},re=(0,n.default)("input-password",te.className);let ne=this.props.maestroStyle;"TOP"===J.position?ne=!0:"BOTTOM"===J.position&&(ne=!1);let ae=!1;"TOP"==this.props.googleOneTapInlinePosition&&(ae=!0);const oe=B.variant||y,ie=void 0===B.inline||B.inline;let se=Y?o.intl.formatMessage({id:"j7O6M6",defaultMessage:"Create and continue"}):H.text||o.intl.formatMessage({id:"P09UfX",defaultMessage:"Create an account"});const le=this.props.tosChecked?"registration_agree_to_tos_uncheck":"registration_agree_to_tos_check",ce=o.intl.formatMessage({id:"pV/Btf",defaultMessage:"Continue"}),ue=!!this.props.dwgRefreshEnabled&&this.props.isSubmitting,de=a.default.createElement(s.AuthTextField,{value:this.props.emailValue,className:ee,onChange:C,disabled:ue||L||$.readonly||!1,label:$.label||(A?o.intl.formatMessage({id:"ZuKPpH",defaultMessage:"Email"}):void 0),placeholder:$.placeholder||(this.props.maestroStyle?o.intl.formatMessage({id:"87vAZJ",defaultMessage:"you@mail.com"}):o.intl.formatMessage({id:"ZbTBdC",defaultMessage:"Email"})),error:this.props.emailError,maestroStyle:A,name:"email",type:c.AuthTextInputType.EMAIL,variant:y,persistLabel:this.props.persistLabel,autoComplete:c.AuthTextInputAutoComplete.USERNAME}),pe=a.default.createElement(d.RegisterFormNameFields,{maestroStyle:A,onInputChange:C,combinedName:this.props.combinedName,fnameError:this.props.fnameError,fnameProps:this.props.fnameProps,lnameError:this.props.lnameError,lnameProps:this.props.lnameProps,fnameValue:this.props.fnameValue,lnameValue:this.props.lnameValue,disabled:L||ue,variant:y,persistLabel:this.props.persistLabel});if(M&&0===this.state.splitSignupStep)return a.default.createElement("div",{className:V},a.default.createElement("form",{className:"clearfix credentials-form register-form",onSubmit:this.props.onClickSignUp,method:"post"},a.default.createElement("div",{className:"credentials-form__fields"},a.default.createElement("div",{className:"register-form__credential-fields"}),a.default.createElement("div",{className:"split-signup-fields"},de,a.default.createElement("button",{className:q,type:"submit","data-uxa-log":"register_form_continue_button",onClick:()=>this.onContinue()},a.default.createElement("span",null,ce)))),K&&a.default.createElement("div",{className:"hr-split-signup"}),K&&Z,K&&a.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"REGISTER"})));const me=(null===(b=this.props.gsiState)||void 0===b?void 0:b.tosPromptDisplayed)&&!(null===(I=this.props.gsiState)||void 0===I?void 0:I.isMobile),ge=!!this.props.gsiState&&this.props.gsiState.isInline,he=j&&this.state.formCollapsed?{display:"none"}:void 0,{tosMessage:fe,ctaMessage:_e}=(0,E.getTOSDataForType)(E.TOSType.UNIFIED_SUSI),ve=(0,E.isImplicitTOSEnabled)(x);ve&&(se=_e);const Ee=a.default.createElement(v.DWGBox,{className:"tos-text-row tos-text-implicit",marginTop:P?1:2},a.default.createElement(_.DWGText,{fontFamily:"atlas-grotesk",fontSize:12,lineHeight:16},fe)),Se=a.default.createElement(v.DWGBox,{className:"register-tos-spinner",marginTop:4,marginBottom:2,justifyContent:"center",display:"flex"},a.default.createElement(S.Spinner,{size:"small"})),be=a.default.createElement(f.DWGPrimaryButton,{className:(0,n.default)("register-button--dwg-refresh",H.className),width:"full",type:"submit",disabled:this.props.disabled||H.disabled||this.props.isSubmitting,label:se,disableArrow:!0,susiRefreshExpIsLoading:this.props.isSubmitting,susiRefreshExpSpinnerValueText:o.intl.formatMessage({id:"TD8ILD",defaultMessage:"Submitting"}),susiRefreshExpPreloadProgressIndicators:!0,"data-uxa-log":"register_form_submit_button"}),Ie=a.default.createElement(i.AuthCheckbox,{variant:this.props.dwgRefreshEnabled?c.AuthFormVariant.DIG20:oe,className:(0,n.default)("agree marketing-opt-in-checkbox",{"tos-checkbox--dwg-refresh":this.props.dwgRefreshEnabled,"marketing-opt-in--implicit-tos":ve}),disabled:L||ue,maestroStyle:A,inline:ie,onChange:C,checked:G,name:"marketing_opt_in",label:o.intl.formatMessage({id:"vRE9NS",defaultMessage:"I’d like to receive direct marketing email updates from Dropbox"}),uxaEventName:G?"registration_agree_marketing_emails_uncheck":"registration_agree_marketing_emails_check"});return a.default.createElement(a.default.Fragment,null,me&&h.DEFAULT_TOS_INLINE_CONTAINER_REGISTER,a.default.createElement("div",{className:V,onTransitionEnd:j?this.handleContainerTransitionEnd:void 0,style:he},a.default.createElement("form",{className:"clearfix credentials-form register-form",onSubmit:this.props.onClickSignUp,method:"post",noValidate:!0},ae&&z&&a.default.createElement("div",{className:(0,n.default)({"sign-in-with-google-button-register":this.props.showOneTapInlineGoogleButton})},a.default.createElement(h.DefaultButtonContainerFC,{context:"signup",gsiState:this.props.gsiState})),ne&&K&&Z,ae&&ge&&a.default.createElement(h.DefaultContainerFC,{context:"signup",gsiState:this.props.gsiState}),ne&&K&&Q,a.default.createElement("div",{className:"credentials-form__fields"},F?a.default.createElement("div",null,a.default.createElement("div",{className:"register-form__credential-fields"},de),pe):a.default.createElement("div",null,pe,a.default.createElement("div",{className:"register-form__credential-fields"},de)),a.default.createElement("div",{className:"register-form__credential-fields"},!this.props.thirdPartyInitiatedSignup&&a.default.createElement(s.AuthTextField,{value:this.props.passwordValue,placeholder:te.placeholder||(this.props.maestroStyle?o.intl.formatMessage({id:"klwYHA",defaultMessage:"Minimum 6 characters"}):o.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),name:"password",className:re,inputClassName:"password-input",onChange:C,measureStrength:te.measureStrength,label:te.label||(A?o.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}):void 0),error:this.props.passwordError,maestroStyle:A,disabled:L||ue,variant:y,passwordStrengthProps:te.strengthMeterProps,type:c.AuthTextInputType.PASSWORD,autoComplete:c.AuthTextInputAutoComplete.NEW_PASSWORD,persistLabel:this.props.persistLabel,dwgRefreshEnabled:this.props.dwgRefreshEnabled,showPasswordVariant:this.props.showPasswordVariant,showPasswordByDefault:this.props.showPasswordByDefault,autofillOrUserInputHandled:this.props.autofillOrUserInputHandled,onUserInputKeyDown:this.props.onUserInputKeyDown}))),P&&ve&&Ie,k&&Se,!k&&(ve?Ee:a.default.createElement(i.AuthCheckbox,{variant:this.props.dwgRefreshEnabled?c.AuthFormVariant.DIG20:oe,className:(0,n.default)("agree",{"tos-checkbox--dwg-refresh":this.props.dwgRefreshEnabled}),disabled:B.disabled||L||ue,maestroStyle:A,error:this.props.tosError,inline:ie,onChange:C,name:"tos_agree",checked:this.props.tosChecked,label:B.label||W,unsafeLabelHTML:B.unsafeLabelHTML,uxaEventName:le})),P&&!ve&&Ie,this.props.dwgRefreshEnabled?be:a.default.createElement("button",{className:X,type:"submit","data-uxa-log":"register_form_submit_button",disabled:this.props.disabled||H.disabled||this.props.isSubmitting},a.default.createElement("span",null,se)),!ae&&z&&a.default.createElement("div",{className:(0,n.default)({"sign-in-with-google-button-register":this.props.showOneTapInlineGoogleButton})},a.default.createElement(h.DefaultButtonContainerFC,{context:"signup",gsiState:this.props.gsiState})),!ne&&K&&Z,!ae&&ge&&a.default.createElement(h.DefaultContainerFC,{context:"signup",gsiState:this.props.gsiState}),a.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"REGISTER"}),a.default.createElement(m.FingerprintJs,{ref:this.setFingerprintJsComponent,source:"REGISTER"}))))}}t.RegisterFormView=b,b.displayName="RegisterFormView"}));
//# sourceMappingURL=pkg-susi-auth.min.js-vflk63QjZ.map