define(["require","exports","metaserver/static/js/ux_analytics/element_observers/observer_constants"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMutationObserverManager=void 0,t.createMutationObserverManager=function(e=document.body,t=n.UXA_INTERACT_SELECTOR){const r=new Set;let i=null,s=o();const u=new MutationObserver((function(){if(null!==i)return;i=requestAnimationFrame(()=>{const e=o(),t=c(e,s);a(c(s,e)),(function(e){r.forEach(t=>{t.addElements(e)})})(t),s=e,i=null})}));function o(){return Array.from(e.querySelectorAll(t)).filter(e=>e instanceof HTMLElement).map(e=>e).filter(e=>l(e))}function l(e){var t;if(!e.hasAttribute(n.UXA_ID_ATTR)||!e.hasAttribute(n.UXA_INTERACT_ATTR))return!1;const r=null===(t=e.getAttribute(n.UXA_INTERACT_ATTR))||void 0===t?void 0:t.trim().split(/\s+/);return!(r&&r.indexOf("shown")<0)}function a(e){r.forEach(t=>{t.removeElements(e)})}function c(e,t){return e.filter(e=>t.indexOf(e)<0)}function f(){u.observe(e,{childList:!0,subtree:!0})}return f(),{registerElementMutationListener:function(e){r.has(e)||(e.addElements(s),r.add(e))},unregisterElementMutationListener:function(e){r.has(e)&&(e.removeElements(s),r.delete(e))},purgeEventListeners:function(){a(s),r.clear()},pause:function(){u.disconnect()},resume:f,getElementsLength:function(){return s.length},testOnlyObserver:u,testOnlyIsEligibleForTracking:l,testOnlyDiffElements:c,testOnlyGetAnimationFrameRequest:function(){return i}}}}));
//# sourceMappingURL=mutation_observer.min.js-vfliLM-f0.map