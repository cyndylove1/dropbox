define("js/pap-events/campaigns_client/cancel_campaign_sequence",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.PAP_Cancel_CampaignSequence=void 0,a.PAP_Cancel_CampaignSequence=function(e){return{class:"campaigns_client",action:"cancel",object:"campaign_sequence",properties:e}}})),define("js/pap-events/campaigns_client/complete_campaign_sequence",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.PAP_Complete_CampaignSequence=void 0,a.PAP_Complete_CampaignSequence=function(e){return{class:"campaigns_client",action:"complete",object:"campaign_sequence",properties:e}}})),define("js/pap-events/campaigns_client/confirm_campaign_format",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.PAP_Confirm_CampaignFormat=void 0,a.PAP_Confirm_CampaignFormat=function(e){return{class:"campaigns_client",action:"confirm",object:"campaign_format",properties:e}}})),define("js/pap-events/campaigns_client/continue_campaign_sequence",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.PAP_Continue_CampaignSequence=void 0,a.PAP_Continue_CampaignSequence=function(e){return{class:"campaigns_client",action:"continue",object:"campaign_sequence",properties:e}}})),define("js/pap-events/campaigns_client/dismiss_campaign_format",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.PAP_Dismiss_CampaignFormat=void 0,a.PAP_Dismiss_CampaignFormat=function(e){return{class:"campaigns_client",action:"dismiss",object:"campaign_format",properties:e}}})),define("js/pap-events/campaigns_client/dismiss_campaign_format_tooltip",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.PAP_Dismiss_CampaignFormatTooltip=void 0,a.PAP_Dismiss_CampaignFormatTooltip=function(e){return{class:"campaigns_client",action:"dismiss",object:"campaign_format_tooltip",properties:e}}})),define("js/pap-events/campaigns_client/dispatch_campaign_format",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.PAP_Dispatch_CampaignFormat=void 0,a.PAP_Dispatch_CampaignFormat=function(e){return{class:"campaigns_client",action:"dispatch",object:"campaign_format",properties:e}}})),define("js/pap-events/campaigns_client/disqualify_campaign",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.PAP_Disqualify_Campaign=void 0,a.PAP_Disqualify_Campaign=function(e){return{class:"campaigns_client",action:"disqualify",object:"campaign",properties:e}}})),define("js/pap-events/campaigns_client/qualify_campaign",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.PAP_Qualify_Campaign=void 0,a.PAP_Qualify_Campaign=function(e){return{class:"campaigns_client",action:"qualify",object:"campaign",properties:e}}})),define("js/pap-events/campaigns_client/shown_campaign_format",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.PAP_Shown_CampaignFormat=void 0,a.PAP_Shown_CampaignFormat=function(e){return{class:"campaigns_client",action:"shown",object:"campaign_format",properties:e}}})),define("js/pap-events/campaigns_client/shown_campaign_format_tooltip",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.PAP_Shown_CampaignFormatTooltip=void 0,a.PAP_Shown_CampaignFormatTooltip=function(e){return{class:"campaigns_client",action:"shown",object:"campaign_format_tooltip",properties:e}}})),define("js/pap-events/enums/campaign_dismissed_method-utils",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getCampaignDismissedMethodFromString=void 0;const t=["user_clicked_dismiss"];a.getCampaignDismissedMethodFromString=function(e){return t.find(a=>a===(null==e?void 0:e.toLowerCase()))}})),define("js/pap-events/enums/campaign_disqualified_reason-utils",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getCampaignDisqualifiedReasonFromString=void 0;const t=["screen_size","control_variant","ineligible_file_type","post_download_key_expired","has_opened_share_settings","mobile_device","variant_mismatch"];a.getCampaignDisqualifiedReasonFromString=function(e){return t.find(a=>a===(null==e?void 0:e.toLowerCase()))}})),define("metaserver/static/js/campaigns/campaign_events_api",["require","exports","tslib","react","metaserver/static/js/core/exception","metaserver/static/js/api_v2/user_client","metaserver/static/js/clean/active_user","metaserver/static/js/user_metadata/api"],(function(e,a,t,i,n,s,r,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CampaignContext=a.parseIntOrUndefined=a.reportException=a.logCampaignControl=a.logCampaignDismissed=a.setCampaignDismissedInUserMetadata=a.getIsCampaignDismissedInUserMetadata=a.logCampaignClick=a.logCampaignImpressionDeclined=a.logCampaignImpression=a.createMegaphoneCampaignImpressionContextFromMegaphoneImpressionContext=a.createMegaphoneCampaignImpressionContext=a.createMegaphoneCampaignImpressionContextFromEnrichedCampaignImpressionContext=void 0,i=t.__importDefault(i),n=t.__importStar(n);function _(e,a,t){let i=void 0;try{i={campaignId:a,campaignVariantId:t,campaignImpressionId:e,userId:(0,r.mustGetActiveUserId)()}}catch(e){reportException({err:e})}return i}function reportException({err:e,severity:a=n.SEVERITY.NONCRITICAL,exc_extra:t={}}){n.reportException({err:e,tags:["megaphone","robe"],severity:a,exc_extra:t})}function c(e,a,t){const i=new s.UserApiV2Client,n={megaphone_impression_id:e.campaignImpressionId,megaphone_request_context:{user_id:e.userId},campaign_event_name:a,campaign_event_info:t,campaign_id:m(e.campaignId),version_id:m(e.campaignVariantId)};return i.ns("megaphone").rpc("log_campaign_event",n,{subjectUserId:e.userId}).catch(t=>{reportException({err:t,exc_extra:{user_id:e.userId,impression_id:e.campaignImpressionId,event_name:a[".tag"]}})})}function m(e){switch(typeof e){case"string":return parseInt(e,10);case"number":return e;default:return}}a.createMegaphoneCampaignImpressionContextFromEnrichedCampaignImpressionContext=function(e){var a,t;return _(e.megaphone_impression_id||"",null===(a=e.campaign_variant_descriptor)||void 0===a?void 0:a.campaign_id,null===(t=e.campaign_variant_descriptor)||void 0===t?void 0:t.variant_id)},a.createMegaphoneCampaignImpressionContext=_,a.createMegaphoneCampaignImpressionContextFromMegaphoneImpressionContext=function(e){var a,t,i,n;if(e.megaphone_impression_id)return _(e.megaphone_impression_id,null===(t=null===(a=e.version_info)||void 0===a?void 0:a.campaign_id)||void 0===t?void 0:t.toString(),null===(n=null===(i=e.version_info)||void 0===i?void 0:i.version_id)||void 0===n?void 0:n.toString())},a.logCampaignImpression=function(e){return c(e,{".tag":"impression"})},a.logCampaignImpressionDeclined=function(e){return c(e,{".tag":"impression_declined"})},a.logCampaignClick=function(e,a){return c(e,{".tag":"click"},{cta_id:a})},a.getIsCampaignDismissedInUserMetadata=function(e,a,i){return t.__awaiter(this,void 0,void 0,(function*(){if(e)try{const{CAMPAIGNS_TOOLKIT_USER_DISMISSED_CAMPAIGNS:a}=yield(0,o.getUserMetadata)(["CAMPAIGNS_TOOLKIT_USER_DISMISSED_CAMPAIGNS"],i);return!!a&&new Set(a.split(":")).has(`${e}`)}catch(t){return reportException({err:t,exc_extra:{user_id:i,impression_id:a,campaign_id:e,event_name:"getIsCampaignDismissedInUserMetadata"}}),!0}return!1}))},a.setCampaignDismissedInUserMetadata=function(e,a,i){return t.__awaiter(this,void 0,void 0,(function*(){if(e)try{const{CAMPAIGNS_TOOLKIT_USER_DISMISSED_CAMPAIGNS:a}=yield(0,o.getUserMetadata)(["CAMPAIGNS_TOOLKIT_USER_DISMISSED_CAMPAIGNS"],i),t=new Set(a?a.split(":"):"").add(`${e}`),n=Array.from(t).join(":");yield(0,o.setUserMetadata)({CAMPAIGNS_TOOLKIT_USER_DISMISSED_CAMPAIGNS:n},i)}catch(t){reportException({err:t,exc_extra:{user_id:i,impression_id:a,campaign_id:e,event_name:"setCampaignDismissedInUserMetadata"}})}}))},a.logCampaignDismissed=function(e){return c(e,{".tag":"dismissed"})},a.logCampaignControl=function(e){return c(e,{".tag":"control"})},a.reportException=reportException,a.parseIntOrUndefined=m,a.CampaignContext=i.default.createContext(void 0)})),define("metaserver/static/js/campaigns/campaign_hooks",["require","exports","react","metaserver/static/js/campaigns/campaign_events_api","metaserver/static/js/campaigns/emitter"],(function(e,a,t,i,n){"use strict";function s(e){(0,i.logCampaignImpression)(e)}function r(e){(0,i.logCampaignImpressionDeclined)(e)}Object.defineProperty(a,"__esModule",{value:!0}),a.useCampaignDismissed=a.useCampaignClick=a.useCampaignAsync=a.useCampaign=void 0,a.useCampaign=function(e,a){(0,t.useEffect)(()=>{(null==e?void 0:e.campaignImpressionId)&&(a?r(e):s(e))},[])},a.useCampaignAsync=function(){return{onCampaignImpression:(0,t.useCallback)((function(e,a){e.campaignImpressionId&&(a?r(e):s(e))}),[])}},a.useCampaignClick=function(e,a){return{onCampaignClickCallback:(0,t.useCallback)((function(){(null==e?void 0:e.campaignImpressionId)&&(0,i.logCampaignClick)(e,a)}),[e,a])}},a.useCampaignDismissed=function(e){return{onCampaignDismissedCallback:(0,t.useCallback)((function(){(null==e?void 0:e.campaignId)&&(0,n.emitCampaignDismissed)(null==e?void 0:e.campaignId),(null==e?void 0:e.campaignImpressionId)&&((0,i.logCampaignDismissed)(e),(0,i.setCampaignDismissedInUserMetadata)(null==e?void 0:e.campaignId,null==e?void 0:e.campaignImpressionId,null==e?void 0:e.userId))}),[e])}}}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,a,t,i){void 0===i&&(i=t);var n=Object.getOwnPropertyDescriptor(a,t);n&&("get"in n?a.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return a[t]}}),Object.defineProperty(e,i,n)}:function(e,a,t,i){void 0===i&&(i=t),e[i]=a[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(a,e,t);return __setModuleDefault(a,e),a};define("metaserver/static/js/campaigns/campaign_formats/action_choice_modal/loadable_action_choice_modal",["require","exports","metaserver/static/js/async/loadable"],(function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AsyncActionChoiceModalCampaignFormat=void 0,a.AsyncActionChoiceModalCampaignFormat=(0,t.Loadable)({loader:()=>new Promise((a,t)=>{e(["metaserver/static/js/campaigns/campaign_formats/action_choice_modal/action_choice_modal"],a,t)}).then(__importStar).then(({ActionChoiceModalConversionComponent:e})=>e)})}));__createBinding=this&&this.__createBinding||(Object.create?function(e,a,t,i){void 0===i&&(i=t);var n=Object.getOwnPropertyDescriptor(a,t);n&&("get"in n?a.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return a[t]}}),Object.defineProperty(e,i,n)}:function(e,a,t,i){void 0===i&&(i=t),e[i]=a[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(a,e,t);return __setModuleDefault(a,e),a};define("metaserver/static/js/campaigns/campaign_formats/banner/loadable_campaign_banner",["require","exports","metaserver/static/js/async/loadable"],(function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AsyncCampaignBanner=void 0,a.AsyncCampaignBanner=(0,t.Loadable)({loader:()=>new Promise((a,t)=>{e(["metaserver/static/js/campaigns/campaign_formats/banner/campaign_banner"],a,t)}).then(__importStar).then(({CampaignBannerConversionComponent:e})=>e)})}));__createBinding=this&&this.__createBinding||(Object.create?function(e,a,t,i){void 0===i&&(i=t);var n=Object.getOwnPropertyDescriptor(a,t);n&&("get"in n?a.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return a[t]}}),Object.defineProperty(e,i,n)}:function(e,a,t,i){void 0===i&&(i=t),e[i]=a[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(a,e,t);return __setModuleDefault(a,e),a};define("metaserver/static/js/campaigns/campaign_formats/dialog/loadable_campaign_dialog",["require","exports","metaserver/static/js/async/loadable"],(function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AsyncCampaignDialog=void 0,a.AsyncCampaignDialog=(0,t.Loadable)({loader:()=>new Promise((a,t)=>{e(["metaserver/static/js/campaigns/campaign_formats/dialog/campaign_dialog"],a,t)}).then(__importStar).then(({CampaignDialog:e})=>e)})})),define("metaserver/static/js/campaigns/campaign_formats/index_new",["require","exports","tslib","react","metaserver/static/js/campaigns/emitter","metaserver/static/js/campaigns/filters/index","metaserver/static/js/campaigns/history_utils","metaserver/static/js/campaigns/campaign_formats/banner/loadable_campaign_banner","metaserver/static/js/campaigns/campaign_formats/menu/loadable_campaign_menu_item","metaserver/static/js/campaigns/campaign_formats/modal/loadable_campaign_modal","metaserver/static/js/campaigns/campaign_formats/snackbar/loadable_campaign_snackbar","metaserver/static/js/campaigns/campaign_formats/tooltip/loadable_campaign_tooltip","metaserver/static/js/campaigns/campaign_formats/dialog/loadable_campaign_dialog","metaserver/static/js/campaigns/campaign_formats/link/loadable_campaign_link","metaserver/static/js/campaigns/campaign_formats/action_choice_modal/loadable_action_choice_modal","metaserver/static/js/campaigns/campaign_formats/pulsar/loadable_campaign_pulsar","metaserver/static/js/campaigns/utils/logging","metaserver/static/js/onboarding/logging/events","metaserver/static/js/campaigns/custom_campaigns/custom_campaign_index"],(function(e,a,t,i,n,s,r,o,_,c,m,l,p,g,u,d,f,E,v){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CampaignSlot=a.shouldCampaignRender=a.preloadCampaign=a.CampaignFormat=void 0,i=t.__importStar(i);a.CampaignFormat=e=>{var a,t;const n=e.currentSequenceStep;let s=void 0;if(n){const i=null===(t=null===(a=e.campaign.sequence)||void 0===a?void 0:a.nodes)||void 0===t?void 0:t[n];i&&(s=i.content)}else s=e.campaign.content;const r=Object.assign(Object.assign({},e),{activeCampaignContent:s}),f=null==s?void 0:s[".tag"];if(!f)return null;const E=`${e.campaign.campaign_id}-${n}`;switch(f){case"banner_campaign_format":return i.default.createElement(o.AsyncCampaignBanner,Object.assign({key:E},r));case"custom_campaign_format":return i.default.createElement(v.CustomCampaignLoader,Object.assign({key:E},r));case"menu_item_campaign_format":return i.default.createElement(_.AsyncCampaignMenuItem,Object.assign({key:E},r));case"snackbar_campaign_format":return i.default.createElement(m.AsyncCampaignSnackbar,Object.assign({key:E},r));case"modal_campaign_format":return i.default.createElement(c.AsyncCampaignModal,Object.assign({key:E},r));case"tooltip_campaign_format":return i.default.createElement(l.AsyncCampaignTooltip,Object.assign({key:E},r));case"dialog_campaign_format":return i.default.createElement(p.AsyncCampaignDialog,Object.assign({key:E},r));case"link_campaign_format":return i.default.createElement(g.AsyncCampaignLink,Object.assign({key:E},r));case"action_choice_modal_campaign_format":return i.default.createElement(u.AsyncActionChoiceModalCampaignFormat,Object.assign({key:E},r));case"pulsar_campaign_format":return i.default.createElement(d.AsyncCampaignPulsar,Object.assign({key:E},r));default:return null}};a.preloadCampaign=e=>{var a;const t=(0,r.getEvents)(e);if(t&&t.length>0){const{data:e,context:i}=t[t.length-1],n=(0,s.getFiltersForCampaign)(null===(a=e.campaign)||void 0===a?void 0:a.campaign.campaign_id);return{campaignProps:e.campaign,contextData:i,filters:n}}return{}};a.shouldCampaignRender=(e,a,t)=>{var i;if(!a)return!1;if(!(null==e?void 0:e.length))return!0;if(a.currentSequenceStep&&a.currentSequenceStep!==(null===(i=a.campaign.sequence)||void 0===i?void 0:i.root))return!0;const n={campaignProps:a,contextData:t};for(const t of e)if(!t.filterFunction(n))return(0,f.logCampaignQualifyEvent)(E.CampaignsToolkitEvents.CAMPAIGN_DISQUALIFY,a,t.campaignDisqualifiedReason),!1;return!0};a.CampaignSlot=({slotId:e,wrapperClassName:t,initialState:r={campaignProps:void 0,contextData:void 0,filters:void 0,loggingParams:void 0}})=>{const[{campaignProps:o,contextData:_,filters:c,loggingParams:m},l]=(0,i.useState)(r),p=(0,i.useMemo)(()=>(0,a.shouldCampaignRender)(c,o,_),[o,_,c]);if((0,i.useEffect)(()=>{const a=({data:e}={data:{}})=>{var a;const t=(0,s.getFiltersForCampaign)(null===(a=null==e?void 0:e.campaign)||void 0===a?void 0:a.campaign.campaign_id);l({campaignProps:(null==e?void 0:e.campaign)||o,contextData:(null==e?void 0:e.context)||_,filters:t||c,loggingParams:(null==e?void 0:e.loggingParams)||m})};return n.campaignsEmitter.on(e,a),()=>{n.campaignsEmitter.off(e,a)}},[]),o&&p){const e=Object.assign(Object.assign({},o),{contextData:_,loggingParams:m});return t?i.default.createElement("div",{className:t},i.default.createElement(a.CampaignFormat,Object.assign({},e))):i.default.createElement(a.CampaignFormat,Object.assign({},e))}return null},a.CampaignSlot.displayName="CampaignSlot"}));__createBinding=this&&this.__createBinding||(Object.create?function(e,a,t,i){void 0===i&&(i=t);var n=Object.getOwnPropertyDescriptor(a,t);n&&("get"in n?a.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return a[t]}}),Object.defineProperty(e,i,n)}:function(e,a,t,i){void 0===i&&(i=t),e[i]=a[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(a,e,t);return __setModuleDefault(a,e),a};define("metaserver/static/js/campaigns/campaign_formats/menu/loadable_campaign_menu_item",["require","exports","metaserver/static/js/async/loadable"],(function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AsyncCampaignMenuItem=void 0,a.AsyncCampaignMenuItem=(0,t.Loadable)({loader:()=>new Promise((a,t)=>{e(["metaserver/static/js/campaigns/campaign_formats/menu/campaign_menu_item"],a,t)}).then(__importStar).then(({CampaignMenuItemConversionComponent:e})=>e)})}));__createBinding=this&&this.__createBinding||(Object.create?function(e,a,t,i){void 0===i&&(i=t);var n=Object.getOwnPropertyDescriptor(a,t);n&&("get"in n?a.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return a[t]}}),Object.defineProperty(e,i,n)}:function(e,a,t,i){void 0===i&&(i=t),e[i]=a[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(a,e,t);return __setModuleDefault(a,e),a};define("metaserver/static/js/campaigns/campaign_formats/snackbar/loadable_campaign_snackbar",["require","exports","metaserver/static/js/async/loadable"],(function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AsyncCampaignSnackbar=void 0,a.AsyncCampaignSnackbar=(0,t.Loadable)({loader:()=>new Promise((a,t)=>{e(["metaserver/static/js/campaigns/campaign_formats/snackbar/campaign_snackbar"],a,t)}).then(__importStar).then(({CampaignSnackbarConversionComponent:e})=>e)})}));__createBinding=this&&this.__createBinding||(Object.create?function(e,a,t,i){void 0===i&&(i=t);var n=Object.getOwnPropertyDescriptor(a,t);n&&("get"in n?a.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return a[t]}}),Object.defineProperty(e,i,n)}:function(e,a,t,i){void 0===i&&(i=t),e[i]=a[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(a,e,t);return __setModuleDefault(a,e),a};define("metaserver/static/js/campaigns/campaign_formats/modal/loadable_campaign_modal",["require","exports","metaserver/static/js/async/loadable"],(function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AsyncCampaignModal=void 0,a.AsyncCampaignModal=(0,t.Loadable)({loader:()=>new Promise((a,t)=>{e(["metaserver/static/js/campaigns/campaign_formats/modal/campaign_modal"],a,t)}).then(__importStar).then(({CampaignModalConversionComponent:e})=>e)})}));__createBinding=this&&this.__createBinding||(Object.create?function(e,a,t,i){void 0===i&&(i=t);var n=Object.getOwnPropertyDescriptor(a,t);n&&("get"in n?a.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return a[t]}}),Object.defineProperty(e,i,n)}:function(e,a,t,i){void 0===i&&(i=t),e[i]=a[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(a,e,t);return __setModuleDefault(a,e),a};define("metaserver/static/js/campaigns/campaign_formats/tooltip/loadable_campaign_tooltip",["require","exports","metaserver/static/js/async/loadable"],(function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AsyncCampaignTooltip=void 0,a.AsyncCampaignTooltip=(0,t.Loadable)({loader:()=>new Promise((a,t)=>{e(["metaserver/static/js/campaigns/campaign_formats/tooltip/campaign_tooltip"],a,t)}).then(__importStar).then(({CampaignTooltip:e})=>e)})}));__createBinding=this&&this.__createBinding||(Object.create?function(e,a,t,i){void 0===i&&(i=t);var n=Object.getOwnPropertyDescriptor(a,t);n&&("get"in n?a.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return a[t]}}),Object.defineProperty(e,i,n)}:function(e,a,t,i){void 0===i&&(i=t),e[i]=a[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(a,e,t);return __setModuleDefault(a,e),a};define("metaserver/static/js/campaigns/campaign_formats/pulsar/loadable_campaign_pulsar",["require","exports","metaserver/static/js/async/loadable"],(function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AsyncCampaignPulsar=void 0,a.AsyncCampaignPulsar=(0,t.Loadable)({loader:()=>new Promise((a,t)=>{e(["metaserver/static/js/campaigns/campaign_formats/pulsar/campaign_pulsar"],a,t)}).then(__importStar).then(({CampaignPulsar:e})=>e)})}));__createBinding=this&&this.__createBinding||(Object.create?function(e,a,t,i){void 0===i&&(i=t);var n=Object.getOwnPropertyDescriptor(a,t);n&&("get"in n?a.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return a[t]}}),Object.defineProperty(e,i,n)}:function(e,a,t,i){void 0===i&&(i=t),e[i]=a[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(a,e,t);return __setModuleDefault(a,e),a};define("metaserver/static/js/campaigns/campaign_formats/link/loadable_campaign_link",["require","exports","metaserver/static/js/async/loadable"],(function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AsyncCampaignLink=void 0,a.AsyncCampaignLink=(0,t.Loadable)({loader:()=>new Promise((a,t)=>{e(["metaserver/static/js/campaigns/campaign_formats/link/campaign_link"],a,t)}).then(__importStar).then(({CampaignLink:e})=>e)})})),define("metaserver/static/js/campaigns/custom_campaigns/custom_campaign_index",["require","exports","tslib","react","metaserver/static/js/campaigns/emitter","metaserver/static/js/campaigns/custom_campaigns/loadable_custom_campaigns"],(function(e,a,t,i,n,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CustomCampaignLoader=void 0,i=t.__importStar(i);const r=e=>{const{isPreview:a,campaign:t}=e;return(0,i.useEffect)(()=>a?()=>{}:(n.campaignsEmitter.emit(t.campaign_name,Object.assign({isEnabled:!0},e)),()=>{n.campaignsEmitter.emit(t.campaign_name,Object.assign({isEnabled:!1},e))}),[e]),a?i.default.createElement("div",null,i.default.createElement("p",null,"Preview is not supported for this component."),i.default.createElement("a",{href:"https://dropbox-kms.atlassian.net/wiki/spaces/BC/pages/900346067/Campaigns+API+v2"},"Please visit here for more information.")):null};r.displayName="EventEmitterFormat";const o=({activeCampaignContent:e,isPreview:a})=>{if(!a)return null;const t="custom_campaign_format"===(null==e?void 0:e[".tag"])?e.custom_campaign_id:null;return i.default.createElement("p",null,"There is no component configured for custom campaign ID ",null!=t?t:"(empty)")};o.displayName="NoMatchingCampaignFormat";const _=({isPreview:e,error:a})=>e?i.default.createElement(i.default.Fragment,null,i.default.createElement("p",null,"The arguments to the custom campaign are not valid JSON."),i.default.createElement("p",null,"The error is: ",a.message)):null;_.displayName="InvalidCampaignArgsFormat";a.CustomCampaignLoader=e=>{const{activeCampaignContent:a}=e;if("custom_campaign_format"!==(null==a?void 0:a[".tag"]))return i.default.createElement(o,Object.assign({},e));let t={};if(a.args)try{t=JSON.parse(a.args)}catch(a){const t=Object.assign(Object.assign({},e),{error:a});return i.default.createElement(_,Object.assign({},t))}const n=Object.assign(Object.assign({},e),{args:t});switch(a.custom_campaign_id){case"event_emitter":return i.default.createElement(r,Object.assign({},n));case"onboarding_survey_modal":return i.default.createElement(s.AsyncOnboardingSurveyModal,Object.assign({},n));default:return i.default.createElement(o,Object.assign({},n))}},a.CustomCampaignLoader.displayName="CustomCampaignLoader"})),define("metaserver/static/js/campaigns/custom_campaigns/loadable_custom_campaigns",["require","exports","tslib","metaserver/static/js/async/loadable"],(function(e,a,t,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.AsyncOnboardingSurveyModal=void 0,a.AsyncOnboardingSurveyModal=(0,i.Loadable)({loader:()=>t.__awaiter(void 0,void 0,void 0,(function*(){return new Promise((a,t)=>{e(["metaserver/static/js/campaigns/custom_campaigns/onboarding_survey_modal/campaign_onboarding_survey_modal"],a,t)}).then(t.__importStar).then(({OnboardingSurveyModal:e})=>e)}))})})),define("metaserver/static/js/campaigns/emitter",["require","exports","tslib","eventemitter3"],(function(e,a,t,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.publishEvent=a.listenForCustomCampaignEvent=a.listenForBrowseRefreshEvent=a.emitPreviewPageLoadChangeEvent=a.PreviewPageLoadEventType=a.emitCampaignSequenceAction=a.emitRequestBrowseRefreshEvent=a.emitPageChanged=a.emitPageLoaded=a.emitCampaignDismissed=a.clearCampaignInSlot=a.emitCampaignToSlot=a.getSlotFromCampaignFormatProps=a.getSlotFromImpression=a.campaignsEmitter=a.CampaignsEventEmitter=a.PREVIEW_PAGE_LOADED=a.CAMPAIGN_SEQUENCE_ACTION=a.CAMPAIGN_EVENT=a.PAGE_CHANGED=a.PAGE_LOADED=a.CAMPAIGN_DISMISSED=void 0,i=t.__importDefault(i),a.CAMPAIGN_DISMISSED="campaign-dismissed",a.PAGE_LOADED="page-loaded",a.PAGE_CHANGED="page-changed",a.CAMPAIGN_EVENT="campaign-event",a.CAMPAIGN_SEQUENCE_ACTION="sequence-action",a.PREVIEW_PAGE_LOADED="preview-page-loaded";class n extends i.default{constructor(){super(),this.allEventBuffers={}}on(e,a){super.on(e,a);const t=this.allEventBuffers[e.toString()];return void 0!==t&&t.forEach(a=>{super.emit(e,a)}),this}emit(e,a){return a&&"object"==typeof a&&"name"in a&&(void 0===this.allEventBuffers[a.name]&&(this.allEventBuffers[a.name]=[]),this.allEventBuffers[a.name].push(a)),super.emit(e,a)}}a.CampaignsEventEmitter=n,a.campaignsEmitter=new n;a.getSlotFromImpression=e=>{var a,t,i;return null===(i=null===(t=null===(a=null==e?void 0:e.campaign_variant_descriptor)||void 0===a?void 0:a.variant_content)||void 0===t?void 0:t.slot)||void 0===i?void 0:i[".tag"]};a.getSlotFromCampaignFormatProps=e=>{var a;return null===(a=null==e?void 0:e.slotId)||void 0===a?void 0:a[".tag"]};a.emitCampaignToSlot=(e,t,i)=>{const n=(0,a.getSlotFromCampaignFormatProps)(e);n&&"other"!==n&&a.campaignsEmitter.emit(n,{name:n,data:{campaign:e,context:t,loggingParams:i}})};a.clearCampaignInSlot=e=>{const t=(0,a.getSlotFromCampaignFormatProps)(e);t&&"other"!==t&&a.campaignsEmitter.emit(t,{name:t,data:{campaign:null}})};a.emitCampaignDismissed=e=>{a.campaignsEmitter.emit(a.CAMPAIGN_DISMISSED,e)};a.emitPageLoaded=(e,t)=>{a.campaignsEmitter.emit(a.PAGE_LOADED,{name:a.PAGE_LOADED,data:{page:e,context:t}})};a.emitPageChanged=()=>{a.campaignsEmitter.emit(a.PAGE_CHANGED,{name:a.PAGE_CHANGED})};a.emitRequestBrowseRefreshEvent=()=>{a.campaignsEmitter.emit("request-browse-refresh",{})};a.emitCampaignSequenceAction=(e,t)=>{a.campaignsEmitter.emit(a.CAMPAIGN_SEQUENCE_ACTION,{campaignId:e,ctaId:t})},(function(e){e[e.Mount=0]="Mount",e[e.Unmount=1]="Unmount"})(a.PreviewPageLoadEventType||(a.PreviewPageLoadEventType={}));a.emitPreviewPageLoadChangeEvent=e=>{a.campaignsEmitter.emit(a.PREVIEW_PAGE_LOADED,{loadEventType:e})};a.listenForBrowseRefreshEvent=e=>{a.campaignsEmitter.removeAllListeners("request-browse-refresh"),a.campaignsEmitter.on("request-browse-refresh",()=>{e()})};a.listenForCustomCampaignEvent=(e,t)=>{a.campaignsEmitter.removeAllListeners(e),a.campaignsEmitter.on(e,e=>{t(e)})};a.publishEvent=(e,t={})=>{a.campaignsEmitter.emit(a.CAMPAIGN_EVENT,{name:e,data:t})}})),define("metaserver/static/js/campaigns/filters/acquisition_filters",["require","exports","metaserver/static/js/campaigns/types","metaserver/static/js/campaigns/filters/constants","metaserver/static/js/campaigns/utils/logging","metaserver/static/js/onboarding/logging/events"],(function(e,a,t,i,n,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.qualifyAcquisitionPromoCampaignsByVariant=void 0;a.qualifyAcquisitionPromoCampaignsByVariant={filterFunction:({campaignProps:e,contextData:a})=>{const t=e.campaign.campaign_id,r=null==a?void 0:a.loggedOutAcquisitionPagesPromoModalVariant,o="V1"===r&&t===i.ACQUISITION_PAGES_PROMO_MODAL_V1_CAMPAIGN_ID,_="V2"===r&&t===i.ACQUISITION_PAGES_PROMO_MODAL_V2_CAMPAIGN_ID;return!(!o&&!_)&&((0,n.logCampaignQualifyEvent)(s.CampaignsToolkitEvents.CAMPAIGN_QUALIFY,e),!0)},campaignDisqualifiedReason:t.CampaignDisqualifiedReasonEnum.VARIANT_MISMATCH}})),define("metaserver/static/js/campaigns/filters/index",["require","exports","metaserver/static/js/campaigns/filters/constants","metaserver/static/js/campaigns/filters/previews_filters","metaserver/static/js/campaigns/filters/shop_filters","metaserver/static/js/campaigns/filters/lve_tooltip_filters","metaserver/static/js/campaigns/filters/team_types_m2_filters","metaserver/static/js/campaigns/filters/organize_experience_filter","metaserver/static/js/campaigns/filters/acquisition_filters","metaserver/static/js/campaigns/filters/onboarding_survey_modal_filters"],(function(e,a,t,i,n,s,r,o,_,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getFiltersForCampaign=a.CAMPAIGNS_TO_FILTERS=void 0,a.CAMPAIGNS_TO_FILTERS={[t.SHOP_MODAL_CAMPAIGN_ID]:[n.checkNonMobileEligibility,n.hasOpenedShareSettings,n.checkSelectedFilesShopEligibility],[t.PREVIEW_FILE_LOGGED_OUT_POST_DOWNLOAD_CAMPAIGN_ID]:[i.loggedOutPostDownloadKeyHasExpired],[t.PREVIEWS_FILE_LOGGED_OUT_DOC_CAMPAIGN_ID]:[i.googleOneTapActive],[t.PREVIEWS_FILE_LOGGED_OUT_VIDEO_CAMPAIGN_ID]:[i.googleOneTapActive],[t.PREVIEWS_FILE_LOGGED_OUT_IMAGE_CAMPAIGN_ID]:[i.googleOneTapActive],[t.PREVIEWS_FILE_LOGGED_OUT_GENERIC_CAMPAIGN_ID]:[i.googleOneTapActive],[t.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_CAMPAIGN_ID]:[r.qualifyTeamTypesM2ByVersionId],[t.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_WITHOUT_BRANDING_CAMPAIGN_ID]:[r.qualifyTeamTypesM2ByVersionId],[t.LVE_TOOLTIP_CAMPAIGN_ID]:[s.qualifyLVEFeatureActivationByVersionId],[t.OEX_FIND_DUPLICATES_CAMPAIGN_ID]:[o.qualifyOEXFindDuplicates],[t.OEX_FIND_DUPLICATES_TEST_CAMPAIGN_ID]:[o.qualifyOEXFindDuplicatesTest],[t.ACQUISITION_PAGES_PROMO_MODAL_V1_CAMPAIGN_ID]:[_.qualifyAcquisitionPromoCampaignsByVariant],[t.ACQUISITION_PAGES_PROMO_MODAL_V2_CAMPAIGN_ID]:[_.qualifyAcquisitionPromoCampaignsByVariant],[t.ONBOARDING_MODAL_IN_BROWSE_CAMPAIGN_ID]:[c.qualifyOnboardingSurveyModalCampaignByVersionId]},a.getFiltersForCampaign=function(e=-1){return a.CAMPAIGNS_TO_FILTERS[e]||[]}})),define("metaserver/static/js/campaigns/filters/constants",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ONBOARDING_MODAL_IN_BROWSE_VERSION_ID=a.ONBOARDING_MODAL_IN_BROWSE_CAMPAIGN_ID=a.ACQUISITION_PAGES_PROMO_MODAL_V2_CAMPAIGN_ID=a.ACQUISITION_PAGES_PROMO_MODAL_V1_CAMPAIGN_ID=a.OEX_FIND_DUPLICATES_TEST_CAMPAIGN_ID=a.OEX_FIND_DUPLICATES_CAMPAIGN_ID=a.CAPTURE_PREVIEW_VOICE_OVERS_VERSION_ID=a.CAPTURE_PREVIEW_VOICE_OVERS_CAMPAIGN_ID=a.CAPTURE_BROWSE_CONTROL_VERSION_ID=a.CAPTURE_BROWSE_CONTROL_CAMPAIGN_ID=a.CAPTURE_BROWSE_VERSION_ID=a.CAPTURE_BROWSE_CAMPAIGN_ID=a.LVE_TOOLTIP_CONTROL=a.LVE_TOOLTIP_ON=a.LVE_TOOLTIP_CAMPAIGN_ID=a.TEAM_TYPES_M2_BANNER_MODAL_SEQUENCE_WITHOUT_BRANDING_VERSION_ID=a.TEAM_TYPES_M2_BANNER_MODAL_SEQUENCE_WITHOUT_BRANDING_CAMPAIGN_ID=a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_WITHOUT_BRANDING_CONTROL=a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_WITHOUT_BRANDING_V1=a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_WITHOUT_BRANDING_CAMPAIGN_ID=a.TEAM_TYPES_M2_BANNER_MODAL_SEQUENCE_VERSION_ID=a.TEAM_TYPES_M2_BANNER_MODAL_SEQUENCE_CAMPAIGN_ID=a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_CONTROL=a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_V1=a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_CAMPAIGN_ID=a.PREVIEWS_FILE_LOGGED_OUT_GENERIC_CAMPAIGN_ID=a.PREVIEWS_FILE_LOGGED_OUT_IMAGE_CAMPAIGN_ID=a.PREVIEWS_FILE_LOGGED_OUT_VIDEO_CAMPAIGN_ID=a.PREVIEWS_FILE_LOGGED_OUT_DOC_CAMPAIGN_ID=a.PREVIEW_FILE_LOGGED_OUT_POST_DOWNLOAD_CAMPAIGN_ID=a.SHOP_MODAL_CONTROL=a.SHOP_MODAL_V1=a.SHOP_MODAL_CAMPAIGN_ID=void 0,a.SHOP_MODAL_CAMPAIGN_ID=6113,a.SHOP_MODAL_V1=13981,a.SHOP_MODAL_CONTROL=13980,a.PREVIEW_FILE_LOGGED_OUT_POST_DOWNLOAD_CAMPAIGN_ID=6855,a.PREVIEWS_FILE_LOGGED_OUT_DOC_CAMPAIGN_ID=7e3,a.PREVIEWS_FILE_LOGGED_OUT_VIDEO_CAMPAIGN_ID=6997,a.PREVIEWS_FILE_LOGGED_OUT_IMAGE_CAMPAIGN_ID=6995,a.PREVIEWS_FILE_LOGGED_OUT_GENERIC_CAMPAIGN_ID=7001,a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_CAMPAIGN_ID=6971,a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_V1=15807,a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_CONTROL=14881,a.TEAM_TYPES_M2_BANNER_MODAL_SEQUENCE_CAMPAIGN_ID=8279,a.TEAM_TYPES_M2_BANNER_MODAL_SEQUENCE_VERSION_ID=15817,a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_WITHOUT_BRANDING_CAMPAIGN_ID=8093,a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_WITHOUT_BRANDING_V1=15806,a.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_WITHOUT_BRANDING_CONTROL=15675,a.TEAM_TYPES_M2_BANNER_MODAL_SEQUENCE_WITHOUT_BRANDING_CAMPAIGN_ID=8100,a.TEAM_TYPES_M2_BANNER_MODAL_SEQUENCE_WITHOUT_BRANDING_VERSION_ID=15676,a.LVE_TOOLTIP_CAMPAIGN_ID=7128,a.LVE_TOOLTIP_ON=14935,a.LVE_TOOLTIP_CONTROL=14936,a.CAPTURE_BROWSE_CAMPAIGN_ID=7211,a.CAPTURE_BROWSE_VERSION_ID=14977,a.CAPTURE_BROWSE_CONTROL_CAMPAIGN_ID=7243,a.CAPTURE_BROWSE_CONTROL_VERSION_ID=14999,a.CAPTURE_PREVIEW_VOICE_OVERS_CAMPAIGN_ID=7487,a.CAPTURE_PREVIEW_VOICE_OVERS_VERSION_ID=15165,a.OEX_FIND_DUPLICATES_CAMPAIGN_ID=7565,a.OEX_FIND_DUPLICATES_TEST_CAMPAIGN_ID=7729,a.ACQUISITION_PAGES_PROMO_MODAL_V1_CAMPAIGN_ID=7948,a.ACQUISITION_PAGES_PROMO_MODAL_V2_CAMPAIGN_ID=8107,a.ONBOARDING_MODAL_IN_BROWSE_CAMPAIGN_ID=8619,a.ONBOARDING_MODAL_IN_BROWSE_VERSION_ID=16131})),define("metaserver/static/js/campaigns/filters/shop_filters",["require","exports","metaserver/static/js/browse/constants","metaserver/static/js/campaigns/history_utils","metaserver/static/js/campaigns/types","metaserver/static/js/core/browser_detection"],(function(e,a,t,i,n,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.checkNonMobileEligibility=a.hasOpenedShareSettings=a.checkSelectedFilesShopEligibility=void 0;a.checkSelectedFilesShopEligibility={filterFunction:({contextData:e})=>Object.keys(e.fileExts).every(e=>{const a=t.ExtensionCategories[e];return"VIDEO"===a||"AUDIO"===a||"IMAGE"===a||"pdf"===e}),campaignDisqualifiedReason:n.CampaignDisqualifiedReasonEnum.INELIGIBLE_FILE_TYPE};a.hasOpenedShareSettings={filterFunction:({contextData:e})=>{const a=(0,i.hasEventInHistory)(n.CampaignEvents.SHARE_MODAL_SETTINGS_OPENED,e);return a&&(0,i.removeEventFromHistory)(n.CampaignEvents.SHARE_MODAL_SETTINGS_OPENED,e),a},campaignDisqualifiedReason:n.CampaignDisqualifiedReasonEnum.HAS_OPENED_SHARE_SETTINGS};a.checkNonMobileEligibility={filterFunction:()=>!(0,s.is_mobile_or_tablet)(),campaignDisqualifiedReason:n.CampaignDisqualifiedReasonEnum.MOBILE_DEVICE}})),define("metaserver/static/js/campaigns/filters/previews_filters",["require","exports","metaserver/static/js/campaigns/types","metaserver/static/js/core/persistence/storage"],(function(e,a,t,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.googleOneTapActive=a.loggedOutPostDownloadKeyHasExpired=void 0;a.loggedOutPostDownloadKeyHasExpired={filterFunction:()=>{const e=new Date,a=e.getTime()+864e5,t=i.LocalStorage.get("previews_logged_out_download_modal");return(!t||e.getTime()>t)&&(i.LocalStorage.set("previews_logged_out_download_modal",a),!0)},campaignDisqualifiedReason:t.CampaignDisqualifiedReasonEnum.POST_DOWNLOAD_KEY_EXPIRED};a.googleOneTapActive={filterFunction:({contextData:e})=>"V1"!==(null==e?void 0:e.googleOneTapVariant),campaignDisqualifiedReason:t.CampaignDisqualifiedReasonEnum.UNKNOWN}})),define("metaserver/static/js/campaigns/filters/team_types_m2_filters",["require","exports","metaserver/static/js/campaigns/filters/constants","metaserver/static/js/campaigns/types","metaserver/static/js/onboarding/logging/events","metaserver/static/js/campaigns/utils/logging"],(function(e,a,t,i,n,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.qualifyTeamTypesM2ByVersionId=void 0;a.qualifyTeamTypesM2ByVersionId={filterFunction:({campaignProps:e})=>{const{campaign:a}=e,{campaign_id:i,version_id:r}=a;return(i===t.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_CAMPAIGN_ID||i===t.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_WITHOUT_BRANDING_CAMPAIGN_ID)&&((0,s.logCampaignQualifyEvent)(n.CampaignsToolkitEvents.CAMPAIGN_QUALIFY,e),r===t.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_V1||r===t.TEAM_TYPES_M2_ACTION_CHOICE_MODAL_WITHOUT_BRANDING_V1)},campaignDisqualifiedReason:i.CampaignDisqualifiedReasonEnum.CONTROL_VARIANT}})),define("metaserver/static/js/campaigns/filters/lve_tooltip_filters",["require","exports","metaserver/static/js/campaigns/filters/constants","metaserver/static/js/campaigns/types","metaserver/static/js/onboarding/logging/events","metaserver/static/js/onboarding/logging/logging","metaserver/static/js/campaigns/utils/logging"],(function(e,a,t,i,n,s,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.qualifyLVEFeatureActivationByVersionId=a.qualifyLVEFeatureActivationByVersionIdFunction=void 0;a.qualifyLVEFeatureActivationByVersionIdFunction=({campaignProps:e})=>{const{campaign_id:a,version_id:i}=e.campaign;let o="UNKNOWN";return a===t.LVE_TOOLTIP_CAMPAIGN_ID&&(i===t.LVE_TOOLTIP_ON?o="ON":i===t.LVE_TOOLTIP_CONTROL&&(o="CONTROL")),s.OALogger.logToProEvents(n.LVEFeatureActivationEvents.LVE_FEATURE_ACTIVATION_QUALIFY,{experiment:"core_act_lightweight_video_editing_feature_activation",campaignId:a,versionId:i,variantName:o}),(0,r.logCampaignQualifyEvent)(n.CampaignsToolkitEvents.CAMPAIGN_QUALIFY,e),"ON"===o},a.qualifyLVEFeatureActivationByVersionId={filterFunction:a.qualifyLVEFeatureActivationByVersionIdFunction,campaignDisqualifiedReason:i.CampaignDisqualifiedReasonEnum.CONTROL_VARIANT}})),define("metaserver/static/js/campaigns/filters/organize_experience_filter",["require","exports","metaserver/static/js/campaigns/types"],(function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.qualifyOEXFindDuplicatesTest=a.qualifyOEXFindDuplicates=a.qualifyOEXFindDuplicatesByFunction=void 0;a.qualifyOEXFindDuplicatesByFunction=({campaignProps:e,contextData:a})=>a.isFolderOrganizable,a.qualifyOEXFindDuplicates={filterFunction:a.qualifyOEXFindDuplicatesByFunction,campaignDisqualifiedReason:t.CampaignDisqualifiedReasonEnum.CONTROL_VARIANT},a.qualifyOEXFindDuplicatesTest={filterFunction:a.qualifyOEXFindDuplicatesByFunction,campaignDisqualifiedReason:t.CampaignDisqualifiedReasonEnum.CONTROL_VARIANT}})),define("metaserver/static/js/campaigns/history_utils",["require","exports","lodash","metaserver/static/js/campaigns/emitter"],(function(e,a,t,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.removeEventFromHistory=a.resetHistoryForEvent=a.hasEventInHistory=a.getHistoryForEvent=a.getEvents=a.getEventBuffers=a.filterOutEvent=a.filterForEvent=void 0;const n=(e={},a={})=>Object.entries(a).every(([a,i])=>(0,t.isEqual)(e[a],i));a.filterForEvent=(e,a)=>e.filter(({data:e})=>n(null==e?void 0:e.context,a));a.filterOutEvent=(e,a)=>e.filter(({data:e})=>!n(null==e?void 0:e.context,a));a.getEventBuffers=()=>i.campaignsEmitter.allEventBuffers;a.getEvents=(e=null)=>e?(0,a.getEventBuffers)()[e]||[]:(0,t.flatten)(Object.values((0,a.getEventBuffers)()));a.getHistoryForEvent=(e,t=null)=>{const i=(0,a.getEvents)(e);return t&&i.length?(0,a.filterForEvent)(i,t):i};a.hasEventInHistory=(e,t)=>!!(0,a.filterForEvent)((0,a.getEvents)(e),t).length;a.resetHistoryForEvent=e=>{i.campaignsEmitter.allEventBuffers[e]=[]};a.removeEventFromHistory=(e,t)=>{if((0,a.getEventBuffers)()[e])return t?void(i.campaignsEmitter.allEventBuffers[e]=(0,a.filterOutEvent)((0,a.getEventBuffers)()[e],t)):(0,a.resetHistoryForEvent)(e)}})),define("metaserver/static/js/campaigns/types",["require","exports"],(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CampaignEvents=a.CampaignsSdkEnum=a.CampaignDisqualifiedReasonEnum=a.ActionHandlers=a.PromptLoggingEvents=a.CampaignFormats=void 0,(function(e){e.BANNER="banner"})(a.CampaignFormats||(a.CampaignFormats={})),(function(e){e.CONFIRM="confirm",e.DISMISS="dismiss",e.SHOW="show",e.TOOLTIP_SHOW="tooltip_show",e.TOOLTIP_DISMISS="tooltip_dismiss"})(a.PromptLoggingEvents||(a.PromptLoggingEvents={})),(function(e){e.CLICK_ELEMENT_FROM_CSS_SELECTOR="click_element_from_css_selector",e.LAUNCH_URL_IN_NEW_TAB="launch_url_in_new_tab",e.OPEN_URL_IN_NEW_TAB="open_url_in_new_tab",e.OPEN_REGISTER_MODAL_POST_DOWNLOAD_WITH_REFRESH="open_register_modal_post_download_with_refresh",e.OPEN_LOGIN_MODAL_POST_DOWNLOAD_WITH_REFRESH="open_login_modal_post_download_with_refresh",e.OPEN_URL_IN_CURRENT_TAB="open_url_in_current_tab"})(a.ActionHandlers||(a.ActionHandlers={})),(function(e){e.UNKNOWN="unknown",e.SCREEN_SIZE="screen_size",e.CONTROL_VARIANT="control_variant",e.INELIGIBLE_FILE_TYPE="ineligible_file_type",e.POST_DOWNLOAD_KEY_EXPIRED="post_download_key_expired",e.HAS_OPENED_SHARE_SETTINGS="has_opened_share_settings",e.MOBILE_DEVICE="mobile_device",e.VARIANT_MISMATCH="variant_mismatch"})(a.CampaignDisqualifiedReasonEnum||(a.CampaignDisqualifiedReasonEnum={})),(function(e){e.UNKNOWN="unknown",e.TOOLKIT="toolkit"})(a.CampaignsSdkEnum||(a.CampaignsSdkEnum={})),(function(e){e.SHARE_MODAL_CLOSED="share_modal_closed",e.SHARE_MODAL_SETTINGS_OPENED="share_modal_settings_opened",e.FILE_UPLOAD_FAILURE="file_upload_failure",e.DOWNLOAD_BUTTON_CLICKED="download_button_clicked",e.FILE_SHARE_SUCCESS="file_share_success",e.PAGE_LOAD="any",e.FILE_UPLOAD_SUCCESS="file_upload_success",e.DELETE_SUCCESS="delete_success"})(a.CampaignEvents||(a.CampaignEvents={}))})),define("metaserver/static/js/campaigns/utils/logging",["require","exports","metaserver/static/js/campaigns/types","metaserver/static/js/campaigns/utils/prompt_logger","metaserver/static/js/onboarding/logging/events","metaserver/static/js/onboarding/logging/logging","metaserver/static/js/campaigns/utils/pap_logging"],(function(e,a,t,i,n,s,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.logCampaignTooltipDismissEvent=a.logCampaignTooltipShowEvent=a.logCampaignQualifyEvent=a.logCampaignClientDispatchedEvent=a.logDelaySchedulingEvent=a.logCampaignSequenceEvent=a.logCampaignImpressionEvent=a.logCampaignDismissEvent=a.logCampaignConfirmEvent=void 0;const o=(e,a,t)=>{const{campaign_id:i,version_id:n}=a.campaign;s.OALogger.logToProEvents(e,Object.assign(Object.assign({},t),{campaignId:i,versionId:n}))},_=(e,a,n,s)=>{o(e,a,s),(0,r.logToPAP)(e,a,s||{},t.CampaignsSdkEnum.TOOLKIT),(0,i.logToPrompt)(n,a)};a.logCampaignConfirmEvent=(e,a,i,n)=>{a&&_(e,a,t.PromptLoggingEvents.CONFIRM,Object.assign({ctaId:i},n))};a.logCampaignDismissEvent=(e,a,i)=>{a&&_(e,a,t.PromptLoggingEvents.DISMISS,i)};a.logCampaignImpressionEvent=(e,a,i)=>{a&&_(e,a,t.PromptLoggingEvents.SHOW,i)};a.logCampaignSequenceEvent=(e,a,i,n)=>{const s={currentSequenceStep:i,ctaId:n};o(e,a,s),(0,r.logToPAP)(e,a,s,t.CampaignsSdkEnum.TOOLKIT)};a.logDelaySchedulingEvent=(e,a)=>{const i={delayInSeconds:a};o(n.CampaignsToolkitEvents.CAMPAIGN_DELAY,e,i),(0,r.logToPAP)(n.CampaignsToolkitEvents.CAMPAIGN_DELAY,e,i,t.CampaignsSdkEnum.TOOLKIT)};a.logCampaignClientDispatchedEvent=(e,a,i)=>{o(e,a,i),(0,r.logToPAP)(e,a,i||{},t.CampaignsSdkEnum.TOOLKIT)};a.logCampaignQualifyEvent=(e,a,i)=>{var n,s;const _=i?{campaignDisqualifiedReason:i}:{};o(e,a,Object.assign(Object.assign({},_),{slotId:null===(n=a.slotId)||void 0===n?void 0:n[".tag"],campaignFormatId:null===(s=a.campaign.content)||void 0===s?void 0:s[".tag"]})),(0,r.logToPAP)(e,a,_,t.CampaignsSdkEnum.TOOLKIT)};a.logCampaignTooltipShowEvent=(e,a,i)=>{a&&_(e,a,t.PromptLoggingEvents.TOOLTIP_SHOW,i)};a.logCampaignTooltipDismissEvent=(e,a,i)=>{a&&_(e,a,t.PromptLoggingEvents.TOOLTIP_DISMISS,i)}})),define("metaserver/static/js/campaigns/utils/pap_logging",["require","exports","metaserver/static/js/onboarding/logging/events","metaserver/static/js/pap/analytics_client","js/pap-events/campaigns_client/shown_campaign_format","js/pap-events/campaigns_client/dispatch_campaign_format","js/pap-events/campaigns_client/confirm_campaign_format","js/pap-events/campaigns_client/dismiss_campaign_format","js/pap-events/campaigns_client/shown_campaign_format_tooltip","js/pap-events/campaigns_client/dismiss_campaign_format_tooltip","js/pap-events/campaigns_client/qualify_campaign","js/pap-events/campaigns_client/disqualify_campaign","js/pap-events/campaigns_client/complete_campaign_sequence","js/pap-events/campaigns_client/cancel_campaign_sequence","js/pap-events/campaigns_client/continue_campaign_sequence","js/pap-events/enums/campaign_dismissed_method-utils","js/pap-events/enums/campaign_disqualified_reason-utils"],(function(e,a,t,i,n,s,r,o,_,c,m,l,p,g,u,d,f){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.setPageName=a.logToPAP=a.getLoggerSingleton=a.CampaignsPAPLogger=void 0;class E{constructor(){this.setPageName=e=>{this.pageName=e},this.logToPAP=(e,a,E,v)=>{var O,I,C,A,P;const D={campaignId:null===(O=null==a?void 0:a.campaign)||void 0===O?void 0:O.campaign_id,campaignVersionId:null===(I=null==a?void 0:a.campaign)||void 0===I?void 0:I.version_id,campaignFormatId:null===(A=null===(C=null==a?void 0:a.campaign)||void 0===C?void 0:C.content)||void 0===A?void 0:A[".tag"],campaignStepId:null==a?void 0:a.currentSequenceStep,campaignSlotId:null===(P=null==a?void 0:a.slotId)||void 0===P?void 0:P[".tag"],actionSurface:this.pageName,campaignsSdk:v};switch(e){case t.CampaignsToolkitEvents.CAMPAIGN_QUALIFY:delete D.campaignStepId,(0,i.logEvent)((0,m.PAP_Qualify_Campaign)(Object.assign({},D)));break;case t.CampaignsToolkitEvents.CAMPAIGN_DISQUALIFY:const{campaignDisqualifiedReason:e}=E;delete D.campaignStepId,(0,i.logEvent)((0,l.PAP_Disqualify_Campaign)(Object.assign(Object.assign({},D),{campaignDisqualifiedReason:(0,f.getCampaignDisqualifiedReasonFromString)(e)})));break;case t.CampaignsToolkitEvents.CAMPAIGN_CLIENT_DISPATCHED:(0,i.logEvent)((0,s.PAP_Dispatch_CampaignFormat)(Object.assign({},D)));break;case t.CampaignsToolkitEvents.CAMPAIGN_CONFIRM:{const{ctaId:e}=E;(0,i.logEvent)((0,r.PAP_Confirm_CampaignFormat)(Object.assign(Object.assign({},D),{campaignCtaId:e})));break}case t.CampaignsToolkitEvents.CAMPAIGN_DISMISS:{const{dismiss_method:e,ctaId:a}=E;(0,i.logEvent)((0,o.PAP_Dismiss_CampaignFormat)(Object.assign(Object.assign({},D),{campaignCtaId:a,campaignDismissedMethod:e?(0,d.getCampaignDismissedMethodFromString)(e):"user_clicked_dismiss"})));break}case t.CampaignsToolkitEvents.CAMPAIGN_IMPRESSION:(0,i.logEvent)((0,n.PAP_Shown_CampaignFormat)(Object.assign({},D)));break;case t.CampaignsToolkitEvents.CAMPAIGN_TOOLTIP_SHOW:(0,i.logEvent)((0,_.PAP_Shown_CampaignFormatTooltip)(Object.assign({},D)));break;case t.CampaignsToolkitEvents.CAMPAIGN_TOOLTIP_DISMISS:(0,i.logEvent)((0,c.PAP_Dismiss_CampaignFormatTooltip)(Object.assign({},D)));break;case t.CampaignsToolkitSequenceEvents.SEQUENCE_COMPLETED:(0,i.logEvent)((0,p.PAP_Complete_CampaignSequence)(Object.assign({},D)));break;case t.CampaignsToolkitSequenceEvents.MISSING_OR_INVALID_PARAMETERS:(0,i.logEvent)((0,g.PAP_Cancel_CampaignSequence)(Object.assign({},D)));break;case t.CampaignsToolkitSequenceEvents.PROGRESS_SEQUENCE:const{ctaId:a}=E;(0,i.logEvent)((0,u.PAP_Continue_CampaignSequence)(Object.assign(Object.assign({},D),{campaignCtaId:a})))}}}}let v;a.CampaignsPAPLogger=E;a.getLoggerSingleton=()=>(v||(v=new E),v);a.logToPAP=(e,t,i,n)=>{(0,a.getLoggerSingleton)().logToPAP(e,t,i,n)};a.setPageName=e=>{(0,a.getLoggerSingleton)().setPageName(e)}})),define("metaserver/static/js/campaigns/utils/prompt_logger",["require","exports","tslib","metaserver/static/js/campaigns/types","metaserver/static/js/deprecated_ajax/ajax","metaserver/static/js/core/uri"],(function(e,a,t,i,n,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.logToPrompt=void 0,n=t.__importStar(n);a.logToPrompt=(e,a)=>{const t=(e=>{switch(e){case i.PromptLoggingEvents.SHOW:return"/prompt/log_impression";case i.PromptLoggingEvents.CONFIRM:return"/prompt/confirm";case i.PromptLoggingEvents.DISMISS:return"/prompt/dismiss";default:return""}})(e);if(!t)return;const r=((e,a)=>{const{campaign:t}=a,i={campaign_id:t.campaign_id.toString()};if(t.version_id&&(i.version_id=t.version_id.toString()),"number"==typeof t.prompt_queried_at_ms&&(i.prompt_queried_at_ms=t.prompt_queried_at_ms.toString()),window&&window.performance&&window.performance.now){const e=Math.round(window.performance.now());i.delta_from_request_start_ms=e.toString()}return t.matched_user_id&&(i._subject_uid=String(t.matched_user_id)),a.requestId&&(i.prompt_parent_request_id=a.requestId),new s.URI({path:e,query:i})})(t,a);n.SilentBackgroundRequest({url:r.toString()})}})),define("metaserver/static/js/campaigns/filters/onboarding_survey_modal_filters",["require","exports","metaserver/static/js/campaigns/types","metaserver/static/js/campaigns/filters/constants"],(function(e,a,t,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.qualifyOnboardingSurveyModalCampaignByVersionId=void 0;a.qualifyOnboardingSurveyModalCampaignByVersionId={filterFunction:({campaignProps:e,contextData:a})=>{const{campaign_id:t,version_id:n}=e.campaign;return t===i.ONBOARDING_MODAL_IN_BROWSE_CAMPAIGN_ID&&n===i.ONBOARDING_MODAL_IN_BROWSE_VERSION_ID},campaignDisqualifiedReason:t.CampaignDisqualifiedReasonEnum.VARIANT_MISMATCH}}));
//# sourceMappingURL=pkg-campaigns_toolkit.min.js-vfl-Pnr_1.map