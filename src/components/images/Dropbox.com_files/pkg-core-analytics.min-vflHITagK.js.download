define("typescript/dropbox/proto/hql_events/ux_analytics/ux_analytics_events_pb",["require","exports","@bufbuild/protobuf","../extensions_pb"],(function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UXAnalyticsScrollPage=t.UXAnalyticsDismissModal=t.UXAnalyticsShownModal=t.UXAnalyticsHeartbeatPage=t.UXAnalyticsDismissPage=t.UXAnalyticsSelectElement=t.UXAnalyticsSelectLinkNoSessionStorage=t.UXAnalyticsSelectLink=t.UXAnalyticsShownPage=t.ElementPositionFields=t.TimeAndLocationFields=t.UXACommonFields=void 0;class i extends n.Message{constructor(e){super(),this.urlPii="",this.orgReferrerPii="",this.httpReferrerPii="",this.previousUrlPii="",this.requestId="",this.visitId="",this.requestSeq=n.protoInt64.zero,this.uxaV=0,this.instanceEventCount=n.protoInt64.zero,this.instanceInitTs=n.protoInt64.zero,this.spaSource="",this.hashFragmentPii="",this.variants="",this.adobeTargetVariants="",this.warpVariants="",this.cmsPageUuid="",this.paramAd="",this.paramCamp="",this.paramFbclid="",this.paramGclid="",this.paramKw="",this.paramMsclkid="",this.paramNet="",this.paramOqa="",this.paramTk="",this.paramTrigger="",this.paramUtmCampaign="",this.paramUtmContent="",this.paramUtmMedium="",this.paramUtmSource="",this.paramUtmTerm="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(i,e,t)}}t.UXACommonFields=i,i.runtime=n.proto3,i.typeName="hql_events.UXACommonFields",i.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"url_pii",kind:"scalar",T:9},{no:2,name:"org_referrer_pii",kind:"scalar",T:9},{no:3,name:"http_referrer_pii",kind:"scalar",T:9},{no:4,name:"previous_url_pii",kind:"scalar",T:9},{no:5,name:"request_id",kind:"scalar",T:9},{no:6,name:"visit_id",kind:"scalar",T:9},{no:7,name:"request_seq",kind:"scalar",T:3},{no:8,name:"uxa_v",kind:"scalar",T:2},{no:30,name:"instance_event_count",kind:"scalar",T:3},{no:31,name:"instance_init_ts",kind:"scalar",T:3},{no:9,name:"spa_source",kind:"scalar",T:9},{no:10,name:"hash_fragment_pii",kind:"scalar",T:9},{no:11,name:"variants",kind:"scalar",T:9},{no:12,name:"adobe_target_variants",kind:"scalar",T:9},{no:13,name:"warp_variants",kind:"scalar",T:9},{no:14,name:"cms_page_uuid",kind:"scalar",T:9},{no:15,name:"param_ad",kind:"scalar",T:9},{no:16,name:"param_camp",kind:"scalar",T:9},{no:17,name:"param_fbclid",kind:"scalar",T:9},{no:18,name:"param_gclid",kind:"scalar",T:9},{no:19,name:"param_kw",kind:"scalar",T:9},{no:20,name:"param_msclkid",kind:"scalar",T:9},{no:21,name:"param_net",kind:"scalar",T:9},{no:22,name:"param_oqa",kind:"scalar",T:9},{no:23,name:"param_tk",kind:"scalar",T:9},{no:24,name:"param_trigger",kind:"scalar",T:9},{no:25,name:"param_utm_campaign",kind:"scalar",T:9},{no:26,name:"param_utm_content",kind:"scalar",T:9},{no:27,name:"param_utm_medium",kind:"scalar",T:9},{no:28,name:"param_utm_source",kind:"scalar",T:9},{no:29,name:"param_utm_term",kind:"scalar",T:9}]);class o extends n.Message{constructor(e){super(),this.timeOnPage=n.protoInt64.zero,this.verticalOffset=n.protoInt64.zero,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new o).fromBinary(e,t)}static fromJson(e,t){return(new o).fromJson(e,t)}static fromJsonString(e,t){return(new o).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(o,e,t)}}t.TimeAndLocationFields=o,o.runtime=n.proto3,o.typeName="hql_events.TimeAndLocationFields",o.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"time_on_page",kind:"scalar",T:3},{no:2,name:"vertical_offset",kind:"scalar",T:3}]);class s extends n.Message{constructor(e){super(),this.left=n.protoInt64.zero,this.top=n.protoInt64.zero,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(s,e,t)}}t.ElementPositionFields=s,s.runtime=n.proto3,s.typeName="hql_events.ElementPositionFields",s.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"left",kind:"scalar",T:3},{no:2,name:"top",kind:"scalar",T:3}]);class r extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new r).fromBinary(e,t)}static fromJson(e,t){return(new r).fromJson(e,t)}static fromJsonString(e,t){return(new r).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(r,e,t)}}t.UXAnalyticsShownPage=r,r.runtime=n.proto3,r.typeName="hql_events.UXAnalyticsShownPage",r.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:a.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:i}]);class l extends n.Message{constructor(e){super(),this.linkId="",this.linkRank=n.protoInt64.zero,this.tagName="",this.originHrefPii="",this.destinationUrlPii="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new l).fromBinary(e,t)}static fromJson(e,t){return(new l).fromJson(e,t)}static fromJsonString(e,t){return(new l).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(l,e,t)}}t.UXAnalyticsSelectLink=l,l.runtime=n.proto3,l.typeName="hql_events.UXAnalyticsSelectLink",l.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:a.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:i},{no:3,name:"time_and_location_fields",kind:"message",T:o},{no:4,name:"element_position_fields",kind:"message",T:s},{no:5,name:"link_id",kind:"scalar",T:9},{no:6,name:"link_rank",kind:"scalar",T:3},{no:7,name:"tag_name",kind:"scalar",T:9},{no:8,name:"origin_href_pii",kind:"scalar",T:9},{no:9,name:"destination_url_pii",kind:"scalar",T:9}]);class _ extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new _).fromBinary(e,t)}static fromJson(e,t){return(new _).fromJson(e,t)}static fromJsonString(e,t){return(new _).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(_,e,t)}}t.UXAnalyticsSelectLinkNoSessionStorage=_,_.runtime=n.proto3,_.typeName="hql_events.UXAnalyticsSelectLinkNoSessionStorage",_.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:a.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:i},{no:3,name:"time_and_location_fields",kind:"message",T:o}]);class c extends n.Message{constructor(e){super(),this.elementId="",this.elementRank=n.protoInt64.zero,this.tagName="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new c).fromBinary(e,t)}static fromJson(e,t){return(new c).fromJson(e,t)}static fromJsonString(e,t){return(new c).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(c,e,t)}}t.UXAnalyticsSelectElement=c,c.runtime=n.proto3,c.typeName="hql_events.UXAnalyticsSelectElement",c.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:a.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:i},{no:3,name:"time_and_location_fields",kind:"message",T:o},{no:4,name:"element_position_fields",kind:"message",T:s},{no:5,name:"element_id",kind:"scalar",T:9},{no:6,name:"element_rank",kind:"scalar",T:3},{no:7,name:"tag_name",kind:"scalar",T:9}]);class E extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new E).fromBinary(e,t)}static fromJson(e,t){return(new E).fromJson(e,t)}static fromJsonString(e,t){return(new E).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(E,e,t)}}t.UXAnalyticsDismissPage=E,E.runtime=n.proto3,E.typeName="hql_events.UXAnalyticsDismissPage",E.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:a.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:i},{no:3,name:"time_and_location_fields",kind:"message",T:o}]);class m extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new m).fromBinary(e,t)}static fromJson(e,t){return(new m).fromJson(e,t)}static fromJsonString(e,t){return(new m).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(m,e,t)}}t.UXAnalyticsHeartbeatPage=m,m.runtime=n.proto3,m.typeName="hql_events.UXAnalyticsHeartbeatPage",m.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:a.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:i},{no:3,name:"time_and_location_fields",kind:"message",T:o}]);class u extends n.Message{constructor(e){super(),this.modal="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new u).fromBinary(e,t)}static fromJson(e,t){return(new u).fromJson(e,t)}static fromJsonString(e,t){return(new u).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(u,e,t)}}t.UXAnalyticsShownModal=u,u.runtime=n.proto3,u.typeName="hql_events.UXAnalyticsShownModal",u.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:a.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:i},{no:3,name:"time_and_location_fields",kind:"message",T:o},{no:4,name:"modal",kind:"scalar",T:9}]);class d extends n.Message{constructor(e){super(),this.modal="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new d).fromBinary(e,t)}static fromJson(e,t){return(new d).fromJson(e,t)}static fromJsonString(e,t){return(new d).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(d,e,t)}}t.UXAnalyticsDismissModal=d,d.runtime=n.proto3,d.typeName="hql_events.UXAnalyticsDismissModal",d.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:a.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:i},{no:3,name:"time_and_location_fields",kind:"message",T:o},{no:4,name:"modal",kind:"scalar",T:9}]);class g extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new g).fromBinary(e,t)}static fromJson(e,t){return(new g).fromJson(e,t)}static fromJsonString(e,t){return(new g).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(g,e,t)}}t.UXAnalyticsScrollPage=g,g.runtime=n.proto3,g.typeName="hql_events.UXAnalyticsScrollPage",g.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:a.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:i},{no:3,name:"time_and_location_fields",kind:"message",T:o}])})),define("typescript/dropbox/proto/hql_events/extensions_pb",["require","exports","@bufbuild/protobuf","./taxonomy_pb"],(function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HQLMetadata=t.HQLEventIdentity_LegacyEvent=t.HQLEventIdentity_EventClass=t.HQLEventIdentity_ActionEventIdentity=t.HQLEventIdentity=void 0;class i extends n.Message{constructor(e){super(),this.identity={case:void 0},n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(i,e,t)}}t.HQLEventIdentity=i,i.runtime=n.proto3,i.typeName="hql_events.HQLEventIdentity",i.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"action_event_id",kind:"message",T:o,oneof:"identity"},{no:2,name:"event_name",kind:"scalar",T:9,oneof:"identity"},{no:3,name:"event_class",kind:"message",T:s},{no:4,name:"legacy_event",kind:"message",T:r}]);class o extends n.Message{constructor(e){super(),this.object="",this.action=a.TaxonomyAction_Action.UNSPECIFIED,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new o).fromBinary(e,t)}static fromJson(e,t){return(new o).fromJson(e,t)}static fromJsonString(e,t){return(new o).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(o,e,t)}}t.HQLEventIdentity_ActionEventIdentity=o,o.runtime=n.proto3,o.typeName="hql_events.HQLEventIdentity.ActionEventIdentity",o.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"object",kind:"scalar",T:9},{no:2,name:"action",kind:"enum",T:n.proto3.getEnumType(a.TaxonomyAction_Action)}]);class s extends n.Message{constructor(e){super(),this.className=a.TaxonomyClass_ClassName.UNSPECIFIED,this.subclassName=a.TaxonomySubclass_SubclassName.UNSPECIFIED,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(s,e,t)}}t.HQLEventIdentity_EventClass=s,s.runtime=n.proto3,s.typeName="hql_events.HQLEventIdentity.EventClass",s.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"class_name",kind:"enum",T:n.proto3.getEnumType(a.TaxonomyClass_ClassName)},{no:2,name:"subclass_name",kind:"enum",T:n.proto3.getEnumType(a.TaxonomySubclass_SubclassName)}]);class r extends n.Message{constructor(e){super(),this.table="",this.name="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new r).fromBinary(e,t)}static fromJson(e,t){return(new r).fromJson(e,t)}static fromJsonString(e,t){return(new r).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(r,e,t)}}t.HQLEventIdentity_LegacyEvent=r,r.runtime=n.proto3,r.typeName="hql_events.HQLEventIdentity.LegacyEvent",r.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"table",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]);class l extends n.Message{constructor(e){super(),this.appSurface=a.TaxonomyAppSurface_AppSurface.UNSPECIFIED,this.actionSurface=a.TaxonomyActionSurface_ActionSurface.UNSPECIFIED,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new l).fromBinary(e,t)}static fromJson(e,t){return(new l).fromJson(e,t)}static fromJsonString(e,t){return(new l).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(l,e,t)}}t.HQLMetadata=l,l.runtime=n.proto3,l.typeName="hql_events.HQLMetadata",l.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"app_surface",kind:"enum",T:n.proto3.getEnumType(a.TaxonomyAppSurface_AppSurface)},{no:2,name:"action_surface",kind:"enum",T:n.proto3.getEnumType(a.TaxonomyActionSurface_ActionSurface)},{no:3,name:"identity_override",kind:"message",T:i}])})),define("typescript/dropbox/proto/hql_events/taxonomy_pb",["require","exports","@bufbuild/protobuf"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaxonomyActionSurface_ActionSurface=t.TaxonomyActionSurface=t.TaxonomyAppSurface_AppSurface=t.TaxonomyAppSurface=t.TaxonomySubclass_SubclassName=t.TaxonomySubclass=t.TaxonomyClass_ClassName=t.TaxonomyClass=t.TaxonomyAction_Action=t.TaxonomyAction=void 0;class a extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new a).fromBinary(e,t)}static fromJson(e,t){return(new a).fromJson(e,t)}static fromJsonString(e,t){return(new a).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(a,e,t)}}var i,o,s,r,l;t.TaxonomyAction=a,a.runtime=n.proto3,a.typeName="hql_events.TaxonomyAction",a.fields=n.proto3.util.newFieldList(()=>[]),(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.START=1]="START",e[e.FOREGROUND=2]="FOREGROUND",e[e.SHOWN=3]="SHOWN",e[e.HOVER=4]="HOVER",e[e.SCROLL=5]="SCROLL",e[e.SEARCH=6]="SEARCH",e[e.SELECT=7]="SELECT",e[e.PIN=8]="PIN",e[e.UNPIN=9]="UNPIN",e[e.MOVE=10]="MOVE",e[e.RENAME=11]="RENAME",e[e.COPY=12]="COPY",e[e.DELETE=13]="DELETE",e[e.OPEN=14]="OPEN",e[e.CREATE=15]="CREATE",e[e.VERSION_HISTORY=16]="VERSION_HISTORY",e[e.DOWNLOAD=17]="DOWNLOAD",e[e.TRANSFER=18]="TRANSFER",e[e.COMMENT=19]="COMMENT",e[e.STAR=20]="STAR",e[e.UNSTAR=21]="UNSTAR",e[e.UPLOAD=22]="UPLOAD",e[e.REQUEST=23]="REQUEST",e[e.REWIND_HISTORY=24]="REWIND_HISTORY",e[e.SHARE=25]="SHARE",e[e.EDIT=26]="EDIT",e[e.PREVIEW=27]="PREVIEW",e[e.INITIATE=28]="INITIATE",e[e.FAIL=29]="FAIL",e[e.SUCCEED=30]="SUCCEED",e[e.ATTEMPT=31]="ATTEMPT",e[e.PREVIEW_RENDER_SUCCEEDED=32]="PREVIEW_RENDER_SUCCEEDED",e[e.DISMISS=33]="DISMISS",e[e.HEARTBEAT=34]="HEARTBEAT",e[e.CONTINUE=35]="CONTINUE"})(i=t.TaxonomyAction_Action||(t.TaxonomyAction_Action={})),n.proto3.util.setEnumType(i,"hql_events.TaxonomyAction.Action",[{no:0,name:"UNSPECIFIED"},{no:1,name:"START"},{no:2,name:"FOREGROUND"},{no:3,name:"SHOWN"},{no:4,name:"HOVER"},{no:5,name:"SCROLL"},{no:6,name:"SEARCH"},{no:7,name:"SELECT"},{no:8,name:"PIN"},{no:9,name:"UNPIN"},{no:10,name:"MOVE"},{no:11,name:"RENAME"},{no:12,name:"COPY"},{no:13,name:"DELETE"},{no:14,name:"OPEN"},{no:15,name:"CREATE"},{no:16,name:"VERSION_HISTORY"},{no:17,name:"DOWNLOAD"},{no:18,name:"TRANSFER"},{no:19,name:"COMMENT"},{no:20,name:"STAR"},{no:21,name:"UNSTAR"},{no:22,name:"UPLOAD"},{no:23,name:"REQUEST"},{no:24,name:"REWIND_HISTORY"},{no:25,name:"SHARE"},{no:26,name:"EDIT"},{no:27,name:"PREVIEW"},{no:28,name:"INITIATE"},{no:29,name:"FAIL"},{no:30,name:"SUCCEED"},{no:31,name:"ATTEMPT"},{no:32,name:"PREVIEW_RENDER_SUCCEEDED"},{no:33,name:"DISMISS"},{no:34,name:"HEARTBEAT"},{no:35,name:"CONTINUE"}]);class _ extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new _).fromBinary(e,t)}static fromJson(e,t){return(new _).fromJson(e,t)}static fromJsonString(e,t){return(new _).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(_,e,t)}}t.TaxonomyClass=_,_.runtime=n.proto3,_.typeName="hql_events.TaxonomyClass",_.fields=n.proto3.util.newFieldList(()=>[]),(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SEE_AND_CLICK=1]="SEE_AND_CLICK",e[e.FILE_ACTIONS=2]="FILE_ACTIONS",e[e.FEATURE=3]="FEATURE"})(o=t.TaxonomyClass_ClassName||(t.TaxonomyClass_ClassName={})),n.proto3.util.setEnumType(o,"hql_events.TaxonomyClass.ClassName",[{no:0,name:"UNSPECIFIED"},{no:1,name:"SEE_AND_CLICK"},{no:2,name:"FILE_ACTIONS"},{no:3,name:"FEATURE"}]);class c extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new c).fromBinary(e,t)}static fromJson(e,t){return(new c).fromJson(e,t)}static fromJsonString(e,t){return(new c).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(c,e,t)}}t.TaxonomySubclass=c,c.runtime=n.proto3,c.typeName="hql_events.TaxonomySubclass",c.fields=n.proto3.util.newFieldList(()=>[]),(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SHARE=1]="SHARE"})(s=t.TaxonomySubclass_SubclassName||(t.TaxonomySubclass_SubclassName={})),n.proto3.util.setEnumType(s,"hql_events.TaxonomySubclass.SubclassName",[{no:0,name:"UNSPECIFIED"},{no:1,name:"SHARE"}]);class E extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new E).fromBinary(e,t)}static fromJson(e,t){return(new E).fromJson(e,t)}static fromJsonString(e,t){return(new E).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(E,e,t)}}t.TaxonomyAppSurface=E,E.runtime=n.proto3,E.typeName="hql_events.TaxonomyAppSurface",E.fields=n.proto3.util.newFieldList(()=>[]),(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.DESKTOP_COLLAB_BROWSE=1]="DESKTOP_COLLAB_BROWSE",e[e.DESKTOP_TRAY=2]="DESKTOP_TRAY",e[e.WEB=3]="WEB",e[e.NATIVE=4]="NATIVE",e[e.HARMONY=5]="HARMONY"})(r=t.TaxonomyAppSurface_AppSurface||(t.TaxonomyAppSurface_AppSurface={})),n.proto3.util.setEnumType(r,"hql_events.TaxonomyAppSurface.AppSurface",[{no:0,name:"UNSPECIFIED"},{no:1,name:"DESKTOP_COLLAB_BROWSE"},{no:2,name:"DESKTOP_TRAY"},{no:3,name:"WEB"},{no:4,name:"NATIVE"},{no:5,name:"HARMONY"}]);class m extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new m).fromBinary(e,t)}static fromJson(e,t){return(new m).fromJson(e,t)}static fromJsonString(e,t){return(new m).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(m,e,t)}}t.TaxonomyActionSurface=m,m.runtime=n.proto3,m.typeName="hql_events.TaxonomyActionSurface",m.fields=n.proto3.util.newFieldList(()=>[]),(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SIGN_IN_PAGE=1]="SIGN_IN_PAGE",e[e.SIGN_IN_DBX_PAGE=2]="SIGN_IN_DBX_PAGE",e[e.SIGN_IN_GOOGLE_MODAL=3]="SIGN_IN_GOOGLE_MODAL",e[e.INTERSTITIAL_GOOGLE_ACCOUNTS_PAGE=4]="INTERSTITIAL_GOOGLE_ACCOUNTS_PAGE",e[e.SIGNUP_PAGE=5]="SIGNUP_PAGE",e[e.START_MENU=6]="START_MENU",e[e.START_DOCK=7]="START_DOCK",e[e.TRAY_ICON=8]="TRAY_ICON",e[e.NOTIFICATIONS_TAB=9]="NOTIFICATIONS_TAB",e[e.RECENT_TAB=10]="RECENT_TAB",e[e.FOR_YOU_TAB=11]="FOR_YOU_TAB",e[e.RECENT_YOU_SUB_TAB=12]="RECENT_YOU_SUB_TAB",e[e.RECENT_TEAM_SUB_TAB=13]="RECENT_TEAM_SUB_TAB",e[e.CALENDAR_EVENT_MENU=14]="CALENDAR_EVENT_MENU",e[e.SHARING_MODAL=15]="SHARING_MODAL",e[e.TOP_BAR=16]="TOP_BAR",e[e.FOR_YOU_TABS=17]="FOR_YOU_TABS",e[e.SEARCH_RESULTS=18]="SEARCH_RESULTS",e[e.TOP_BAR_CREATE_MENU=19]="TOP_BAR_CREATE_MENU",e[e.TRAY_MENU=20]="TRAY_MENU",e[e.CENTER_PANE=21]="CENTER_PANE",e[e.PLUS_CANCEL_SURVEY_MODAL=22]="PLUS_CANCEL_SURVEY_MODAL",e[e.PROFILE_MENU=23]="PROFILE_MENU",e[e.BROWSER_WINDOW=24]="BROWSER_WINDOW",e[e.RIGHT_PANE=25]="RIGHT_PANE",e[e.CENTER_PANE_PLAN_TAB=26]="CENTER_PANE_PLAN_TAB",e[e.CENTER_PANE_GENERAL_TAB=27]="CENTER_PANE_GENERAL_TAB",e[e.CENTER_PANE_BILLING_TAB=28]="CENTER_PANE_BILLING_TAB",e[e.CENTER_PANE_PERSON=29]="CENTER_PANE_PERSON",e[e.CENTER_PANE_STARRED=30]="CENTER_PANE_STARRED",e[e.CENTER_PANE_CREATE_CONTEXT_MENU=31]="CENTER_PANE_CREATE_CONTEXT_MENU",e[e.CENTER_PANE_VIEW_CONTEXT_MENU=32]="CENTER_PANE_VIEW_CONTEXT_MENU",e[e.LEFT_PANE=33]="LEFT_PANE",e[e.RIGHT_PANE_SHARE_CONTEXT_MENU=34]="RIGHT_PANE_SHARE_CONTEXT_MENU",e[e.APP_ICON=35]="APP_ICON",e[e.RIGHT_PANE_PERSON=36]="RIGHT_PANE_PERSON",e[e.RIGHT_PANE_CONTEXT_MENU=37]="RIGHT_PANE_CONTEXT_MENU",e[e.RIGHT_PANE_OPEN_CONTEXT_MENU=38]="RIGHT_PANE_OPEN_CONTEXT_MENU",e[e.APPLICATION_MENU=39]="APPLICATION_MENU",e[e.CAROUSEL_ONBOARDING_WINDOW=40]="CAROUSEL_ONBOARDING_WINDOW",e[e.CONNECT_APP_WINDOW=41]="CONNECT_APP_WINDOW",e[e.ONBOARDING_TOOLTIP=42]="ONBOARDING_TOOLTIP",e[e.RIGHT_PANE_PIN_CONTEXT_MENU=43]="RIGHT_PANE_PIN_CONTEXT_MENU",e[e.SPACE_EXAMPLE_MODAL=44]="SPACE_EXAMPLE_MODAL",e[e.TEAM_CANCEL_SURVEY_MODAL=45]="TEAM_CANCEL_SURVEY_MODAL",e[e.MOVE_MODAL=46]="MOVE_MODAL",e[e.ACCOUNT_CONTEXT_MENU=47]="ACCOUNT_CONTEXT_MENU",e[e.BOTTOM_BAR=48]="BOTTOM_BAR",e[e.SYNC_QUEUE=49]="SYNC_QUEUE",e[e.PLAN_CHANGE_MODAL=50]="PLAN_CHANGE_MODAL",e[e.MAGIC_PAIRING_WINDOW=51]="MAGIC_PAIRING_WINDOW",e[e.CONTEXT_MENU=52]="CONTEXT_MENU",e[e.SNACKBAR=53]="SNACKBAR",e[e.FILE_SYSTEM_WARNING=54]="FILE_SYSTEM_WARNING",e[e.SCREENSHOT=55]="SCREENSHOT",e[e.SCREEN_RECORDING=56]="SCREEN_RECORDING",e[e.REEL_HOME_PAGE=57]="REEL_HOME_PAGE",e[e.REEL_VIDEO_PAGE=58]="REEL_VIDEO_PAGE",e[e.COMMERCE_HOME_PAGE=59]="COMMERCE_HOME_PAGE",e[e.COMMERCE_CREATE_LISTING_PAGE=60]="COMMERCE_CREATE_LISTING_PAGE",e[e.COMMERCE_SELLER_LISTING_PAGE=61]="COMMERCE_SELLER_LISTING_PAGE",e[e.COMMERCE_BUYER_PAGE=62]="COMMERCE_BUYER_PAGE",e[e.COMMERCE_STRIPE_ONBOARDING_PAGE=63]="COMMERCE_STRIPE_ONBOARDING_PAGE",e[e.ESSENTIAL_SETUP_PAGE=64]="ESSENTIAL_SETUP_PAGE"})(l=t.TaxonomyActionSurface_ActionSurface||(t.TaxonomyActionSurface_ActionSurface={})),n.proto3.util.setEnumType(l,"hql_events.TaxonomyActionSurface.ActionSurface",[{no:0,name:"UNSPECIFIED"},{no:1,name:"SIGN_IN_PAGE"},{no:2,name:"SIGN_IN_DBX_PAGE"},{no:3,name:"SIGN_IN_GOOGLE_MODAL"},{no:4,name:"INTERSTITIAL_GOOGLE_ACCOUNTS_PAGE"},{no:5,name:"SIGNUP_PAGE"},{no:6,name:"START_MENU"},{no:7,name:"START_DOCK"},{no:8,name:"TRAY_ICON"},{no:9,name:"NOTIFICATIONS_TAB"},{no:10,name:"RECENT_TAB"},{no:11,name:"FOR_YOU_TAB"},{no:12,name:"RECENT_YOU_SUB_TAB"},{no:13,name:"RECENT_TEAM_SUB_TAB"},{no:14,name:"CALENDAR_EVENT_MENU"},{no:15,name:"SHARING_MODAL"},{no:16,name:"TOP_BAR"},{no:17,name:"FOR_YOU_TABS"},{no:18,name:"SEARCH_RESULTS"},{no:19,name:"TOP_BAR_CREATE_MENU"},{no:20,name:"TRAY_MENU"},{no:21,name:"CENTER_PANE"},{no:22,name:"PLUS_CANCEL_SURVEY_MODAL"},{no:23,name:"PROFILE_MENU"},{no:24,name:"BROWSER_WINDOW"},{no:25,name:"RIGHT_PANE"},{no:26,name:"CENTER_PANE_PLAN_TAB"},{no:27,name:"CENTER_PANE_GENERAL_TAB"},{no:28,name:"CENTER_PANE_BILLING_TAB"},{no:29,name:"CENTER_PANE_PERSON"},{no:30,name:"CENTER_PANE_STARRED"},{no:31,name:"CENTER_PANE_CREATE_CONTEXT_MENU"},{no:32,name:"CENTER_PANE_VIEW_CONTEXT_MENU"},{no:33,name:"LEFT_PANE"},{no:34,name:"RIGHT_PANE_SHARE_CONTEXT_MENU"},{no:35,name:"APP_ICON"},{no:36,name:"RIGHT_PANE_PERSON"},{no:37,name:"RIGHT_PANE_CONTEXT_MENU"},{no:38,name:"RIGHT_PANE_OPEN_CONTEXT_MENU"},{no:39,name:"APPLICATION_MENU"},{no:40,name:"CAROUSEL_ONBOARDING_WINDOW"},{no:41,name:"CONNECT_APP_WINDOW"},{no:42,name:"ONBOARDING_TOOLTIP"},{no:43,name:"RIGHT_PANE_PIN_CONTEXT_MENU"},{no:44,name:"SPACE_EXAMPLE_MODAL"},{no:45,name:"TEAM_CANCEL_SURVEY_MODAL"},{no:46,name:"MOVE_MODAL"},{no:47,name:"ACCOUNT_CONTEXT_MENU"},{no:48,name:"BOTTOM_BAR"},{no:49,name:"SYNC_QUEUE"},{no:50,name:"PLAN_CHANGE_MODAL"},{no:51,name:"MAGIC_PAIRING_WINDOW"},{no:52,name:"CONTEXT_MENU"},{no:53,name:"SNACKBAR"},{no:54,name:"FILE_SYSTEM_WARNING"},{no:55,name:"SCREENSHOT"},{no:56,name:"SCREEN_RECORDING"},{no:57,name:"REEL_HOME_PAGE"},{no:58,name:"REEL_VIDEO_PAGE"},{no:59,name:"COMMERCE_HOME_PAGE"},{no:60,name:"COMMERCE_CREATE_LISTING_PAGE"},{no:61,name:"COMMERCE_SELLER_LISTING_PAGE"},{no:62,name:"COMMERCE_BUYER_PAGE"},{no:63,name:"COMMERCE_STRIPE_ONBOARDING_PAGE"},{no:64,name:"ESSENTIAL_SETUP_PAGE"}])})),define("metaserver/static/js/hql/index",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logEvent=void 0,t.logEvent=function(e,t={}){}})),define("metaserver/static/js/clean/analytics",["require","exports","tslib","typescript/dropbox/proto/hql_events/extensions_pb","typescript/dropbox/proto/hql_events/taxonomy_pb","typescript/dropbox/proto/hql_events/ux_analytics/ux_analytics_events_pb","@bufbuild/protobuf","metaserver/static/js/deprecated_ajax/ajax","metaserver/static/js/clean/amp_web_logger","metaserver/static/js/hql/index","metaserver/static/js/uuid/insecure_uuid","metaserver/static/js/ux_analytics/types","metaserver/static/js/clean/viewer","metaserver/static/js/core/exception","metaserver/static/js/clean/lazy_marketing_tracker","@dropbox/ttvc"],(function(e,t,n,a,i,o,s,r,l,_,c,E,m,u,d,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutOfSpaceLogger=t.LowSpaceLogger=t.NqOqEventNames=t.NQOQLogger=t.WebOnboardingLogger=t.LegacySharingVortexLogger=t.ContactSearchLogger=t.WebMiscActivityLogger=t.UserActivityLogger=t.IntentLogger=t.TeamsWebActionsLogger=t.SharingExperimentsLogger=t.ShareTibEventLogger=t.MobileFilePreviewLogger=t.PreviewActivityLogger=t.RestorationStepsLogger=t.ProEventsLogger=t.ProEventNames=t.GrowthEventsLogger=t.UXAnalyticsLogger=t.formatUxaExtraKeysForHql=t.get_uids_for_logging=t.PROJECT_MAGNET_ORIGIN=t.SuggestInvitingSharedUsersModalEvents=t.initializeTtvcCapture=void 0,a=n.__importStar(a),i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r);let T=!1,p=null;t.initializeTtvcCapture=()=>{T||(T=!0,(0,g.onTTVC)(e=>{p=e}))};const S=i.TaxonomyAppSurface_AppSurface,A=i.TaxonomyActionSurface_ActionSurface;(function(e){e.SUGGESTION_ACCEPTED="suggest_invite_modal_accepted",e.SUGGESTION_DISMISSED="suggest_invite_modal_dismissed",e.SUGGESTION_MODAL_OPENED="suggest_invite_modal_opened"})(t.SuggestInvitingSharedUsersModalEvents||(t.SuggestInvitingSharedUsersModalEvents={})),t.PROJECT_MAGNET_ORIGIN="magnet";t.get_uids_for_logging=function(e){let t;const n=m.Viewer.get_viewer();return t=e?[e]:n.get_users().map(e=>e.id),t};const f={modal_open:["modal"],modal_close:["modal"],link_click:["link_id"],link_no_session_storage:["link_id"],element_click:["element_id"],page_view:["page"]},h=e=>e.replace(/_([a-z])/g,e=>e[1].toUpperCase());t.formatUxaExtraKeysForHql=e=>{const t=["requestSeq","instanceEventCount","instanceInitTs","timeOnPage","verticalOffset","left","top","linkRank","elementRank"],n=["url","org_referrer","http_referrer","previous_url","hash_fragment","origin_href","destination_url"],a={};for(const i of Object.keys(e)){let o=h(i),r=e[i];r=null===r?void 0:r,n.includes(i)&&(o+="_pii"),t.includes(o)&&(r=s.protoInt64.parse(Math.round(r))),a[h(o)]=r}return a},t.UXAnalyticsLogger={log(e,n,i,s){const c=[["AMP",()=>{if(s&&s.includes(e)){const t={};if(n&&e in f){f[e].forEach(e=>{e in n&&n[e]&&(t[e]=String(n[e]))})}(0,l.getAMPWebLogger)().logEventCount("uxa_events",e,t)}}],["UXA-Backend",()=>{const t={url:"/log/ux_analytics",data:{event_type:e,extra_params:JSON.stringify(n)}};i?r.SilentBackgroundBeaconRequest(t):r.SilentBackgroundRequest(t)}],["HQL",()=>{if(!n)return;const s=(0,t.formatUxaExtraKeysForHql)(n),r={flushWithBeacon:i};switch(e){case E.LOG_EVENTS.pageView:(0,_.logEvent)(new o.UXAnalyticsShownPage({uxaCommonFields:new o.UXACommonFields(s),hqlMetadata:new a.HQLMetadata({appSurface:S.WEB,actionSurface:A.BROWSER_WINDOW})}),r);break;case E.LOG_EVENTS.linkClick:(0,_.logEvent)(new o.UXAnalyticsSelectLink(Object.assign({uxaCommonFields:new o.UXACommonFields(s),hqlMetadata:new a.HQLMetadata({appSurface:S.WEB,actionSurface:A.BROWSER_WINDOW}),timeAndLocationFields:new o.TimeAndLocationFields(s),elementPositionFields:new o.ElementPositionFields(s)},s)),r);break;case E.LOG_EVENTS.linkNoSessionStorage:(0,_.logEvent)(new o.UXAnalyticsSelectLinkNoSessionStorage({uxaCommonFields:new o.UXACommonFields(s),hqlMetadata:new a.HQLMetadata({appSurface:S.WEB,actionSurface:A.BROWSER_WINDOW}),timeAndLocationFields:new o.TimeAndLocationFields(s)}),r);break;case E.LOG_EVENTS.elementClick:(0,_.logEvent)(new o.UXAnalyticsSelectElement(Object.assign({uxaCommonFields:new o.UXACommonFields(s),hqlMetadata:new a.HQLMetadata({appSurface:S.WEB,actionSurface:A.BROWSER_WINDOW}),timeAndLocationFields:new o.TimeAndLocationFields(s),elementPositionFields:new o.ElementPositionFields(s)},s)),r);break;case E.LOG_EVENTS.finalHeartbeat:(0,_.logEvent)(new o.UXAnalyticsDismissPage({uxaCommonFields:new o.UXACommonFields(s),hqlMetadata:new a.HQLMetadata({appSurface:S.WEB,actionSurface:A.BROWSER_WINDOW}),timeAndLocationFields:new o.TimeAndLocationFields(s)}),r);break;case E.LOG_EVENTS.heartbeat:(0,_.logEvent)(new o.UXAnalyticsHeartbeatPage({uxaCommonFields:new o.UXACommonFields(s),hqlMetadata:new a.HQLMetadata({appSurface:S.WEB,actionSurface:A.BROWSER_WINDOW}),timeAndLocationFields:new o.TimeAndLocationFields(s)}),r);break;case E.LOG_EVENTS.modalOpen:(0,_.logEvent)(new o.UXAnalyticsShownModal(Object.assign({uxaCommonFields:new o.UXACommonFields(s),hqlMetadata:new a.HQLMetadata({appSurface:S.WEB,actionSurface:A.BROWSER_WINDOW}),timeAndLocationFields:new o.TimeAndLocationFields(s)},s)),r);break;case E.LOG_EVENTS.modalClose:(0,_.logEvent)(new o.UXAnalyticsDismissModal(Object.assign({uxaCommonFields:new o.UXACommonFields(s),hqlMetadata:new a.HQLMetadata({appSurface:S.WEB,actionSurface:A.BROWSER_WINDOW}),timeAndLocationFields:new o.TimeAndLocationFields(s)},s)),r);break;case E.LOG_EVENTS.scroll:(0,_.logEvent)(new o.UXAnalyticsScrollPage(Object.assign({uxaCommonFields:new o.UXACommonFields(s),hqlMetadata:new a.HQLMetadata({appSurface:S.WEB,actionSurface:A.BROWSER_WINDOW}),timeAndLocationFields:new o.TimeAndLocationFields(s)},s)),r)}}],["marketing-tracker",d.unloadMarketingTrackerLoggingQueue]];for(const[t,a]of c)try{a()}catch(a){(0,u.reportException)(Object.assign({err:a,severity:u.SEVERITY.NONCRITICAL,tags:["ux_analytics",t]},{exc_extra:{extra_params:n,event_type:e}}))}}},t.GrowthEventsLogger={log(e,t,n,a){r.SilentBackgroundRequest({url:"/log/pro_events",data:{event:e,extra:JSON.stringify(t),is_client:!!a},success:n||void 0,error:n||void 0})}},(function(e){e.BUY_TRY_PAGE_CHECKOUT="buy_try_page_checkout",e.INFO_FORM_FILLED="info_form_filled",e.PAYMENT_FORM_FILLED="payment_form_filled",e.BUY_TRY_PAGE_CHECKOUT_CRASH="buy_try_page_checkout_crash"})(t.ProEventNames||(t.ProEventNames={})),t.ProEventsLogger={log(e,t,n,a,i){r.SilentBackgroundRequest({url:"/log/pro_events",data:{event:e,extra:JSON.stringify(t),is_client:!!a,project:i},success:n||void 0,error:n||void 0})}},t.RestorationStepsLogger={generate_restore_id:e=>({type:"restore",value:`restore#${e}#${c.InsecureUUID.v4()}`}),restore_id_from_string:e=>({type:"restore",value:e}),log_step(e){const t=e.postHandler||void 0;r.SilentBackgroundRequest({url:"/log/restoration_step/step",data:{restore_id:e.restoreId.value,step:e.step,extra:JSON.stringify(e.extra)},subject_user:e.userId,success:t,error:t})},log_entry(e){const n=e.postHandler||void 0,a=e.restoreId||t.RestorationStepsLogger.generate_restore_id(e.userId);return r.SilentBackgroundRequest({url:"/log/restoration_step/entry",data:{restore_id:a.value,step:e.step,entry_point:e.entry_point,extra:JSON.stringify(e.extra)},subject_user:e.userId,success:n,error:n}),a},log_success(e){const t=e.postHandler||void 0;r.SilentBackgroundRequest({url:"/log/restoration_step/success",data:{restore_id:e.restoreId.value,step:e.step,success:e.success||"success",extra:JSON.stringify(e.extra)},subject_user:e.userId,success:t,error:t})},log_failure(e){const t=e.postHandler||void 0;r.SilentBackgroundRequest({url:"/log/restoration_step/failure",data:{restore_id:e.restoreId.value,step:e.step,failure:e.failure,extra:JSON.stringify(e.extra)},subject_user:e.userId,success:t,error:t})}},t.PreviewActivityLogger={start_times:{},start(e,n){t.PreviewActivityLogger.start_times[e]=n||Date.now()},stop(e,n){null!=t.PreviewActivityLogger.start_times[e]&&(n.total_time=Date.now()-t.PreviewActivityLogger.start_times[e],t.PreviewActivityLogger.log(e,n),delete t.PreviewActivityLogger.start_times[e])},log(e,t){r.SilentBackgroundRequest({url:"/preview_activity_log",data:{event_name:e,input_method:t.input_method,file_ext:t.file_ext,extra:t.extra}})}},t.MobileFilePreviewLogger={log(e,t,n,a,i,o){r.SilentBackgroundRequest({url:"/log/mobile_file_preview",data:{client_time:+new Date,event_name:e,file_viewer_session_id:t,file_preview_session_id:n,file_ns_id:a,file_sjid:i,extra:JSON.stringify(o)}})}},t.ShareTibEventLogger={withPerfMetrics:e=>(e=e||{},e=Object.assign(Object.assign({},e),{is_edison:N()}),p?p.duration<0?e:"script"===p.detail.navigationType?e:e=Object.assign(Object.assign({},e),{ttvc:p.duration.toString()}):e),log(e,n,a,i){i=t.ShareTibEventLogger.withPerfMetrics(i),r.SilentBackgroundRequest({url:"/share_tib_log",data:{event:n,origin:a,extra:JSON.stringify(i)},subject_user:e})},log_unauth:(e,n,a)=>(a=t.ShareTibEventLogger.withPerfMetrics(a),r.SilentBackgroundRequest({url:"/share_tib_log_unauth",data:{event:e,origin:n,extra:JSON.stringify(a)}})),get_shmodel_extra_for_logging(e,t){const n={};return e&&(n.tkey=e.linkKey),t&&O(t)&&(n.url=t),n.is_edison=N(),n},get_scl_extra_for_logging(e,t){const n={};return e&&(n.sckey=e.linkKey,n.rlkey=e.rlkey),t&&O(t)&&(n.scl_url=t),n.is_edison=N(),n}};const N=()=>(!!window.RUNNING_IN_EDISON).toString();function O(e){return/dropbox.com\/(scl\/fi|scl\/fo|s|sh)\//.test(e)}t.SharingExperimentsLogger={log(e,t,n={}){r.SilentBackgroundRequest({url:"/log/sharing_experiments",data:{action_type:t,action_extras:JSON.stringify(n)},subject_user:e})}},t.TeamsWebActionsLogger={LOG_CATEGORY:{PROMO_TEAMS:"promo_teams",TEAM_INFO:"team_info",UPGRADE:"upgrade_to_dfb",USAGE_INFO:"usage_info",LIMITED_TEAM_INFO_DETAILED:"limited_team_info_detailed",TEAM_AND_USER_INFO:"team_and_user_info"},log(e,n,a,i,o,s){const l=(0,t.get_uids_for_logging)(i);return r.SilentBackgroundRequest({url:"/teamswalogger",data:{event_name:e,extra:n?JSON.stringify(n):void 0,for_uids:JSON.stringify(l),log_category:s,restricted:o?"1":void 0},success:a||void 0,error:a||void 0})},log_for_category(e,n,a){t.TeamsWebActionsLogger.log(e,a,void 0,void 0,!1,n)}},t.IntentLogger={log(e,t,a,i){const o=(function(e,t=!0){let n;const a=m.Viewer.get_viewer();return e?[a.get_user_by_id(e).account_id]:(n=a.get_account_ids?a.get_account_ids(t):[],n)})(i),s=t||{},{extra:l}=s,_=n.__rest(s,["extra"]),c=Object.assign({event_name:e,extra:JSON.stringify(l)||"{}",for_acc_ids:JSON.stringify(o)},_);r.SilentBackgroundRequest({url:"/intentlogger",data:c,success:a||void 0,error:a||void 0})}},t.UserActivityLogger={start_times:{},start(e,n,a){t.UserActivityLogger.start_times[n]=a||Date.now()},stop(e,n,a,i){null!=t.UserActivityLogger.start_times[n]&&(a.total_time=Date.now()-t.UserActivityLogger.start_times[n],t.UserActivityLogger.log(e,n,a,i),delete t.UserActivityLogger.start_times[n])},log(e,n,a,i){a=a||{};const o=(0,t.get_uids_for_logging)(i);r.SilentBackgroundRequest({url:"/ualogger",data:{platform:e,event_name:n,extra:JSON.stringify(a),for_uids:JSON.stringify(o)}})}},t.WebMiscActivityLogger={log(e,n,a,i){const o=(0,t.get_uids_for_logging)(a);r.SilentBackgroundRequest({url:"/misclogger",data:{event_name:e,extra:JSON.stringify(n),for_uids:JSON.stringify(o)},success:i||void 0,error:i||void 0})}};t.ContactSearchLogger=class{constructor(e=null,t){this.context=e,this.search_mode=t,this._clear_buffers()}_clear_buffers(){this.selection_buffer=[],this.timing_buffer=[],this.total_searches=0,this.slow_searches=0,this.downloaded_contacts=null,this.downloading_time=null}add_record(e){e.deleted=!1,this.selection_buffer.push(e)}flag_record_as_removed(e){for(const t of this.selection_buffer)if(t.contact_id===e&&!t.deleted)return void(t.deleted=!0)}add_timing_record(e){this.timing_buffer.push(e)}count_search(e){this.total_searches+=1,e&&(this.slow_searches+=1)}add_downloading_stats(e){e&&(this.downloading_time=e.downloading_time,this.downloaded_contacts=e.num_contacts)}log_records(e,t,n=0){const a={events:JSON.stringify(this.selection_buffer),canceled:t};if(this.total_searches||this.timing_buffer.length){const e={context:this.context,search_mode:this.search_mode,total_searches:this.total_searches,slow_searches:this.slow_searches,downloading_time:this.downloading_time,downloaded_contacts:this.downloaded_contacts};a.total_contacts=n,a.timing_events=JSON.stringify(this.timing_buffer),a.session_summary=JSON.stringify(e)}r.SilentBackgroundRequest({url:"/contact_search_log",subject_user:e,data:a}),this._clear_buffers()}},t.LegacySharingVortexLogger={log(e){r.SilentBackgroundRequest({url:"/legacy_sharing_vortex_log",data:{event_name:e}})}},t.WebOnboardingLogger={log(e,t,n,a,i){r.SilentBackgroundRequest({url:"/log/onboarding",data:{module_name:t,event_name:n,status:a,extra:JSON.stringify(i)},subject_user:e})}},t.NQOQLogger={logViewModal:(e,n)=>{const a={modal_type:n.modal_type};t.ProEventsLogger.log(`${e}_view`,a)},logCloseModal:(e,n)=>{const a={modal_type:n.modal_type,cta_type:"close"};t.ProEventsLogger.log(`${e}_click_close`,a)},logPreviewLink:(e,n)=>{const a={modal_type:n.modal_type,cta_type:"secondary",cta_text:"preview link"};t.ProEventsLogger.log(`${e}_click_secondary_preview`,a)},logCancelModal:(e,n)=>{const a={modal_type:n.modal_type,cta_type:"secondary",cta_text:"cancel"};t.ProEventsLogger.log(`${e}_click_secondary_cancel`,a)},logAcceptModal:(e,n)=>{const a={modal_type:n.modal_type,cta_type:"primary",cta_text:n.cta_text};t.ProEventsLogger.log(`${e}_click_primary`,a)}},(function(e){e.PRO="pro",e.PLUS="plus",e.BUY_TOP="buy_top",e.BUY_BOTTOM="buy_bottom",e.BUSINESS="business",e.PRO_TRY="pro_try",e.BUY_PLUS="buy_plus",e.BUY_MOBILE="buy_mobile"})(t.NqOqEventNames||(t.NqOqEventNames={})),t.LowSpaceLogger={logView:e=>{t.ProEventsLogger.log(`low_space${e?"_sharing":""}_view`)},logCtaClick:(e,n,a={},i)=>{t.ProEventsLogger.log(`low_space${n?"_sharing":""}_cta_click_${e}`,a,i)}},t.OutOfSpaceLogger={logView:()=>{t.ProEventsLogger.log("out_of_space_view")},logCtaClick:(e,n={},a)=>{t.ProEventsLogger.log(`out_of_space_cta_click_${e}`,n,a)}}})),define("metaserver/static/js/ux_analytics/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UXA_TRACKING_PARAM_KEYS=t.LOG_EVENTS=void 0,t.LOG_EVENTS={heartbeat:"heartbeat",linkClick:"link_click",elementClick:"element_click",linkNoSessionStorage:"link_no_session_storage",modalClose:"modal_close",modalOpen:"modal_open",pageView:"page_view",pageFreeze:"page_freeze",pageResume:"page_resume",scroll:"scroll_event",finalHeartbeat:"final_heartbeat",spaPageView:"spa_page_view",delayedPageViewWithLateMetaTag:"delayed_page_view_with_late_meta_tag",privacyConsentIframeLoaded:"privacy_consent_iframe_loaded",privacyConsentScriptLoaded:"privacy_consent_script_loaded",privacyConsentScriptLoadError:"privacy_consent_script_load_error",marketingTrackerReadyForUxa:"marketing_tracker_ready_for_uxa",dialogOpen:"dialog_open",dialogClose:"dialog_close",documentOpen:"document_open",documentClose:"document_close",conversionDataReady:"conversionDataReady",legacy_hs_analytics_event:"legacy_hs_analytics_event",elementShown:"element_shown",elementHide:"element_hide"},t.UXA_TRACKING_PARAM_KEYS=["gclid","oqa","trigger","msclkid","_tk","_camp","_ad","_net","_kw","utm_campaign","utm_content","utm_medium","utm_source","utm_term","fbclid","tfo"]})),define("metaserver/static/js/ux_analytics/ux_analytics",["require","exports","tslib","metaserver/static/js/ux_analytics/lazy_ux_analytics","metaserver/static/js/ux_analytics/ux_variants","metaserver/static/js/ux_analytics/types","metaserver/static/js/ux_analytics/window_history_listeners","metaserver/static/js/ux_analytics/utils","metaserver/static/js/clean/lazy_marketing_tracker","metaserver/static/js/ux_analytics/element_observers/interaction_observers","metaserver/static/js/ux_analytics/element_observers/observer_constants","metaserver/static/js/ux_analytics/types"],(function(e,t,n,a,i,o,s,r,l,_,c,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UXAnalytics=t.maybePrefixWithExpId=t.extractValidExtra=t.DEFAULT_SHOULD_BE_SENT_TO_MARKETING_TRACKER_VARIABLES=t.STORAGE_KEYS=t.UXStorage=t.lib=t.DOCUMENT_CUSTOM_EVENT=t.DIALOG_CUSTOM_EVENT=t.MARKETING_TRACKER_READY_EVENT=t.PRIVACY_CONSENT_CUSTOM_EVENT=t.UXA_DELAYED_PAGE_VIEW_WITH_LATE_META_TAG_EVENT=t.UXA_VIEW_UPDATE_EVENT=t.UXA_HISTORY_CHANGE_EVENT=void 0;function m(){return(new Date).getTime()}function u(){const e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}function d(e=window){return e.location.href}function g(){const e={},t=(function(e=window){return e.location.search})();if(t.length){const n=t.substring(1).replace(/&amp;/g,"&").split("&");for(const t of n){let[n,a]=t.split("=");n&&a&&(n=n.trim(),a=a.trim(),n.length&&a.length&&(e[n]=decodeURIComponent(a.replace(/\+/g," "))))}}return e}function T(e){return e&&e.hasAttribute("data-uxa-log")}function p(e){return e&&"A"===e.nodeName}function S(e){return e&&e.getAttribute("data-trackingid")}function A(e){return e&&"BODY"===e.nodeName}function f(){return Math.random().toString().slice(2)}t.UXA_HISTORY_CHANGE_EVENT="historyChange",t.UXA_VIEW_UPDATE_EVENT="viewUpdate",t.UXA_DELAYED_PAGE_VIEW_WITH_LATE_META_TAG_EVENT="delayed_page_view_with_late_meta_tag",t.PRIVACY_CONSENT_CUSTOM_EVENT="privacy_consent_custom_event",t.MARKETING_TRACKER_READY_EVENT="marketing_tracker_ready_for_uxa",t.DIALOG_CUSTOM_EVENT="dialog_custom_event",t.DOCUMENT_CUSTOM_EVENT="document_custom_event",t.lib={idGeneratingNow:m};const h=(()=>{let e=null;const t="uxa.onedoesnotsimplyusesessionstorage";try{e=window.sessionStorage,e&&(e.setItem(t,t),e.removeItem(t))}catch(t){e=null}return e})(),N=(()=>{let e=null;const t=window;return e=t.hasOwnProperty("JSON")?t.JSON:null,e})();var O;(function(e){function t(e){return`uxa.${e}`}const n=h,a=N;function i(e){return n?(n.removeItem(t(e)),null):null}e.isEnabled=function(){return!!n},e.get=function(e){if(!n||!a)return null;try{const i=n.getItem(t(e));return null===i?null:a.parse(i)}catch(e){return null}},e.set=function(e,o){if(!n||!a)return null;try{return null===o?i(e):(n.setItem(t(e),a.stringify(o)),null)}catch(e){return null}},e.remove=i,e.clear=function(e){return n?(n.clear(),null):null}})(O=t.UXStorage||(t.UXStorage={}));const v=new Set(Object.keys(o.LOG_EVENTS).map(e=>o.LOG_EVENTS[e]));t.STORAGE_KEYS={linkClick:"clicked_link",trackingParams:"tracking_params",visitId:"visit_id",previousURL:"previous_url",lastActiveTime:"last_active_time",eventLog:"event_log",eventLogTimestamp:"event_log_timestamp"};const R=/\/account|\/share|\/buy|\/pro\/try/;function I(e,t,n){const a={};for(const[i,o]of Object.entries(e))if(t.includes(i)){a["uxa_"+y(i,n)]=o}return a}function y(e,t){return t[e]?(t[e]+"_"+e).toLowerCase().replace(/[^a-z0-9$\[\].]+/g,"_"):e}t.DEFAULT_SHOULD_BE_SENT_TO_MARKETING_TRACKER_VARIABLES=["element_id","link_id","uxa_v","instance_event_count","instance_init_ts","event_ts","client_event_id"],t.extractValidExtra=I,t.maybePrefixWithExpId=y;class L{constructor(e,n,a=!0){var l,E,g;if(this.currentModalId=null,this.lastScrollOffset=0,this.scrollTimer=null,this.trackingParams=null,this.startHeartbeat=()=>{for(const e of[2,5,10,15,30])setTimeout(this.logOnPage.bind(this,o.LOG_EVENTS.heartbeat),1e3*e);for(const e of[1,2,4,9])setTimeout(this.logOnPage.bind(this,o.LOG_EVENTS.heartbeat),60*e*1e3)},this.delayedInit=()=>{this.saveTrackingParams(),this.setupListeners(),this.logPageView(),this.logDelayedClickEvent(),(0,_.setUpElementShown)()},this.getListeners=()=>[[window,"scroll",this.handleScroll],[window,"pageshow",this.handlePageShow],[window,"pagehide",this.handlePageClose],[document.body,"mousedown",this.handleMousedown],[document.body,"keydown",this.handleKeyboardEnter],[document,"modalOpened",this.trackModalShow],[document,"modalClosed",this.trackModalHide],[document,"freeze",this.handlePageFreeze],[document,"resume",this.handlePageResume],[window,t.UXA_HISTORY_CHANGE_EVENT,this.onDBHistoryChange],[document,t.UXA_VIEW_UPDATE_EVENT,e=>this.logViewUpdate(e)],[window,s.SPA_HISTORY_STATE_CHANGE,this.handleHistoryStateChange],[window,t.UXA_DELAYED_PAGE_VIEW_WITH_LATE_META_TAG_EVENT,this.handleDelayedPageViewEventWithLateMetaTags],[window,t.PRIVACY_CONSENT_CUSTOM_EVENT,this.handlePrivacyConsentCustomEvent],[window,t.MARKETING_TRACKER_READY_EVENT,this.handleMarketTrackerReadyEvent],[document,t.DIALOG_CUSTOM_EVENT,this.handleDialogCustomEvent],[document,t.DOCUMENT_CUSTOM_EVENT,this.handleDocumentCustomEvent],[window,c.ELEMENT_INTERACTION_EVENT,this.handleInteractionCustomEvent]],this.trackScrolling=()=>{this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this.onScroll,500)},this.handleScroll=(function(e,t,n={}){let a=null,i=0;return function(){const o=m();i||!1!==n.leading||(i=o);const s=t-(o.valueOf()-i.valueOf());let r=arguments;if(s<=0||s>t)a&&(clearTimeout(a),a=null),i=o,e.apply(null,r),r=null;else if(!a&&!1!==n.trailing){const t=()=>{i=!1===n.leading?0:m(),a=null,e.apply(null,r),r=null};a=setTimeout(t,s)}}})(this.trackScrolling,2e3,{leading:!0}),this.onScroll=()=>{const e=u();this.lastScrollOffset!==e&&(this.lastScrollOffset=e,this.logOnPage(o.LOG_EVENTS.scroll,{vertical_offset:e}))},this.handlePageShow=e=>{if(this.navigationType=(0,r.getNavigationType)(),this.bfcacheEligible=e.persisted,e.persisted){this.cleanSessionStorage();const e=O.get(t.STORAGE_KEYS.previousURL);O.set(t.STORAGE_KEYS.previousURL,d()),this.previousUrl=e,this.visitId=O.get(t.STORAGE_KEYS.visitId),setTimeout(this.delayedInit,200)}},this.handlePageClose=e=>{const t={};t.vertical_offset=t.vertical_offset||u(),t.time_on_page=t.time_on_page||this.getTimeOnPage(),this.logEvent(this.createEvent(o.LOG_EVENTS.finalHeartbeat,t))},this.handleElementClick=e=>{const t=(function(e){let t=e;for(let e=0;e<6&&!T(t)&&!A(t);e++){const e=t.parentNode;if(!(e instanceof HTMLElement))break;t=e}return t})(e.target);if(!T(t))return;const n=t.getBoundingClientRect(),a=this.createEvent(o.LOG_EVENTS.elementClick,{left:Math.round(n.left),element_id:t.getAttribute("data-uxa-log"),element_rank:this.getElementRank(t),time_on_page:this.getTimeOnPage(),top:Math.round(n.top),vertical_offset:u(),tag_name:t.tagName.toLowerCase()});if(this.clickPositionLoggingEnabled&&"offsetX"in e&&"offsetY"in e){const t=e,n=e.target;a.extra.position_pct_X=Math.round(t.offsetX/n.offsetWidth*100),a.extra.position_pct_Y=Math.round(t.offsetY/n.offsetHeight*100)}this.logEvent(a)},this.handleLinkClick=e=>{const t=(function(e){let t=e;for(let e=0;e<6&&(!p(t)&&!S(t))&&!A(t);e++){const e=t.parentNode;if(!(e instanceof HTMLElement))break;t=e}return t})(e.target);if(!p(t)&&!S(t))return;const n=t.getBoundingClientRect(),a=this.createEvent(o.LOG_EVENTS.linkClick,{left:Math.round(n.left),link_id:t.getAttribute("data-trackingid"),link_rank:this.getLinkRank(t),origin_href:t.getAttribute("href"),time_on_page:this.getTimeOnPage(),top:Math.round(n.top),vertical_offset:u(),tag_name:t.tagName.toLowerCase()});this.delayedLinkClickLogging&&p(t)?this.storeDelayedLinkClick(a):this.logEvent(a)},this.onDBHistoryChange=e=>{var n;n=e.detail.url,R.test(n)&&(O.set(t.STORAGE_KEYS.previousURL,d()),this.previousUrl=e.detail.previousUrl,++this.requestSeq,this.logPageView())},this.handleHistoryStateChange=e=>{const n=O.get(t.STORAGE_KEYS.previousURL);O.set(t.STORAGE_KEYS.previousURL,d()),this.previousUrl=n,++this.requestSeq,this.logSpaPageView(e.detail.eventSource)},this.handleDelayedPageViewEventWithLateMetaTags=e=>{(0,i.addConfigsFromDOM)(!0),this.logEvent(this.createEvent(o.LOG_EVENTS.delayedPageViewWithLateMetaTag))},this.handlePrivacyConsentCustomEvent=e=>{this.logEvent(this.createEvent(o.LOG_EVENTS[e.detail.eventType],e.detail.extra))},this.handleDialogCustomEvent=e=>{this.logEvent(this.createEvent(o.LOG_EVENTS[e.detail.eventType],e.detail.extra))},this.handleDocumentCustomEvent=e=>{this.logEvent(this.createEvent(o.LOG_EVENTS[e.detail.eventType],e.detail.extra))},this.handleMousedown=e=>{this.handleLinkClick(e),this.handleElementClick(e)},this.handleKeyboardEnter=e=>{13===e.keyCode&&(this.handleLinkClick(e),this.handleElementClick(e))},this.handleMarketTrackerReadyEvent=e=>{this.logEvent(this.createEvent(o.LOG_EVENTS[e.detail.eventType],e.detail.extra))},this.handlePageFreeze=()=>{this.logEvent(this.createEvent(o.LOG_EVENTS.pageFreeze))},this.handlePageResume=()=>{this.logEvent(this.createEvent(o.LOG_EVENTS.pageResume))},this.handleInteractionCustomEvent=e=>{this.logEvent(this.createEvent(o.LOG_EVENTS[e.detail.eventType],e.detail.extra))},this._modalIdSanitizer=e=>{if("upsell-home-modal"===e.id){const t=Array.from(e.classList).find(e=>e.indexOf("db-modal-custom-")>-1);if(t)return t.replace("db-modal-custom-","")}return e.id},this.trackModalShow=()=>{const e=document.querySelectorAll(this.modalClass),t=Array.from(e).find(e=>"none"!==window.getComputedStyle(e).display||e.classList.contains("clean-react-modal")||e.classList.contains("uxa-modal-tracking-span"));t&&(this.currentModalId=this._modalIdSanitizer(t)||"n/a -- file bug to cgi-team",this.logModal(o.LOG_EVENTS.modalOpen,this.currentModalId))},this.trackModalHide=()=>{this.currentModalId&&(this.logModal(o.LOG_EVENTS.modalClose,this.currentModalId),this.currentModalId=null)},"PITHOS"!=n.inclusionMethod&&"dropbox.com"!=location.hostname.split(".").slice(-2).join("."))throw new Error(`UXAnalytics.log: trying to log at non-entitled site (${location.hostname})`);(0,s.installHistoryListeners)(),this.cleanSessionStorage();const f=O.get(t.STORAGE_KEYS.previousURL)||n.previousUrl;O.set(t.STORAGE_KEYS.previousURL,d()),this.instance_event_count=0,this.instance_init_ts=t.lib.idGeneratingNow(),this.requestId=n.requestId,this.orgReferrer=n.orgReferrer,this.httpReferrer=n.httpReferrer,this.previousUrl=f,this.visitId=O.get(t.STORAGE_KEYS.visitId),this.requestSeq=0,this.event_names=n.event_names,this.logger=e,this.cmsPageUuid=document.body.getAttribute("data-article-uuid"),this.bfcacheEligible=!1,void 0!==n.delayed_link_click_logging?this.delayedLinkClickLogging=n.delayed_link_click_logging:this.delayedLinkClickLogging=!0,void 0!==n.modal_class?this.modalClass=n.modal_class:this.modalClass=".uxa-modal",void 0!==n.shouldBeSentToMarketingTrackerVariables?this.shouldBeSentToMarketingTrackerVariables=n.shouldBeSentToMarketingTrackerVariables:this.shouldBeSentToMarketingTrackerVariables=t.DEFAULT_SHOULD_BE_SENT_TO_MARKETING_TRACKER_VARIABLES,this.marketingTrackerExtraEnabled=!!n.marketingTrackerExtraEnabled,this.marketingTrackerIntegrationEnabled=!!n.marketingTrackerIntegrationEnabled,this.clickPositionLoggingEnabled=!!n.clickPositionLoggingEnabled,this.isInternalIp=!!n.isInternalIp,this.isUserDropboxAdmin=!!n.isUserDropboxAdmin,this.expEventsToExpIdMap=null!==(l=n.expEventsToExpIdMap)&&void 0!==l?l:{},this.expDataFieldsToExpIdMap=null!==(E=n.expDataFieldsToExpIdMap)&&void 0!==E?E:{},this.inclusionMethod=null!==(g=n.inclusionMethod)&&void 0!==g?g:"need_to_define",this.configTime=Number(n.configTime)||0,this.initTime=m(),this.startHeartbeat(),a?setTimeout(this.delayedInit,200):this.delayedInit()}static initialize(e,t,n=null,a=!0){if(null===L.singleton)L.singleton=new L(e,t,a);else if(n){[["requestId",t.requestId,L.singleton.requestId],["orgReferrer",t.orgReferrer,L.singleton.orgReferrer],["httpReferrer",t.httpReferrer,L.singleton.httpReferrer],["configs.delayed_link_click_logging",t.delayed_link_click_logging,L.singleton.delayedLinkClickLogging],["configs.event_names",t.event_names,L.singleton.event_names],["configs.modal_class",t.modal_class,L.singleton.modalClass],["configs.shouldBeSentToMarketingTrackerVariables",t.shouldBeSentToMarketingTrackerVariables,L.singleton.shouldBeSentToMarketingTrackerVariables],["configs.marketingTrackerIntegrationEnabled",t.marketingTrackerIntegrationEnabled,L.singleton.marketingTrackerIntegrationEnabled],["configs.marketingTrackerExtraEnabled",t.marketingTrackerExtraEnabled,L.singleton.marketingTrackerExtraEnabled],["configs.isInternalIp",t.isInternalIp,L.singleton.isInternalIp],["configs.isUserDropboxAdmin",t.isUserDropboxAdmin,L.singleton.isUserDropboxAdmin],["configs.expEventsToExpIdMap",t.expEventsToExpIdMap,L.singleton.expEventsToExpIdMap],["configs.expDataFieldsToExpIdMap",t.expDataFieldsToExpIdMap,L.singleton.expEventsToExpIdMap]].forEach(([e,t,a])=>{void 0!==t&&t!==a&&n(new Error(`UX Analytics initialize overload attempt; ${e} '${t}' !== '${a}'`))})}return L.singleton}canUseDevTools(){return(this.isInternalIp||this.isUserDropboxAdmin)&&"PITHOS"!==this.inclusionMethod}setupListeners(){this.getListeners().forEach(([e,t,n])=>{e.addEventListener(t,n)}),(0,a.uxaIsListening)()}cleanupListeners(){this.getListeners().forEach(([e,t,n])=>{e.removeEventListener(t,n)})}cleanSessionStorage(){const e=m(),n=O.get(t.STORAGE_KEYS.visitId),a=O.get(t.STORAGE_KEYS.lastActiveTime);null===n?O.set(t.STORAGE_KEYS.visitId,f()):null!==a&&e-a>=18e5&&(O.remove(t.STORAGE_KEYS.previousURL),O.set(t.STORAGE_KEYS.visitId,f())),O.set(t.STORAGE_KEYS.lastActiveTime,e)}logPageView(){const e={page_view_latency:-100,bfcache_eligible:this.bfcacheEligible,navigation_type:this.navigationType};if(this.configTime>0){const t=Math.round((this.instance_init_ts-this.configTime)/1e3);e.page_view_latency=t<=10?t:11,this.configTime=-1}else 0===this.configTime&&(e.page_view_latency=-10,this.configTime=-1);this.logEvent(this.createEvent(o.LOG_EVENTS.pageView,e))}logSpaPageView(e){this.logEvent(this.createEvent(o.LOG_EVENTS.spaPageView,{spa_source:e}))}logModal(e,t){const n={modal:t};this.logOnPage(e,n,!0)}logViewUpdate(e){const{viewId:t,viewStep:n}=e.detail,a={view:t,view_step:n};this.logOnPage("view_update",a,!0)}logDelayedClickEvent(){if(!O.isEnabled())return null;const e=O.get(t.STORAGE_KEYS.linkClick);if(e)try{e.destination_url=d();const n={eventName:o.LOG_EVENTS.linkClick,extra:e};this.logEvent(n),O.remove(t.STORAGE_KEYS.linkClick)}catch(e){}return null}logOnPage(e,t={},n=!1){const a=this.getTimeOnPage();t.vertical_offset=t.vertical_offset||u(),t.time_on_page=t.time_on_page||a,(a<600||n)&&this.logEvent(this.createEvent(e,t))}logEvent(a){var o;return n.__awaiter(this,void 0,void 0,(function*(){try{if(s=a.eventName,!v.has(s))throw new Error(`UXAnalytics.log: trying to log an invalid event (${a.eventName})`);(0,i.addMatchedVariantsToEvent)(a);const r=t.lib.idGeneratingNow();"loading"===document.readyState&&(yield new Promise((function(e){"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()}))}))),a.extra.instance_event_count=++this.instance_event_count,a.extra.instance_init_ts=this.instance_init_ts,a.extra.event_ts=r,a.extra.client_event_id=`${this.instance_init_ts}-${this.instance_event_count}-${r}`,this.getWARPInfo()&&(a.extra.warp_variants=this.getWARPInfo());let _={};if(this.marketingTrackerExtraEnabled&&(_=I(a.extra,this.shouldBeSentToMarketingTrackerVariables,this.expDataFieldsToExpIdMap)),this.marketingTrackerIntegrationEnabled){const e=y(a.eventName,this.expEventsToExpIdMap);(0,l.pushToMarketingTrackerLoggingQueue)(e,_)}if(this.logger.log(a.eventName,a.extra,!0,this.event_names),this.canUseDevTools()){const i=parseFloat(String(O.get(t.STORAGE_KEYS.eventLogTimestamp)));if(i<=Date.now()){const e=1e3,n=(Array.isArray(O.get(t.STORAGE_KEYS.eventLog))&&null!==(o=O.get(t.STORAGE_KEYS.eventLog))&&void 0!==o?o:[]).filter(e=>{var t;return parseFloat(String(null===(t=null==e?void 0:e.extra)||void 0===t?void 0:t.event_ts))>=i}).concat(a).slice(-e);O.set(t.STORAGE_KEYS.eventLog,n)}else Array.isArray(O.get(t.STORAGE_KEYS.eventLog))&&O.remove(t.STORAGE_KEYS.eventLog);try{yield new Promise((t,n)=>{e(["metaserver/static/js/ux_analytics/styles/devtools.module.css"],t,n)}).then(n.__importStar)}catch(e){throw new Error("UXAnalytics.log: failed to load devtools.module.css")}}}catch(e){throw e}var s}))}createEvent(e,t={}){if(this.orgReferrer&&(t.org_referrer=this.orgReferrer),this.visitId&&(t.visit_id=this.visitId),t.request_seq=this.requestSeq,this.httpReferrer&&(t.http_referrer=this.httpReferrer),this.previousUrl&&(t.previous_url=this.previousUrl),this.cmsPageUuid&&(t.cms_page_uuid=this.cmsPageUuid),t.request_id=t.request_id||this.requestId,t.url=t.url||d(),location.hash&&(t.hash_fragment=location.hash),t.uxa_v=2.2,t.uxa_inclusion_method=this.inclusionMethod,this.trackingParams)for(const e of Object.keys(this.trackingParams)){const n=e.replace(/^_/,""),a=this.trackingParams[e];t[`param_${n}`]=a}return{eventName:e,extra:t}}storeDelayedLinkClick(e){if(!O.isEnabled())return this.logOnPage(o.LOG_EVENTS.linkNoSessionStorage),!1;try{O.set(t.STORAGE_KEYS.linkClick,e.extra)}catch(e){return!1}return!0}saveTrackingParams(){const e=this.getTrackingParams();Object.keys(e).length?(O.set(t.STORAGE_KEYS.trackingParams,e),this.trackingParams=e):this.trackingParams=null}getTrackingParams(){const e=O.get(t.STORAGE_KEYS.trackingParams)||{},n=g();for(const t of E.UXA_TRACKING_PARAM_KEYS)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}getWARPInfo(){return this.warpInfo=this.warpInfo||(0,r.getWARPInfoFromDOM)(),this.warpInfo||null}getTimeOnPage(){return Math.round((m()-this.initTime)/1e3)}getElementRank(e){const t=e.nodeName.toLowerCase(),n=e.getAttribute("data-uxa-log"),a=document.querySelectorAll(`${t}[data-uxa-log="${n}"]`);if(1===a.length)return 1;for(let t=0;t<a.length;t++)if(a[t]===e)return t+1;return-1}getLinkRank(e){const t=e.getAttribute("href"),n=document.querySelectorAll(`a[href="${t}"]`);if(1===n.length)return 1;for(let t=0;t<n.length;t++)if(n[t]===e)return t+1;return-1}}t.UXAnalytics=L,L.singleton=null})),define("metaserver/static/js/ux_analytics/dispatch_custom_event",["require","exports"],(function(e,t){"use strict";function n(e,t={detail:null}){if("function"==typeof CustomEvent)return new CustomEvent(e,t);const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!0,!0,t.detail),n}Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchCustomEvent=t.createCustomEvent=void 0,t.createCustomEvent=n,t.dispatchCustomEvent=function(e,t){window.dispatchEvent(n(e,t))}})),define("metaserver/static/js/clean/amp_web_logger",["require","exports","metaserver/static/js/metrics/index"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAMPWebLogger=t.AMPLoggerSingleton=void 0;class a{constructor(e){this.metricsReporter=e}logEventCount(e,t,n,a=1){const i={};for(const e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);this.metricsReporter.createStats({ns:e,name:t},i).record(a)}}let i;t.AMPLoggerSingleton=a,t.getAMPWebLogger=function(){return i||(i=new a((0,n.getMetricsReporter)())),i}}));
//# sourceMappingURL=pkg-core-analytics.min.js-vflOw3Ir-.map